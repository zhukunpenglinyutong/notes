# 1.Nodeé€ŸæŸ¥

## ğŸ¡ç¬¬ä¸€éƒ¨åˆ†ï¼šNodeåŸºç¡€æ“ä½œ

### 1.æ–‡ä»¶ç³»ç»Ÿ

```js
// ============++ åŒæ­¥ ++============

// 1.åŒæ­¥è¯»å–æ–‡ä»¶
fs.readFileSync('input.txt').toString()

// 2.åŒæ­¥å†™å…¥æ–‡ä»¶
fs.writeFileSync(file, data)

// 3.åŒæ­¥è¿½åŠ å†…å®¹
fs.appendFileSync(file, data)

// 4.åŒæ­¥è¯»å–ç›®å½•
fs.readdirSync(path)

// 5.åŒæ­¥åˆ›å»ºç›®å½•
fs.mkdirSync(path, [option]) //  options å‚æ•°ä¸€ æ˜¯å¦ä»¥é€’å½’çš„æ–¹å¼åˆ›å»ºç›®å½•ï¼Œé»˜è®¤false |å‚æ•°äºŒï¼š mode è®¾ç½®ç›®å½•æƒé™ï¼Œé»˜è®¤0777

// 6.åŒæ­¥åˆ é™¤ç›®å½•
fs.rmdirSync(path)

// 7.è·å–æ–‡ä»¶ä¿¡æ¯
fs.statSync('è·¯å¾„')

// 8.åˆ é™¤æ–‡ä»¶
fs.unlinkSync(path)



// ============++ å¼‚æ­¥ ++============

// 1.å¼‚æ­¥è¯»å–æ–‡ä»¶
fs.readFile('input.txt', (err, data) => {
   if (err) console.error(err);
   console.log("å¼‚æ­¥è¯»å–: " + data.toString());
})

// å…¶ä½™çš„éƒ½æ˜¯ä¸€ä¸ªé“ç†ï¼Œå»é™¤æ‰Syncï¼ŒåŠ ä¸ªå›è°ƒå‡½æ•°
```

::: tip
[æ›´å¤šè¯·çœ‹...](https://www.runoob.com/nodejs/nodejs-fs.html)
:::

---

### 2.å¯åŠ¨httpæœåŠ¡

```javascript
//å¯¼å…¥HTTPæ¨¡å—
let http = require('http')
 
//å®šä¹‰ä¸€ä¸ªè¦ç›‘å¬çš„ç«¯å£
const PORT = 8989;
 
// ä¸€ä¸ªå¤„ç†è¯·æ±‚å’Œå‘é€å“åº”çš„å‡½æ•°
const handleRequest = (request, response) => {
    response.end('Hello World!!!')
}

// åˆ›å»ºæœåŠ¡å™¨
let server = http.createServer(handleRequest);
 
// å¯åŠ¨æœåŠ¡
server.listen(PORT, () => {
    console.log("Server listening on: http://localhost:%s", PORT);
})
```

---

### 3.å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªä»£ç†é™æ€èµ„æºçš„HTTPæœåŠ¡

::: tip
ä¸­æ–‡ç›®å½•ä¼šæœ‰ä»£ç†ä¸ä¸Šçš„åœ°æ–¹ï¼ˆä¸€èˆ¬ä¹Ÿä¸ç”¨çº¯Nodeä»£ç†ï¼Œç›´æ¥ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶ä»£ç†ï¼‰
:::

```javascript
let http = require('http')
let fs = require('fs')
let url = require('url')
let path = require('path')

let server = http.createServer(function(request, response){
    //è·å–è¾“å…¥çš„urlè§£æåçš„å¯¹è±¡
    let pathObj = url.parse(request.url, true);
    //staticæ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„
    let staticPath = path.resolve(__dirname, 'dist')
    //è·å–èµ„æºæ–‡ä»¶ç»å¯¹è·¯å¾„
    let filePath = path.join(staticPath, pathObj.pathname)
    // å¦‚æœæ˜¯æ ¹ç›®å½•çš„æƒ…å†µä¸‹çš„è®¿é—®ï¼Œéœ€è¦æ‹¼æ¥ä¸Š /index.html
    if (filePath.charAt(filePath.length-1)=="/"){
      filePath+="index.html";
    }
    //å¼‚æ­¥è¯»å–file
    fs.readFile(filePath, 'binary', function(err, fileContent){
        if (err) {
            console.log('404')
            response.writeHead(404, 'not found')
            response.end('<h1>404 Not Found</h1>')
        } else {
            console.log('ok')
            response.write(fileContent, 'binary')
            response.end()
        }
    })
})

server.listen(9999)
console.log('visit http://localhost:9999')
```

---

### 4.Expressä»£ç†é™æ€èµ„æºï¼ˆæˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªï¼‰

- å®‰è£…ï¼šnpm install express --save

```javascript
var express = require('express')
var app = express()

app.use(express.static('docs')) // ä»£ç†çš„æ–‡ä»¶å¤¹ï¼ˆè‡ªåŠ¨æ‰¾æ–‡ä»¶å¤¹ä¸‹çš„index.htmlä¸º /çº§ç›®å½•å†…å®¹ï¼‰

app.listen(3000, () => console.log('Example app listening on port 3000!'))
```

---

## ğŸ­ç¬¬äºŒéƒ¨åˆ†ï¼šNodeå¸¸ç”¨çš„ç»„åˆæ“ä½œ

### 1.å¤åˆ¶æŸæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹

```js
const fs = require('fs')

// å¤åˆ¶æ–‡ä»¶å¤¹
function exists (src, dst) {
  //æµ‹è¯•æŸä¸ªè·¯å¾„ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  fs.exists(dst, function(exists){
      if (exists) {//ä¸å­˜åœ¨
          copy(src,dst);
      } else {//å­˜åœ¨
          fs.mkdir(dst,function(){//åˆ›å»ºç›®å½•
              copy(src,dst)
          })
      }
  })
}

// å¤åˆ¶æ–‡ä»¶å¤¹çš„è¾…åŠ©å‡½æ•°
function copy (src, dst) {
  //è¯»å–ç›®å½•
  let paths = fs.readdirSync(src);
  paths.forEach(function(path){
      var _src=src+'/'+path;
      var _dst=dst+'/'+path;
      var readable;
      var writable;
      fs.stat(_src,function(err,st){
          if(err){
              throw err;
          }
          
          if(st.isFile()){
              readable=fs.createReadStream(_src);//åˆ›å»ºè¯»å–æµ
              writable=fs.createWriteStream(_dst);//åˆ›å»ºå†™å…¥æµ
              readable.pipe(writable);
          }else if(st.isDirectory()){
              exists(_src,_dst,copy);
          }
      });
  });
}

// ä½¿ç”¨æ¼”ç¤º å°† a æ–‡ä»¶å¤¹ä¸‹ æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¤åˆ¶åˆ° bæ–‡ä»¶å¤¹ä¸‹
exists('./a', './b')
```

---

## ğŸ“šå‚è€ƒåˆ—è¡¨ï¼ˆè‡´æ•¬ï¼‰

- [Nodeæ•™ç¨‹|èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/nodejs/nodejs-tutorial.html)
