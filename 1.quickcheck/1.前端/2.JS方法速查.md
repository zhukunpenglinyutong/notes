# 2.JSæ–¹æ³•é€ŸæŸ¥

## ğŸŒ²æ•°ç»„

### 1.æ•°ç»„å»é‡

```js
let arrs = [1,2,2,3,3,6,5,5];

// ES6
[...new Set(arr)] // [1,2,3,6,5]
// æ­¤æ–¹æ³•ä¹Ÿèƒ½å»é™¤æ•°ç»„ä¸­é‡å¤çš„é¡¹ï¼š[...new Set('ababbc')].join('') // abc

// å…¶ä»–æ–¹æ³•
function uniq(array){
    let temp = [];
    let l = array.length;
    for(let i = 0; i < l; i++) {
        for(let j = i + 1; j < l; j++){
            if (array[i] === array[j]){
                i++;
                j = i;
            }
        }
        temp.push(array[i]);
    }
    return temp;
}
console.log(uniq(arrs)); // [1,2,3,6,5]
```

**æ•°ç»„å»é‡æ‹“å±•ï¼ˆä¼ å‚æ•° æŒ‡å®šå»é™¤å“ªä¸ªé‡å¤çš„ï¼Œæœªå®Œæˆï¼‰**

---

### 2.æ•°ç»„åˆå¹¶

```js
let arr1 = [1,2,3]
let arr2 = [4,5,6]

// ES6
[...arr1, ...arr2] //Â [1, 2, 3, 4, 5, 6]


// æ–¹æ³•2ï¼šconcatæ–¹æ³•ï¼ˆæŒ‚è½½ArrayåŸå‹é“¾ä¸Šï¼‰
let c = a.concat(b);
console.log(c); // [1, 2, 3, 4, 5, 6]
console.log(a); // [1, 2, 3]  ä¸æ”¹å˜æœ¬èº«
// å¤‡æ³¨ï¼šçœ‹ä¼¼concatä¼¼ä¹æ˜¯ æ•°ç»„å¯¹è±¡çš„æ·±æ‹·è´ï¼Œå…¶å®ï¼Œconcat åªæ˜¯å¯¹æ•°ç»„çš„ç¬¬ä¸€å±‚è¿›è¡Œæ·±æ‹·è´

// æ–¹æ³•3ï¼šapplyæ–¹æ³•
Array.prototype.push.apply(a, b);
console.log(a); // [1, 2, 3, 4, 5, 6] æ”¹å˜åŸç›®æ ‡æ•°ç»„
console.log(b); // [4, 5, 6]

```

---

### 3.è·å¾—æ•°ç»„æœ€å¤§æœ€å°å€¼

```js

// ä½¿ç”¨ Math ä¸­çš„ max/min æ–¹æ³•
let arr = [22,13,6,55,30];

// ES6
Math.max(...arr); // 55
Math.min(...arr); // 6

// ES5
Math.max.apply(null, arr); // 55
Math.min.apply(null, arr); // 6

```

---

### 4.è·å–æ•°ç»„äº¤é›†

```js
// ES6 å†™æ³•
const similarity = (arr1, arr2) => arr1.filter(v => arr2.includes(v));
similarity([1, 2, 3], [1, 2, 4]); // [1,2]

// ES5 å†™æ³•
// function similarity(arr1, arr2) {
//   return arr2.filter(function(v) {
//     return arr1.includes(v)
//   })
// }
```

---

### 5.å¤šç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„ï¼ˆæ•°ç»„é™çº¬ï¼‰

```js
let arr = [1, [2], [[3], 4], 5];

// ES6 æ•°ç»„çš„flat()
arr.flat() // [1, 2, Array(1), 4, 5] å¦‚æœè¿™æ ·å†™çš„è¯åªèƒ½å±•å¼€äºŒç»´æ•°ç»„ï¼Œä½†æ˜¯å¯ä»¥åŠ å‚æ•°Infinityï¼Œå°±æ˜¯èƒ½å±•å¼€å¤šç»´æ•°ç»„
arr.flat(Infinity) // [1, 2, 3, 4, 5] æ³¨æ„å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè·³è¿‡ç©ºä½

// å…¶ä»–æ–¹æ³•
const deepFlatten = arr => [].concat(...arr.map(v => (Array.isArray(v) ? deepFlatten(v) : v)));
deepFlatten(arr); // [1,2,3,4,5]


// æ‰§è¡Œæ•ˆç‡éªŒè¯ï¼ˆæ‹“å±•ï¼‰
// let start = new Date().getTime();
// console.log('reduceDimension: ', deepFlatten([1, [2], [[3], 4], 5]);
// console.log('è€—æ—¶: ', new Date().getTime() - start); // *ms

// ES6 æ•°ç»„çš„flatMap() æ–¹æ³•å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ä¸€ä¸‹ï¼Œæ‹“å±•ä¸‹è‡ªå·±çš„çŸ¥è¯†é¢
```

---

### 6.è¿‡æ»¤æ•°ç»„å¯¹è±¡ï¼ˆæ‹¿å–JSONæ•°ç»„ä¸­çš„ç‰¹å®šé¡¹ï¼‰

```js
const data = [
  { id: 1, name: 'john', age: 24 },
  { id: 2, name: 'zkp', age: 21 },
  { id: 3, name: 'mike', age: 50 }
];

// ES6
const reducedFilter = (data, keys, fn) => data.filter(fn).map(el => keys.reduce((acc, key) => {acc[key] = el[key];return acc;}, {}));

// å‚æ•°ä¸€ å¿…å¡« æ•°ç»„å¯¹è±¡ï¼ˆä¸€èˆ¬éƒ½JSONé‚£ç§æ•°ç»„å¯¹è±¡ï¼‰
// å‚æ•°äºŒ å¿…å¡« æ•°ç»„ï¼Œé‡Œé¢ä¼ çš„æ˜¯ä½ éœ€è¦è¿”å›çš„å­—æ®µï¼ˆçœ‹ä¸‹é¢çš„ç¤ºä¾‹å°±æ˜ç™½äº†ï¼‰
// å‚æ•°ä¸‰ å¿…å¡« è¿‡æ»¤çš„æ¡ä»¶ï¼ˆçœ‹ä¸‹é¢ç¤ºä¾‹å°±æ˜ç™½äº†ï¼‰
reducedFilter(data, ['id', 'name'], item => item.age > 25); // [{ id: 3, name: 'mike'}]
// æ³¨ï¼šæœ€åè¿”å›ç»“æœï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„

// è¿™ä¸ªåœ¨ RESTful API æ¨¡å¼ä¸‹è¿”å›JSONæ•°æ®çš„æ—¶å€™è¿˜æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œä¼šèŠ‚çœä½ forEachçš„çš„è¿‡ç¨‹
```

---

### 7.æ•°ç»„å¯¹è±¡å»é‡
    
```js
let arr = [
  {id: 1, name: 'Jhon1'},
  {id: 2, name: 'sss'},
  {id: 3, name: 'Jhon2'},
  {id: 4, name: 'Jhon3'}
]

// ES6
const uniqueElementsBy = (arr, fn) =>arr.reduce((acc, v) => {if (!acc.some(x => fn(v, x))) acc.push(v);return acc;}, []);

// ä¸‹é¢çš„ç¤ºä¾‹è¡¨ç¤ºï¼Œå»é‡ä¾æ®æ˜¯ id ï¼Œå°±æ˜¯ idä¸€æ ·çš„ï¼Œåªç•™ä¸‹ä¸€ä¸ª
uniqueElementsBy(arr, (a, b) => a.id === b.id) // [{id: 1, name: 'Jhon1'}, {id: 2, name: 'sss'}]

```

---

### 8.æ•°ç»„æ’åºï¼ˆsortï¼‰
    
```js
let objArr = [
  {name: 'test1', age: 20},
  {name: 'test1', age: 22},
  {name: 'test1', age: 21}
]

// ç¬¬ä¸€å‚æ•°aï¼Œ ç¬¬äºŒå‚æ•°b ---> a-bå‡åºï¼ˆä»å°åˆ°å¤§ï¼‰;b-aé™åºï¼ˆä»å¤§åˆ°å°ï¼‰ï¼ŒåŸç†å°±æ˜¯ ä¸¤æ•°è®¡ç®—ï¼Œå¦‚æœè¿”å›çš„æ˜¯è´Ÿæ•°ï¼Œå°±ä¿ç•™å‰è€…ï¼ˆæˆ‘å¯èƒ½è¯´çš„ä¸å¯¹ï¼Œæ¬¢è¿çº æ­£ï¼‰
objArr.sort((a, b) => {
  return a.age - b.age
}) 
// ç»“æœä¼šæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—


```

---

### 8.æ•°ç»„ä¹±åº
    
```js
function shuffle(arr) {
  let array = arr
  let index = array.length

  while (index) {
    index -= 1
    let randomInedx = Math.floor(Math.random() * index)
    let middleware = array[index]
    array[index] = array[randomInedx]
    array[randomInedx] = middleware
  }

  return array
}

let arr = [1,2,3,4,5]
shuffle(arr) // [3, 4, 2, 5, 1] ç»“æœä¸å®š
```

**è¿˜æœ‰æ›´ç®€å•çš„æ–¹å¼ï¼Œæ¬¢è¿æ¥æ’©**

---

### 10.æ£€æŸ¥æ•°ç»„ä¸­æŸå…ƒç´ å‡ºç°çš„æ¬¡æ•°
    
```js
function countOccurrences(arr, value) {
  return arr.reduce((a, v) => v === value ? a + 1 : a + 0, 0);
}

let arr = [1,2,3,4,1,2,4]
countOccurrences(arr, 1) // 2
```

---

### 11.åœ¨æ•°ç»„ç¬¬ä¸€ä½æ’å…¥é¡¹
    
```js
let arr1 = [2,3,4,5]
let arr2 = [1]

// ES6
console.log([...arr2, ...arr1]) // [1,2,3,4,5]
```

**æ³¨ï¼šè¿™ç§æ˜¯æ•°ç»„åˆå¹¶çš„æ€è·¯ï¼Œä¸€å®šæœ‰å…¶ä»–æ–¹å¼ï¼Œç­‰å¾…ä½ çš„è¡¥å……**

---

### 12.æ•°ç»„è¿‡æ»¤ï¼ˆfilterï¼‰

```javascript

// filter() 
// 1.æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯é€šè¿‡æ£€æŸ¥æŒ‡å®šæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´  
// 2.ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„

let arr = [
  { id: 1, text: 'aa', done: true },
  { id: 2, text: 'bb', done: false }
]

// å¦‚æœè¿”å›çš„ç»“æœæ˜¯ trueï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹å°±ç¬¦åˆï¼Œå°±ä¼šä¿å­˜ä¸‹æ¥
arr.filter(item => item.done) // [{ id: 1, text: 'aa', done: true }]
arr.filter(item => item.text === 'bb') // [{ id: 2, text: 'bb', done: false }]

```

---

### 13.åˆ¤æ–­æ•°ç»„ä¸­çš„é¡¹æ˜¯å¦æ»¡è¶³äºæŸä¸ªæ¡ä»¶

```javascript
let arr = [4, 2, 3]

// ES6 someæ–¹æ³•ï¼ˆæœ‰ç¬¦åˆï¼‰
arr.some( item => item > 1) // true
arr.some( item => item > 3) // true

// ES5 everyï¼ˆå…¨ç¬¦åˆï¼‰

arr.every(item => item > 1) // true
arr.every(item => item > 3) // false

// æ³¨æ„ï¼šä¸Šé¢ä¸¤ä¸ªæœ‰ä¸åŒå“¦ï¼Œä¸€ä¸ªæ˜¯æœ‰ç¬¦åˆçš„åˆ¤å®šï¼Œä¸€ä¸ªæ˜¯å…¨ç¬¦åˆçš„åˆ¤å®š
```

---

### 14.æ£€æŸ¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦ç›¸ç­‰
    
```javascript
const allEqual = arr => arr.every(val => val === arr[0]);

// ç¤ºä¾‹
allEqual([1, 2, 3, 4, 5, 6]); // false
allEqual([1, 1, 1, 1]); // true
```

---

### 15.è·å–æ•°ç»„å¯¹è±¡ä¸­ï¼ŒæŸä¸€åˆ—çš„å€¼ï¼Œæ‹¼æˆä¸€ä¸ªæ•°ç»„

```js
var potatos = [
  { id: '1001', weight: 50 },
  { id: '1002', weight: 80 },
  { id: '1003', weight: 120 },
  { id: '1004', weight: 40 }
]

// ES6å†™æ³•
const fn = (arr, key) => arr.map(arr =>  arr[key])

fn(potatos, 'id') // ["1001", "1002", "1003", "1004"]
fn(potatos, 'weight') // [50, 80, 120, 40]
```

---

### 16.æ•°ç»„å¯¹è±¡ï¼Œæ±‚æŸä¸€åˆ—å±æ€§çš„æ€»å’Œ

```js
var potatos = [
  { id: '1001', weight: 50 },
  { id: '1002', weight: 80 },
  { id: '1003', weight: 120 },
  { id: '1004', weight: 40 }
]

// ES6å†™æ³•
const fn = (arr, key) => arr.reduce((sum, p) => { return p[key] + sum },0)

fn(potatos, 'weight') // 290
fn(potatos, 'id') // "10041003100210010" å­—ç¬¦ä¸²ç›¸åŠ å°±æ˜¯è¿™ä¸ªç»“æœï¼Œå¦‚æœæœ‰å„è‡ªçš„éœ€æ±‚ï¼Œå¯ä»¥è‡ªå·±åŠ ä¸Š
```

---

## ğŸ•°æ—¶é—´


### 1.ä¸€ä¸ªæ—¶é—´æˆ³æ ¼å¼çš„æ•°å­—ï¼Œæ˜¯å¤šå°‘ å¤©å°æ—¶åˆ†é’Ÿç§’æ¯«ç§’

```javascript
const formatDuration = ms => {
  if (ms < 0) ms = -ms;
  const time = {
    day: Math.floor(ms / 86400000),
    hour: Math.floor(ms / 3600000) % 24,
    minute: Math.floor(ms / 60000) % 60,
    second: Math.floor(ms / 1000) % 60,
    millisecond: Math.floor(ms) % 1000
  };
  return Object.entries(time)
    .filter(val => val[1] !== 0)
    .map(([key, val]) => `${val} ${key}${val !== 1 ? 's' : ''}`)
    .join(', ');
};

formatDuration(3161012); // 52 minutes, 41 seconds, 12 milliseconds
```

---

### 2.ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæœ‰æ—¶é—´ï¼Œéœ€è¦å°†è¿™ä¸ªæ•°ç»„æŒ‰ç…§æ—¶é—´è¿›è¡Œæ’åº


```javascript
let data = [
{
  id: 1,
  publishTime: "2019-05-14 18:10:29"
},
{
  id: 2,
  publishTime: "2019-05-14 18:17:29"
},
{
  id: 3,
  publishTime: "2019-05-14 15:09:25"
}]

data.sort((a, b) => b.publishTime> a.publishTime ? 1 : -1);

// 0: {id: 2, publishTime: "2019-05-14 18:17:29"}
// 1: {id: 1, publishTime: "2019-05-14 18:10:29"}
// 2: {id: 3, publishTime: "2019-05-14 15:09:25"}

```

---

### 3.æ ¼æ—å°¼æ²»æ—¶é—´ è½¬ åŒ—äº¬æ—¶é—´ï¼ˆå¯ä¼ æ ¼æ—å°¼æ²»æ—¶é—´ æˆ–è€… æ—¶é—´æˆ³ï¼‰

```javascript
function myTimeToLocal(inputTime){
	if(!inputTime && typeof inputTime !== 'number'){
		return '';
	}
	let localTime = '';
	inputTime = new Date(inputTime).getTime();
	const offset = (new Date()).getTimezoneOffset();
	localTime = (new Date(inputTime - offset * 60000)).toISOString();
	localTime = localTime.substr(0, localTime.lastIndexOf('.'));
	localTime = localTime.replace('T', ' ');
	return localTime;
}

console.log(myTimeToLocal(1530540726443)); // 2018-07-02 22:12:06
console.log(myTimeToLocal('2017-11-16T05:23:20.000Z')); // 2017-11-16 13:23:20
```

---

### 4.è·å–ä¸¤ä¸ªæ—¥æœŸç›¸å·®å¤©æ•°

```js
const getDaysDiffBetweenDates = (dateInitial, dateFinal) => (dateFinal - dateInitial) / (1000 * 3600 * 24);
getDaysDiffBetweenDates(new Date('2017-12-13'), new Date('2017-12-22')); // 9
```

---

## ğŸ‘«å¯¹è±¡

### 1.å¯¹è±¡åˆå¹¶

##### ES6æ–¹æ³•

```js

let obj1 = {
    a:1,
    b:{
        b1:2
    }
}

let obj2 = {
    c:3,
    d:4
}
console.log({...obj1, ...obj2}) // {a: 1, b: {â€¦}, c: 3, d: 4}

// æ”¯æŒæ— é™åˆ¶åˆå¹¶ï¼Œä½†å¦‚æœå¯¹è±¡ä¹‹é—´å­˜åœ¨ç›¸åŒå±æ€§ï¼Œåˆ™åé¢å±æ€§ä¼šè¦†ç›–å‰é¢å±æ€§ã€‚*è¯·æ³¨æ„ï¼Œè¿™ä»…é€‚ç”¨äºæµ…å±‚åˆå¹¶ã€‚
```



##### æ–¹æ³•ä¸€ï¼šObj.assign()ï¼šå¯ä»¥æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡

```javascript

let o1 = { a: 1 };
let o2 = { b: 2 };

let obj = Object.assign(o1, o2);
console.log(obj); // { a: 1, b: 2 }
console.log(o1);  // { a: 1, b: 2 }, ä¸” **ç›®æ ‡å¯¹è±¡** è‡ªèº«ä¹Ÿä¼šæ”¹å˜ï¼ˆä¹Ÿå°±æ˜¯assignç¬¬ä¸€ä¸ªå¯¹è±¡ï¼‰
console.log(o2); // { b: 2 } ä¸æ”¹å˜

// å¤‡æ³¨ï¼šObject.assign() æ‹·è´çš„æ˜¯å±æ€§å€¼ã€‚å‡å¦‚æºå¯¹è±¡çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä¹Ÿåªæ‹·è´é‚£ä¸ªå¼•ç”¨å€¼
// å¤‡æ³¨ï¼šæ•°ç»„åˆå¹¶ç”¨ concat() æ–¹æ³•
```

##### æ–¹æ³•äºŒï¼š$.extend()ï¼ˆæŠ½æ—¶é—´çœ‹ä¸€ä¸‹å®ç°åŸç†ï¼‰

---

### 2.æµ…æ‹·è´ï¼Œæ·±æ‹·è´

##### æ–¹æ³•ä¸€ï¼šæµ…æ‹·è´ï¼šæ„æ€å°±æ˜¯åªå¤åˆ¶å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ï¼Œè€Œæœªå¤åˆ¶çœŸæ­£çš„å€¼

https://www.cnblogs.com/dabingqi/p/8502932.html

```javascript

// æœ€ç®€å•çš„åˆ©ç”¨ = èµ‹å€¼æ“ä½œç¬¦å®ç°äº†ä¸€ä¸ªæµ…æ‹·è´
let obj1 = {
  name: 'æœ±æ˜†é¹'
}

let obj2 = obj1; // å®Œæˆäº†æµ…æ‹·è´

```

##### æ–¹æ³•äºŒï¼šæ·±æ‹·è´ï¼šç›®æ ‡çš„å®Œå…¨æ‹·è´ï¼ˆåªè¦è¿›è¡Œäº†æ·±æ‹·è´ï¼Œå®ƒä»¬è€æ­»ä¸ç›¸å¾€æ¥ï¼Œè°ä¹Ÿä¸ä¼šå½±å“è°ï¼‰

```javascript
// ç›®å‰å®ç°æ·±æ‹·è´çš„æ–¹æ³•ä¸å¤šï¼Œä¸»è¦æ˜¯ä¸¤ç§ï¼š
// 01ï¼šåˆ©ç”¨é€’å½’æ¥å®ç°æ¯ä¸€å±‚éƒ½é‡æ–°åˆ›å»ºå¯¹è±¡å¹¶èµ‹å€¼ï¼ˆæ¨èä½¿ç”¨ï¼‰
// 02ï¼šåˆ©ç”¨ JSON å¯¹è±¡ä¸­çš„ parse å’Œ stringifyï¼ˆæœ‰äº›å±æ€§ä¼šè¢«å¿½ç•¥ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ï¼‰


// 01é€’å½’æ–¹æ³•æ¡ˆä¾‹ï¼šå¯¹æ¯ä¸€å±‚çš„æ•°æ®éƒ½å®ç°ä¸€æ¬¡ åˆ›å»ºå¯¹è±¡->å¯¹è±¡èµ‹å€¼ çš„æ“ä½œ
function deepClone(source){
  const targetObj = source.constructor === Array ? [] : {}; // åˆ¤æ–­å¤åˆ¶çš„ç›®æ ‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡
  for(let keys in source){ // éå†ç›®æ ‡
    if(source.hasOwnProperty(keys)){
      if(source[keys] && typeof source[keys] === 'object'){ // å¦‚æœå€¼æ˜¯å¯¹è±¡ï¼Œå°±é€’å½’ä¸€ä¸‹
        targetObj[keys] = source[keys].constructor === Array ? [] : {};
        targetObj[keys] = deepClone(source[keys]);
      }else{ // å¦‚æœä¸æ˜¯ï¼Œå°±ç›´æ¥èµ‹å€¼
        targetObj[keys] = source[keys];
      }
    }
  }
  return targetObj;
}

const obj1 = {
  name:'axuebin',
  sayHello:function(){
    console.log('Hello World');
  }
}
const obj2 = deepClone(obj1);
console.log(obj2); // {name: "axuebin", sayHello: Æ’}
console.log(obj1 === obj2); // false


// 02æ–¹æ³•ç¤ºä¾‹
const obj3 = {
  name:'axuebin',
  sayHello:function(){
    console.log('Hello World');
  }
}
console.log(JSON.parse(JSON.stringify(obj3)); // {name: "axuebin"} ???
// undefinedã€functionã€symbol ä¼šåœ¨è½¬æ¢è¿‡ç¨‹ä¸­è¢«å¿½ç•¥ï¼Œæ‰€ä»¥å°±ä¸èƒ½ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ·±æ‹·è´

```

### 3.æ‹“å±•ï¼šé¦–å±‚æµ…æ‹·è´

```javascript

function shallowClone(source) {
  const targetObj = source.constructor === Array ? [] : {}; // åˆ¤æ–­å¤åˆ¶çš„ç›®æ ‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡
  for (let keys in source) { // éå†ç›®æ ‡
    if (source.hasOwnProperty(keys)) {
      targetObj[keys] = source[keys];
    }
  }
  return targetObj;
}

const originObj = {
  a:'a',
  b:'b',
  c:[1, 2, 3],
  d:{ dd: 'dd' }
};

const cloneObj = shallowClone(originObj);
console.log(cloneObj === originObj); // false
cloneObj.a = 'aa';
cloneObj.c = [1, 1, 1];
cloneObj.d.dd = 'surprise';

console.log(cloneObj); // {a:'aa',b:'b',c:[1,1,1],d:{dd:'surprise'}}
console.log(originObj); // {a:'a',b:'b',c:[1,2,3],d:{dd:'surprise'}}

```

---

### 4.åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºå¯¹è±¡

```javascript

// å‚è€ƒï¼šhttps://www.cnblogs.com/HKCC/p/6083575.html

if (JSON.stringify(å¯¹è±¡) === '{}') {
  console.log('ç©º');
}

```

---

### 5.åˆ¤æ–­å¯¹è±¡ä¸­å±æ€§çš„ä¸ªæ•°

```js
let obj = {name: 'æœ±æ˜†é¹', age: 21}

// ES6
Object.keys(obj).length // 2

// ES5
let attributeCount = obj => {
    let count = 0;
    for(let i in obj) {
        if(obj.hasOwnProperty(i)) {  // å»ºè®®åŠ ä¸Šåˆ¤æ–­,å¦‚æœæ²¡æœ‰æ‰©å±•å¯¹è±¡å±æ€§å¯ä»¥ä¸åŠ 
            count++;
        }
    }
    return count;
}

attributeCount(obj) // 2
```

---

### 6.JS å¯¹è±¡è½¬ url æŸ¥è¯¢å­—ç¬¦ä¸²

```js
const objectToQueryString = (obj) => Object.keys(obj).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`).join('&');
objectToQueryString({name: 'Jhon', age: 18, address: 'beijing'})
// name=Jhon&age=18&address=beijing
```

---

### 7.å¯¹è±¡éå†

```js
let objs = {
    1: {
        name: 'æœ±æ˜†é¹'
    },
    2: {
        name: 'æ—é›¨æ¡'
    }
}

Object.keys(objs).forEach( ket => {
  console.log(key,objs[key])
})

// 1 {name: 'æœ±æ˜†é¹'} 2 {nama:'æ—é›¨æ¡'}

```

---

## ğŸŒ´DOM

### 1.åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦ä¸ºé¡µé¢åº•éƒ¨

```js
function bottomVisible() {
  return document.documentElement.clientHeight + window.scrollY >= (document.documentElement.scrollHeight || document.documentElement.clientHeight)
}

bottomVisible() // è¿”å›å€¼ä¸ºtrue/false
```

---

### 2.å…¨å±

##### 1.è¿›å…¥å…¨å±

```js
function launchFullscreen(element) {
  if (element.requestFullscreen) {
    element.requestFullscreen()
  } else if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen()
  } else if (element.msRequestFullscreen) {
    element.msRequestFullscreen()
  } else if (element.webkitRequestFullscreen) {
    element.webkitRequestFullScreen()
  }
}

launchFullscreen(document.documentElement) // æ•´ä¸ªé¡µé¢è¿›å…¥å…¨å±
launchFullscreen(document.getElementById("id")) //æŸä¸ªå…ƒç´ è¿›å…¥å…¨å±
```

##### é€€å‡ºå…¨å±

```js
function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen()
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen()
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen()
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen()
  }
}

exitFullscreen()
```

##### å…¨å±äº‹ä»¶

```js
document.addEventListener("fullscreenchange", function (e) {
  if (document.fullscreenElement) {
    console.log('è¿›å…¥å…¨å±')
  } else {
    console.log('é€€å‡ºå…¨å±')
  }
})
```

---

### 3.åˆ¤æ–­domå…ƒç´ æ˜¯å¦å…·æœ‰æŸä¸ªclassName

æ–¹æ³•ä¸€ï¼šä½¿ç”¨HTML5æ–°å¢classList æ¥æ“ä½œç±»å

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <div id="test" class="te"></div>

  <script>
    
    let div = document.getElementById('test')
    console.log(div.classList.contains("te")) // true

  </script>
</body>
</html>
```
æ‹“å±•ï¼š
- classList.add(newClassName)ï¼›æ·»åŠ æ–°çš„ç±»åï¼Œå¦‚å·²ç»å­˜åœ¨ï¼Œå–æ¶ˆæ·»åŠ 
- classList.contains(oldClassName)ï¼šç¡®å®šå…ƒç´ ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„ç±»åï¼Œè¿”å›å€¼ä¸ºtrueï¼Œfalse
- classList.remove(oldClassName)ï¼šç§»é™¤å·²ç»å­˜åœ¨çš„ç±»å;
- classList.toggle(className)ï¼šå¦‚æœclassListä¸­å­˜åœ¨ç»™å®šçš„å€¼ï¼Œåˆ é™¤å®ƒï¼Œå¦åˆ™ï¼Œæ·»åŠ å®ƒï¼›

ğŸ¦€**æ„Ÿè°¢æ˜é‡‘ç”¨æˆ·tjNaneåˆ†äº«æ­¤æ–¹æ³•**

---

æ–¹æ³•äºŒï¼š

```js
const  hasClass = (el, className) => new RegExp(`(^|\\s)${className}(\\s|$)`).test(el.className);
```

---

## ğŸŒ±BOM

### 1.è¿”å›å½“å‰ç½‘é¡µåœ°å€

```js
function currentURL() {
  return window.location.href
}

currentURL() // "https://juejin.im/timeline"
```

---

### 2.è·å–æ»šåŠ¨æ¡ä½ç½®

```js
function getScrollPosition(el = window) {
  return {
    x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,
    y: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop
  }
}

getScrollPosition() // {x: 0, y: 692}
```

---

### 3.è·å–urlä¸­çš„å‚æ•°

```js
function getURLParameters(url) {
  const params = url.match(/([^?=&]+)(=([^&]*))/g)
  return params?params.reduce(
    (a, v) => (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a), {}
  ):[]
}

getURLParameters('http://www.baidu.com/index?name=tyler') // {name: "tyler"}
```

---

### 4.æ£€æµ‹è®¾å¤‡ç±»å‹

```js
const detectDeviceType = () =>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop';

detectDeviceType() // "Desktop"
```

---

## ğŸ’å¤„ç†JSåŸç”Ÿå…·æœ‰çš„ä¸€äº›é—®é¢˜

### 1.åŠ å‡æ³•ç²¾åº¦ç¼ºå¤±é—®é¢˜

```javascript
// åŠ æ³•å‡½æ•°ï¼ˆå› ä¸ºJSå°æ•°è®¡ç®— ä¸¢å¤±ç²¾åº¦ï¼‰
function add(arg1, arg2) { 
    let r1, r2, m; 
    try { r1 = arg1.toString().split(".")[1].length } catch (e) { r1 = 0 } 
    try { r2 = arg2.toString().split(".")[1].length } catch (e) { r2 = 0 } 
    m = Math.pow(10, Math.max(r1, r2)) 
    return (arg1 * m + arg2 * m) / m 
}
```

```javascript
// å‡æ³•å‡½æ•°ï¼ˆå› ä¸ºJSå°æ•°è®¡ç®— ä¸¢å¤±ç²¾åº¦ï¼‰
function sub(arg1, arg2) { 
    let r1, r2, m, n; 
    try { r1 = arg1.toString().split(".")[1].length } catch (e) { r1 = 0 } 
    try { r2 = arg2.toString().split(".")[1].length } catch (e) { r2 = 0 } 
    m = Math.pow(10, Math.max(r1, r2)); 
    n = (r1 >= r2) ? r1 : r2; 
    return Number(((arg1 * m - arg2 * m) / m).toFixed(n)); 
}
```

---

### 2.é€’å½’ä¼˜åŒ–ï¼ˆå°¾é€’å½’ï¼‰

```javascript
// å°¾é€’å½’å‡½æ•° æ‘˜è‡ªé˜®ä¸€å³°ES6 | è‡ªå·±æ‡’å¾—å†™äº†
function tco(f) {
  let value;
  let active = false;
  let accumulated = [];

  return function accumulator() {
    accumulated.push(arguments);
    if (!active) {
      active = true;
      while (accumulated.length) {
        value = f.apply(this, accumulated.shift());
      }
      active = false;
      return value;
    }
  };
}

// ä½¿ç”¨
æ–°çš„å‡½æ•° = tco(é€’å½’å‡½æ•°)

```

---

## ğŸ™å…¶ä»–

### 1.å˜æ¢å˜é‡

```js

// [letAï¼ŒletB] = [letBï¼ŒletA];

let a = 1;
let b = 2;
[a, b] = [b, a] // a = 2 b = 1

```

---

### 2.æ ¼å¼åŒ–å¯¹è±¡ä¸ºJSONä»£ç 

```js
const formatted = JSON.stringify({name: 'Jhon', age: 18, address: 'sz'}, null, 4);
/*
{
    "name": "Jhon",
    "age": 18,
    "address": "sz"
}
*/

// è¯¥å­—ç¬¦ä¸²åŒ–å‘½ä»¤æœ‰ä¸‰ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯Javascriptå¯¹è±¡ã€‚ç¬¬äºŒä¸ªæ˜¯å¯é€‰å‡½æ•°ï¼Œå¯ç”¨äºåœ¨JSONè¿›è¡Œå­—ç¬¦ä¸²åŒ–æ—¶å¯¹å…¶æ‰§è¡Œæ“ä½œã€‚æœ€åä¸€ä¸ªå‚æ•°æŒ‡ç¤ºè¦æ·»åŠ å¤šå°‘ç©ºæ ¼ä½œä¸ºç¼©è¿›ä»¥æ ¼å¼åŒ–JSONã€‚çœç•¥æœ€åä¸€ä¸ªå‚æ•°ï¼ŒJSONå°†è¿”å›ä¸€ä¸ªé•¿è¡Œã€‚å¦‚æœmyObjä¸­å­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œåˆ™ä¼šæ ¼å¼å¤±è´¥ã€‚
```
---

### 3.éšæœºç”Ÿæˆå…­ä½æ•°å­—éªŒè¯ç 

```js
const code = Math.floor(Math.random() * 1000000).toString().padStart(6, "0") // 942377
```

---

### 4.èº«ä»½è¯æ­£åˆ™

```js
const IDReg= /(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$)/;
```

---

### 5.å°†æ•°å­—è½¬åŒ–ä¸ºåƒåˆ†ä½æ ¼å¼

```js
const toDecimalMark = num => num.toLocaleString('en-US');
toDecimalMark(12305030388.9087); // "12,305,030,388.909"
```

---

### 6.RGB é¢œè‰²è½¬ 16è¿›åˆ¶é¢œè‰²

```js
const RGBToHex = (r, g, b) => ((r << 16) + (g << 8) + b).toString(16).padStart(6, '0');
RGBToHex(255, 165, 1); // 'ffa501'
```

---

### 7.ç”Ÿæˆéšæœºæ•´æ•°

```js
function randomNum(min, max) {
  switch (arguments.length) {
    case 1:
      return parseInt(Math.random() * min + 1, 10)
    case 2:
      return parseInt(Math.random() * (max - min + 1) + min, 10)
    default:
      return 0
  }
}

randomNum(1,10) // éšæœº [1,10]çš„æ•´æ•°
```

---

### 8.Mathå‡½æ•°çš„ä¸€äº›åº”ç”¨

```js
parseInt(5.12) // 5 | åªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼ˆä¸¢å¼ƒå°æ•°éƒ¨åˆ†ï¼‰
Math.floor(5.12) // 5 | å‘ä¸‹å–æ•´ï¼ˆæ•ˆæœå’ŒparseIntä¸€æ ·ï¼‰
Math.ceil(5.12) // 6 | å‘ä¸Šå–æ•´ï¼ˆæœ‰å°æ•°ï¼Œæ•´æ•°å°±+1ï¼‰

Math.round(5.499) // 5 | å››èˆäº”å…¥
Math.round(5.501) // 6 | å››èˆäº”å…¥

Math.abs(-5) // 5 | ç»å¯¹å€¼

Math.max(5, 6) // 6 | è¿”å›ä¸¤è€…ä¸­è¾ƒå¤§çš„æ•°
Math.min(5, 6) // 5 | è¿”å›ä¸¤è€…ä¸­è¾ƒå°çš„æ•°

Math.random() // éšæœºæ•° (0-1)
```

---

## ğŸ“šå‚è€ƒåˆ—è¡¨

- [30s-code](https://30secondsofcode.org/)
- [æ˜é‡‘æ–‡ç« -2019.6.17æ—¥æ•´ç†](https://juejin.im/post/5d01bd04f265da1b7a4b6e03#heading-2)
- [js tricks](https://qishaoxuan.github.io/js_tricks/)
- æ—¥å¸¸å·¥ä½œæ€»ç»“
