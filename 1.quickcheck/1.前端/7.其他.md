# 7.å…¶ä»–

::: tip
å¤‡æ³¨ï¼šè¿™ä¸ªæ ç›®ï¼Œå­˜æ”¾ä¸€äº›è¿‡å°çš„é—®é¢˜ï¼ˆä¸é€‚åˆå•ç‹¬æˆä¸€ç« çš„ï¼‰ï¼Œå¦‚æœåæœŸæ‹“å±•çš„å¾ˆå¤šï¼Œå°±å¯ä»¥è€ƒè™‘å•ç‹¬æŠ½ç¦»å‡ºå»ä¸€éƒ¨åˆ†çŸ¥è¯†
:::

---

## ğŸŒŸç¬¬ä¸€éƒ¨åˆ†ï¼šGit && GitHub

### 1.Gitå¸¸ç”¨å‘½ä»¤

```sh
# åˆ›å»ºæ–°ä»“åº“
git init

# æ£€å‡ºä»“åº“
git clone username@host:/path/to/repository

# æ¥ä¸€æ¬¡æ·»åŠ æ‰€æœ‰æ”¹å˜çš„æ–‡ä»¶
git add -A . 

# è¡¨ç¤ºæ·»åŠ æ‰€æœ‰å†…å®¹
git add -A 

# è¡¨ç¤ºæ·»åŠ æ–°æ–‡ä»¶å’Œç¼–è¾‘è¿‡çš„æ–‡ä»¶ä¸åŒ…æ‹¬åˆ é™¤çš„æ–‡ä»¶
git add . 

# è¡¨ç¤ºæ·»åŠ ç¼–è¾‘æˆ–è€…åˆ é™¤çš„æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬æ–°æ·»åŠ çš„æ–‡ä»¶
git add -u

# ä½ çš„æ”¹åŠ¨å·²ç»æäº¤åˆ°äº† HEADï¼Œä½†æ˜¯è¿˜æ²¡åˆ°ä½ çš„è¿œç«¯ä»“åº“
git commit -m 'ä»£ç æäº¤ä¿¡æ¯'

# æ¨é€æ”¹åŠ¨
git push origin master



# æŸ¥çœ‹çŠ¶æ€
git status 


# æŸ¥çœ‹æ¯ä¸ªåˆ†æ”¯çš„æœ€æ–°æäº¤è®°å½•
git branch -av

# æŸ¥çœ‹æ¯ä¸ªåˆ†æ”¯å±äºå“ªä¸ªè¿œç¨‹ä»“åº“
git branch -vv

# ä¸‹è½½Gité¡¹ç›®
git clone åœ°å€


# æŸ¥çœ‹ç”¨æˆ·å
git config user.name

# æŸ¥çœ‹ç”¨æˆ·é‚®ç®±
git config user.email

# ä¿®æ”¹ç”¨æˆ·å
git config --global user.name "Your_username"

# ä¿®æ”¹ç”¨æˆ·é‚®ç®±
git config --global user.email "Your_email"
```

- [æ›´å¤š](https://www.bootcss.com/p/git-guide/)

---

### 2.shields.ioä½¿ç”¨ï¼ˆç»™é¡¹ç›®æ·»åŠ å¾½ç« ï¼‰

- MITä½¿ç”¨ä¸¾ä¾‹ï¼šhttps://shields.io/category/license/  ï¼ˆè¦é€‰GitHubå“¦ï¼‰
- ä½¿ç”¨è¯´æ˜ï¼šhttps://www.sohu.com/a/134390224_655394


---

## ğŸ’«ç¬¬äºŒéƒ¨åˆ†ï¼šåŒ…ç®¡ç†å·¥å…·ï¼ˆnpmï¼‰

### 1.npmåŸºæœ¬ä½¿ç”¨

```sh
# åˆå§‹åŒ–é¡¹ç›®ï¼ˆä¹Ÿå¯ä»¥å†™ npm init -yï¼‰
npm init

# å®‰è£…ï¼ˆç®€å†™ npm iï¼‰
npm install

# å¸®åŠ©ï¼ˆç®€å†™ npm -hï¼‰
npm --help

# å…¨å±€æ ‡å¿—ï¼ˆç®€å†™ -gï¼‰
--global

# ä¿å­˜ä¸ºå¼€å‘ä¾èµ–ï¼ˆç®€å†™ -Dï¼‰
--save-dev

# ä¿å­˜ä¸ºç”Ÿäº§ä¾èµ–ï¼ˆç®€å†™ -dï¼‰
--save

# å¸è½½npmå®‰è£…çš„åŒ…
npm uninstall åŒ…çš„åç§° -g
```



**è®¾ç½® npm initå±æ€§ï¼Œè¿™æ ·åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°±ä¸ç”¨æ¯æ¬¡éƒ½å†™äº†**

npm config set init.author.name "Zhu Kunpeng"
npm config set init.author.email "270750933@qq.com"
npm config set init.author.url "itzkp.com"
npm config set init.license "MIT"

**è®©è„šæœ¬è·¨å¹³å°å…¼å®¹ï¼šcross-env**

- å®‰è£…ï¼šnpm i -D cross-env

```js
// ç„¶ååœ¨ä»»ä½•ç¯å¢ƒå˜é‡ä¹‹å‰åŒ…æ‹¬å…³é”®å­—cross-envï¼Œå¦‚ä¸‹
{
  "scripts": {
    "dev": "cross-env node app.js"
  }
}
```

**[å‚è€ƒæ˜é‡‘æ–‡ç« ï¼Œä½œè€…å°æ™ºï¼Œæ„Ÿè°¢](https://juejin.im/post/5d1d40ea6fb9a07eb94fa7df#comment)**

---

### 2.å‘å¸ƒåŒ…åˆ°NPMä¸Š

```sh

# ç™»å½•ï¼ˆä¼šè®©ä½ è¾“å…¥è´¦å·å¯†ç ï¼Œé‚®ç®±ï¼‰
npm adduser

# ä¸Šä¼ ï¼ˆæ³¨æ„package.jsoné‡Œé¢çš„nameä¸è¦å’Œnpmä»“åº“é‡å¤ï¼‰
npm publish
```


---

## âœ¨ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‰ç«¯å·¥ç¨‹åŒ–å·¥å…·ï¼ˆWebpackï¼‰

- é¦–å…ˆè‚¯å®šè¦ npm init
- å®‰è£…webpackï¼šnpm i webpack webpack-cli -D
- æ–°å»º webpack.config.js æ–‡ä»¶
- å¸¸ç”¨loader
  - npm i file-loader -D ï¼ˆç”¨äºç§»åŠ¨å­—ä½“æ–‡ä»¶ç­‰ï¼‰
  - npm i url-loader -Dï¼ˆç”¨äºæ‰“åŒ…å›¾ç‰‡ç­‰ï¼‰
  - npm i css-loader style-loader -Dï¼ˆæ‰“åŒ…åŸºç¡€CSSæ ·å¼æ–‡ä»¶ï¼‰
  - npm i node-sass sass-loader -Dï¼ˆæ‰“åŒ…scssæ ·å¼æ–‡ä»¶ï¼‰
  - npm i postcss-loader autoprefixer -Dï¼ˆè‡ªåŠ¨æ·»åŠ å‚å•†å‰ç¼€ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ postcss.config.js ï¼‰
- å¸¸ç”¨plugin
  - npm i html-webpack-plugin -D ï¼ˆä¼šåœ¨æ‰“åŒ…å®Œæˆä¹‹åï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ä¹‹åçš„JSè‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ªHTMLæ–‡ä»¶ä¸­ï¼‰
- å…¶ä»–
  - SourceMap
  - WebpackDevServer
  - Hot Module Replacement

```js
// webpack.config.js é…ç½®ç¤ºä¾‹

const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin');

export default {
      
    // ç¯å¢ƒï¼ˆé»˜è®¤æ˜¯productionï¼Œå¼€å¯å‹ç¼©ç­‰é»˜è®¤é…ç½® || developmentæ˜¯å¼€å‘ç¯å¢ƒï¼Œä¸å‹ç¼©...ï¼‰
    mode: 'production',
    
    // æœ‰äº†è¿™ä¸ªåœ¨å°±èƒ½åœ¨å‡ºé”™çš„æ—¶å€™ï¼Œå‡†ç¡®å®šä½åˆ°æ˜¯å“ªé‡Œçš„é—®é¢˜ï¼Œè¿™ä¸ªdevtool è¿˜æœ‰å¾ˆå¤šé…ç½®ï¼Œå…·ä½“æŸ¥é˜…æ–‡æ¡£
    devtool: 'cheap-module-eval-source-map',

    // å¯åŠ¨ä¸€ä¸ªserveï¼šnpx webpack-dev-server
    devServer: {
      contentBase: './dist', // å¯åŠ¨çš„ç›®å½•
      open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
      hot: true, // å¯åŠ¨çƒ­æ›´æ–°
      hotOnly: true // ä¸åˆ·æ–°é¡µé¢
    }, 

    // å…¥å£ï¼šç®€å†™ entry: 'å…¥å£æ–‡ä»¶åœ°å€'
    entry: {
        main: 'å…¥å£æ–‡ä»¶åœ°å€',
        // main2: 'å…¥å£æ–‡ä»¶2åœ°å€' å¤šæ–‡ä»¶å…¥å£
    },

    // æ¨¡å—è§„åˆ™
    module: {
      rules: [
        
        // file-loader
        {
          test: /\.(å­—ä½“æ–‡ä»¶åç¼€)$/,
          use: {
            loader: 'file-loader',
            options: {
              name: '[name].[ext]', // 
              outputPath: 'font/' // æ‰“åŒ…è¾“å‡ºæ–‡ä»¶å¤¹
            }
          }
        },

        // url-loader
        {
          test: /\.(jpg|png|gif)$/,
          use: {
            loader: 'url-loader',
            options: {
              name: '[name].[ext]', // 
              outputPath: 'images/', // æ‰“åŒ…è¾“å‡ºæ–‡ä»¶å¤¹
              limit: 2048 // å¦‚æœå°äº 2kbï¼Œå°±ä¼šæ‰“åŒ…è¿›JSï¼Œå¦‚æœå¤§äºå°±æ‰“åŒ…åˆ°æ–‡ä»¶å¤¹ä¸­
            }
          }
        },

        // æ‰“åŒ…é™æ€æ ·å¼
        {
          test: '/\.css$/',
          use: ['style-loader', 'css-loader', 'sass-loader', 'postcss-loader']
        }
      ]
    }

    // æ’ä»¶
    plugins: [
      new HtmlWebpackPlugin({
        // é…ç½®ï¼Œindex.html æ¨¡æ¿ï¼Œä»¥æ­¤ä¸ºæ¨¡æ¿è¿›è¡Œæ³¨å…¥
        template: './test/index.html'
      })
    ]

    // è¾“å…¥
    output: {
        filename: 'è¾“å…¥æ–‡ä»¶å', // è¾“å‡ºæ–‡ä»¶å¤¹åç§°, å¯ä»¥ä½¿ç”¨å ä½ç¬¦, ä¾‹å¦‚'[name]_[hash].[ext]'
        publicPath: 'https://cdn.com.cn', // é…ç½®å¼•å…¥å‰ç¼€,å¦‚æœé™æ€èµ„æºåœ¨CDNä¸Šè¿™ä¸ªå¾ˆæœ‰ç”¨
        path: path.resolve(__dirname, 'è¾“å…¥æ–‡ä»¶å¤¹') // è¾“å…¥ç›®å½•
    },

}
```

---

**postcss.config.js é…ç½®ç¤ºä¾‹**

```js
// é»˜è®¤æ˜¯è¿™æ ·å†™çš„
module.exports = {
  parser: 'sugarss',
  plugins: {
    'postcss-import': {},
    'postcss-cssnext': {},
    'cssnano': {}
  }
}

// æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™
// è¿™ä¹ˆå†™çš„ä½œç”¨æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ postcss-loader çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ autoprefixer è¿™ä¸ªæ’ä»¶
module.exports = {
  plugins: [
    require('autoprefixer')
  ]
}
```

---

**.babelrc é…ç½®ç¤ºä¾‹**

```js

```

---

## â˜€ï¸ç¬¬å››éƒ¨åˆ†ï¼šæµ‹è¯•ï¼ˆJestï¼‰

### 1.Jest å¸¸ç”¨åŒ¹é…å™¨é€ŸæŸ¥

```js

// ========== å’ŒçœŸå‡ç›¸å…³çš„åŒ¹é…å™¨ ===========

expect(1).toBe(1) // é€šè¿‡ï¼šæœ‰ç‚¹ç±»ä¼¼äº === 

expect({ name: 'æœ±æ˜†é¹' }).toEqual({ name: 'æœ±æ˜†é¹' }) // é€šè¿‡ï¼šåŒ¹é…å†…å®¹ç›¸ç­‰

expect(null).toBeNull() // é€šè¿‡ï¼šåŒ¹é…æ˜¯å¦æ˜¯ null

expect(undefined).toBeUndefined() // é€šè¿‡ï¼šåŒ¹é…æ˜¯å¦æ˜¯ undefined

expect(true).toBetruthy() // é€šè¿‡ï¼šåŒ¹é… æ˜¯å¦ä¸ºçœŸï¼Œå¡« 1 ä¹Ÿè¡Œ

expect(0).toBeFalsy() // é€šè¿‡ï¼šåŒ¹é…æ˜¯å¦ä¸ºå‡ï¼Œå¡« false ä¹Ÿè¡Œ

expect(0).not.toBeFalsy() // ä¸é€šè¿‡ï¼šå¯ä»¥é€šè¿‡ not è¿›è¡Œå–å

// ...


// ========== å’Œæ•°å­—ç›¸å…³çš„åŒ¹é…å™¨ ===========

expect(10).toBeGreaterThan(9) // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ 10 æ˜¯å¦ æ¯” 9 å¤§

expect(10).toBeLessThan(11) // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ 10 æ˜¯å¦ æ¯” 11 å°

expect(10).toBeGreaterThanOrEqual(10) // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ 10 æ˜¯å¦ å¤§äºç­‰äº 10

expect(11).toBeLessThanOrEqual(11) // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ 11 æ˜¯å¦å°äºç­‰äº 11

expect(0.1 + 0.2).toBeCloseTo(0.3) // é€šè¿‡ï¼Œåˆ¤æ–­å°æ•°æ˜¯å¦ç›¸åŒï¼Œç›´æ¥æ¯”è¾ƒçš„è¯ä¼šæœ‰ç²¾åº¦ç¼ºå¤±çš„é—®é¢˜ï¼Œæ¯”è¾ƒä¸äº†

// ...


// ========= å’Œå­—ç¬¦ä¸²ç›¸å…³çš„åŒ¹é…å™¨ ===========

expect('æœ±æ˜†é¹').toMatch('æ˜†é¹') // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ 'æœ±æ˜†é¹' ä¸­æ˜¯å¦æœ‰ 'æ˜†é¹' å­—ç¬¦ | è¿˜å¯ä»¥å†™æ­£åˆ™è¡¨è¾¾å¼

// ...


// ========= å’Œæ•°ç»„ç›¸å…³çš„åŒ¹é…å™¨ ===========

expect([1,2,3]).toContain(2) // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ æ•°ç»„ä¸­ æ˜¯å¦åŒ…å« 2 è¿™ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­ Set, Map è¿™ç§ç±»å‹çš„

// ...


// ========= å’Œå¼‚å¸¸ç›¸å…³çš„åŒ¹é…å™¨ ===========

expect(throw new Error('å‡ºç°é”™è¯¯')).toThrow() // é€šè¿‡ï¼ŒåŒ¹é…çš„æ˜¯ æ˜¯å¦å‡ºç°å¼‚å¸¸

// ...


```


---

## â„ï¸ç¬¬äº”éƒ¨åˆ†ï¼šCSSé¢„å¤„ç†å™¨

---

## ğŸ’¥ç¬¬å…­éƒ¨åˆ†ï¼šè·¨å¹³å°å¼€å‘ï¼ˆElectronï¼‰


---

## ğŸ”¥ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ—¥å¸¸å¼€å‘ä¸­æ€»ç»“å‡ºæ¥çš„ç»„ä»¶ï¼ˆç§»åŠ¨ç«¯ï¼‰

### 1.å¼¹æ¡†ç»„ä»¶ï¼ˆDialogGray.vueï¼‰

**ä½¿ç”¨æ–¹æ³•**

```html
<dialog-gray v-model="dialogVisible" :opacity="opacity" :is-click="isClick">
    //opacity è’™å±‚é€æ˜åº¦ ä¸ä¼ é»˜è®¤ä¸º.5
    //isClick è’™å±‚æ˜¯å¦å¯ç‚¹å‡» é»˜è®¤å¯ç‚¹å‡»,ä¼ falseå³ä¸å¯ç‚¹å‡»
    //é˜»æ­¢ç‚¹å‡»å†’æ³¡åœ¨è’™å±‚å†…éƒ¨åŠ @click.stop
    //é˜»æ­¢æ»‘åŠ¨å†’æ³¡åœ¨è’™å±‚å†…éƒ¨åŠ @touchmove.stop
    //å¼¹çª—è¿‡å¤§ï¼Œå†…éƒ¨divåŠ class="part-scroll" å»æ‰æ»šåŠ¨æ¡ï¼š.part-scroll::-webkit-scrollbar {display: none;}
</dialog-gray>
```

---

```html
<template>
  <div
    v-if="dialogVisible"
    ref="dialogGray"
    class="dialogSt"
    :style="background"
    @click="closeDia"
    @touchmove.stop.prevent
  >
    <slot />

  </div>
</template>
<script>
export default {
    name: 'DialogGray',
    model: {
        prop: 'dialogVisible',
        event: 'change'
    },
    props: {
        dialogVisible: {
            type: Boolean,
            default: false
        },
        opacity: {
            type: Number,
            default: 0.5
        },
        isClick: {
            type: Boolean,
            default: true
        }
    },
    data() {
        return {
            top: '',
            background: {
                'background': `rgba(0,0,0,${this.opacity})`
            }
        };
    },
    watch: {
        dialogVisible: {
            immediate: true,
            handler(newval) {
                const bodyEl = document.body;
                if (newval) {
                    this.$nextTick(() => {
                        bodyEl.appendChild(this.$refs['dialogGray']);
                    });
                    this.top = window.scrollY;
                    bodyEl.style.position = 'fixed';
                    bodyEl.style.top = -this.top + 'px';
                } else {
                    bodyEl.style.position = '';
                    bodyEl.style.top = '';
                    window.scrollTo(0, this.top); // å›åˆ°åŸå…ˆçš„top
                }
            }
        }
    },
    methods: {
        closeDia() {
            if (!this.isClick) {
                return;
            }
            this.$emit('change', false);
        }
    }
};
</script>
<style scoped>
.dialogSt {
  position: fixed;
  width: 100%;
  height: 100%;
  z-index: 99;
  left: 0;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
</style>
```

---

### 2.å¥–åŠ±è½®æ’­ç»„ä»¶ï¼ˆRewardWheel.vueï¼‰

**ä½¿ç”¨æ–¹æ³•**

```html
<reward-wheel
  :wheel-row-height="23"
  :wheel-rem-size="37.5"
  :wheel-time="4000"
  :wheel-number="playMsg.length - 2">
  <!-- ä¹¦å†™ä¸šåŠ¡ä»£ç åŒºåŸŸ -->
  <div></div>
</reward-wheel>
```

- wheel-row-heightï¼šæ»šåŠ¨çš„è·ç¦»
- wheel-rem-sizeï¼šremç›¸å¯¹å•ä½ï¼ˆé€‚é…ç”¨ï¼‰
- wheel-timeï¼šæ»šåŠ¨ä¸€ä¸ªçš„æ—¶é—´
- wheel-numberï¼šæ»šåŠ¨çš„æ•°é‡

---

```html
<template>
  <div :style="loopStyle">
    <slot />
  </div>
</template>

<script>
export default {
    props: {
        // é»˜è®¤è½®æ’­æ•°é‡
        wheelNumber: {
            type: Number,
            default: 0
        },
        // è½®æ’­ä¸€ä¸ªéœ€è¦çš„æ—¶é—´
        wheelTime: {
            type: Number,
            default: 3000
        },
        // æ¯æ¬¡æ»šåŠ¨çš„è·ç¦»
        wheelRowHeight: {
            type: Number,
            default: 10
        },
        // å½“å‰ç¯å¢ƒremå¯¹pxçš„å€¼
        wheelRemSize: {
            type: Number,
            default: 32
        }
    },
    data() {
        return {
            // ä¸­å¥–ä¿¡æ¯ï¼ˆè½®æ’­ï¼‰
            loopStyle: {
                transform: '',
                transition: 'none'
            },
            activeIndex: 0
        };
    },
    watch: {
        activeIndex(val) {
            const transition = this.activeIndex === 0
                ? 'none'
                : 'all .5s';
            const top = ((-val * this.wheelRowHeight) / this.wheelRemSize) + 'rem';
            this.loopStyle = {
                transform: `translateY(${top})`,
                transition: transition
            };
        }
    },
    mounted() {
        this.loopListTool(); // è‡ªåŠ¨è½®æ’­å‡½æ•°
        this.distanceAdaptationTool(); // è‡ªåŠ¨é€‚é…å„ä¸ªå±å¹•æ»šåŠ¨è·ç¦»
    },
    methods: {
        // è‡ªåŠ¨è½®æ’­å‡½æ•°
        loopListTool() {
            this.$nextTick(() => {
                window.clearInterval(this.interval);
                this.interval = setInterval(() => {
                    if (this.activeIndex < this.wheelNumber - 1) {
                        this.activeIndex += 1;
                    } else {
                        this.activeIndex = 0;
                    }
                }, this.wheelTime);
            });
        },
        // è‡ªåŠ¨é€‚é…å„ä¸ªå±å¹•æ»šåŠ¨è·ç¦»
        distanceAdaptationTool() {
            const rem = this.wheelRowHeight / this.wheelRemSize;
            this.wheelRemSize = document.documentElement.clientWidth / 10;
            this.wheelRowHeight = rem * this.wheelRemSize;
        }
    }
};
</script>
```

- end-time-dataï¼š ç»“æŸæ—¶é—´ | Stringï¼ˆxxxx-xx-xx xx:xx:xxï¼‰æˆ–è€… Numberï¼ˆæ—¶é—´æˆ³ï¼‰
- @time-end: å€’è®¡æ—¶ç»“æŸçš„æ—¶å€™è§¦å‘

---

### 3.å€’è®¡æ—¶ç»„ä»¶ï¼ˆCountDown.vueï¼‰

**ä½¿ç”¨æ–¹æ³•**

```html
<!-- end-time-dataï¼š2020-01-30 00:00:00 -->
<div style="padding: 5px; border: 1px solid red;" >
  <count-down 
    :end-time="1580313600000"
    @time-end="timeEndEvent">
  </count-down>
</div>
```

---

```html
<template>
  <div>
    {{ time }}
  </div>
</template>

<script>
export default {
    props: {
        // ç»“æŸæ—¶é—´
        endTime: {
            type: [Number, String],
            default: null
        }
    },
    data() {
        return {
            time: '', // æ—¶é—´å±•ç¤º
            flag: false // æ˜¯å¦å¯åŠ¨æ—¶é—´
        };
    },
    mounted() {
        this.visibilitychangeEvent();
        this.init();
    },
    methods: {
        init() {
            if (this.endTime === null) return;
            const time = setInterval(() => {
                if (this.flag == true) {
                    clearInterval(time);
                    return;
                }
                this.timeDown();
            }, 500);
        },
        // å€’è®¡æ—¶ç»„ä»¶ æ ¸å¿ƒé€»è¾‘
        timeDown() {
            // ç»“æŸæ—¶é—´
            let endTimeData = null;
            typeof this.endTime === 'number'
                ? endTimeData = new Date(this.endTime)
                : endTimeData = this.timeStrToCorrectTool(this.endTime);

            // å½“å‰æ—¶é—´ï¼ˆé»˜è®¤æ˜¯ç³»ç»Ÿå½“å‰æ—¶é—´ï¼‰
            const nowTime = new Date();

            // ç›¸å·®æ—¶é—´
            const leftTime = parseInt((endTimeData.getTime() - nowTime.getTime()) / 1000);

            if (leftTime <= 0) {
                this.time = `0å°æ—¶ 0åˆ† 0ç§’`;
                this.flag = true;
                this.$nextTick(() => {
                    this.$emit('time-end');
                });
                return;
            }

            const d = parseInt(leftTime / (24 * 60 * 60));
            const h = this.formateTool(parseInt(leftTime / (60 * 60) % 24 + d * 24));
            const m = this.formateTool(parseInt(leftTime / 60 % 60));
            const s = this.formateTool(parseInt(leftTime % 60));
            this.time = `${h}å°æ—¶ ${m}åˆ† ${s}ç§’`;
        },
        // å°†å°äº10çš„æ•° è½¬ä¸º 0å¼€å¤´çš„
        formateTool(time) {
            return time >= 10
                ? time
                : `0${time}`;
        },
        // å…¼å®¹IOS æ—¥æœŸå­—ç¬¦ä¸² æ ¼å¼NaNçš„é—®é¢˜
        timeStrToCorrectTool(endTime) {
            const arr = endTime.split(/[- :]/);
            const endTimeData = new Date(arr[0], arr[1] - 1, arr[2], arr[3], arr[4], arr[5]);
            return endTimeData;
        },
        // æ¯å±æ£€æµ‹äº‹ä»¶ï¼Œé˜²æ­¢å®šæ—¶å™¨å…³é—­
        visibilitychangeEvent() {
            document.addEventListener('visibilitychange', () => {
                this.init();
            }, false);
        }
    }
};
</script>
```

---

## ğŸ“šå‚è€ƒåˆ—è¡¨ï¼ˆè‡´æ•¬ï¼‰

- [Gitéƒ¨åˆ†å‚è€ƒï¼Œå†™çš„å¾ˆå¥½](https://www.nodejs.red/#/tools/git)

