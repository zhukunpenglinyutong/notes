# 1.å„ç§è½¯ä»¶å®‰è£…é€ŸæŸ¥

---

## ğŸ€ç¬¬ä¸€éƒ¨åˆ†ï¼šCentos7.*ä¸‹å®‰è£…è½¯ä»¶

### 1. å®‰è£…Node

- è®¾ç½®å®‰è£…æºï¼šcurl --silent --location https://rpm.nodesource.com/setup_11.x | bash -
- å®‰è£…nodeï¼šyum install -y nodejs
- [æ›´å¤šè¯¦ç»†ä»‹ç»](https://github.com/nodesource/distributions)

---

### 2. å®‰è£…MongoDB

::: warning
æ³¨æ„ï¼šä¸‹é¢å®‰è£…çš„æ˜¯MongoDB4.0
:::

- åˆ›å»ºä¸ªäººä»“åº“ï¼švi /etc/yum.repos.d/mongodb-org-4.0.repo
- æ’å…¥æ–‡æœ¬æ®µ

[mongodb-org-4.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/
gpgcheck=0
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc

æ³¨æ„ï¼šç¬¬ä¸€æ¬¡å¤åˆ¶ç²˜è´´æ–‡æœ¬æ®µä¼šé€ æˆç¼ºå¤±ï¼Œå¯ä»¥å…¨éƒ¨åˆ é™¤é‡æ–°ç²˜è´´ï¼Œæˆ–è€…ç›´æ¥å…‰æ ‡ç§»è‡³æœ€å‰é¢è¿›è¡Œè¾“å…¥è¡¥å…¨

- è¿è¡Œå‘½ä»¤ï¼šyum install -y mongodb-org
- å¯åŠ¨mongDBï¼šservice mongod start

---

### 3. å®‰è£…Nginx

- å®‰è£…ï¼šyum install nginx
- å¯åŠ¨nginxï¼šservice nginx start
- å¼€æœºè‡ªå¯ï¼šsystemctl enable nginx.service 
- é‡å¯æœåŠ¡ï¼šnginx -s reload

---

### 4. å®‰è£…pm2

- å®‰è£…ï¼šnpm install -g pm2
- è¿è¡Œç¨‹åºï¼špm2 start ç¨‹åºè·¯å¾„
- ç”Ÿæˆè‡ªå¯è„šæœ¬ï¼Œä¿æŒå½“å‰è¿›ç¨‹æ´»è·ƒï¼špm2 startup
- ä¿å­˜å½“å‰è¿›ç¨‹çŠ¶æ€ï¼špm2 save

---

### 5. å®‰è£…GitLab

ç‰ˆæœ¬ï¼š11.9.9
- ä¸‹è½½rpmï¼šwget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-11.9.9-ce.0.el7.x86_64.rpm
- å®‰è£…ï¼šrpm -i gitlab-ce-11.9.9-ce.0.el7.x86_64.rpm
- ä¿®æ”¹gitlabé…ç½®æ–‡ä»¶æŒ‡å®šæœåŠ¡å™¨ipå’Œè‡ªå®šä¹‰ç«¯å£ vim  /etc/gitlab/gitlab.rb
- gitlab-ctl reconfigure
- gitlab-ctl restart
- ç™»å½•ï¼šåˆå§‹è´¦æˆ·: root å¯†ç : 5iveL!fe

> é—®é¢˜ï¼šæƒ³å®‰è£…ä¸­æ–‡ç‰ˆçš„ï¼Œä¸çŸ¥é“æ€ä¹ˆå®‰è£…

---

### 6. å®‰è£…Docker

```sh
yum install -y yum-utils \
  device-mapper-persistent-data \
  lvm2

yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo

# æ­£å¼ä¸‹è½½
yum install docker-ce docker-ce-cli containerd.io -y

# å¯åŠ¨
systemctl start docker
```

---

### 7.å®‰è£…Jenkins

```sh
yum install java -y

yum install git -y

wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo

rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key

# å®Œæˆä¹‹åç›´æ¥ä½¿ç”¨ yum å‘½ä»¤å®‰è£… Jenkins
yum install jenkins -y


# Jenkins ä¿®æ”¹æƒé™ æ‰¾åˆ°$JENKINS_USER æ”¹ä¸º â€œrootâ€:
vim /etc/sysconfig/jenkins

# ç„¶åæ›´æ”¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ Jenkins homeï¼Œwebroot å’Œæ—¥å¿—çš„æ‰€æœ‰æƒï¼š
chown -R root:root /var/lib/jenkins
chown -R root:root /var/cache/jenkins
chown -R root:root /var/log/jenkins

# å¯åŠ¨ jenkins æœ‰ä¸€ä¸ªOKè¡¨ç¤ºå¯åŠ¨æˆåŠŸ
service jenkins restart

# åœ¨æœ¬åœ°æµè§ˆå™¨è¾“å…¥ä½ çš„ ip åœ°å€åŠ  é»˜è®¤ç«¯å£ 8080 å°±å¯ä»¥çœ‹åˆ° jenkins è§£é”é¡µé¢
# å¯†ç ï¼švim /var/lib/jenkins/secrets/initialAdminPassword
# é€‰æ‹©å®‰è£…æ¨èçš„æ’ä»¶å³å¯ ç­‰å¾…å®‰è£…
```


[æ›´å¤šæ–‡æ¡£å‚è€ƒ](https://juejin.im/post/5b371678f265da599f68dfa2)

---

### 8.å®‰è£…MySQL

```sh
wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm //ä¸‹è½½mysqlçš„repoæº

# å®‰è£…mysql-community-release-el7-5.noarch.rpmåŒ…
rpm -ivh mysql-community-release-el7-5.noarch.rpm

# å®‰è£…mysqlæœåŠ¡
yum install mysql-server

# ç™»å½•mysqlå¹¶ä¿®æ”¹mysqlçš„å¯†ç 
mysql -u root
```

---

**ğŸ”¥æ³¨æ„ï¼šç™»å½•æ—¶æœ‰å¯èƒ½æŠ¥è¿™æ ·çš„é”™ï¼šERROR 2002 (HY000): Canâ€˜t connect to local MySQL server through socket â€˜/var/lib/mysql/mysql.sockâ€˜ (2)**

```sh
# åŸå› æ˜¯/var/lib/mysqlçš„è®¿é—®æƒé™é—®é¢˜ã€‚ä¸‹é¢çš„å‘½ä»¤æŠŠ/var/lib/mysqlçš„æ‹¥æœ‰è€…æ”¹ä¸ºå½“å‰ç”¨æˆ·ï¼š

# è¿™é‡Œçš„mysqlæ˜¯ç”¨æˆ·åï¼ˆéœ€è¦è®¾ç½®ç”¨æˆ·ç»„åˆç”¨æˆ·ï¼‰ï¼ˆä¸€èˆ¬ç…§ç€å¤åˆ¶ä¸æ”¹ä¹Ÿæ²¡äº‹ï¼‰
sudo chown -R mysql:mysql /var/lib/mysql

# é‡å¯mysql
service mysqld restart
```

---

**è®¾ç½®ï¼ˆä¿®æ”¹ï¼‰å¯†ç **

```sh
# ç™»å½•
mysql -u root

use mysql;

# ä¿®æ”¹å¯†ç 
update user set password=password('ZHUkun94899.1') where user='root';

service mysqld restart // é‡å¯MySQL

# æµ‹è¯•
mysql -u root # ä¼šæŠ¥é”™ æ„æ€å°±æ˜¯ä½ æ²¡æœ‰ä½¿ç”¨å¯†ç ï¼Œä½ è¦ä½¿ç”¨å¯†ç ç™»å½•
mysql -uroot -på¯†ç  # è¿™æ ·å°±èƒ½è¿›å»äº†ï¼Œrootæ˜¯ç”¨æˆ·å
```

---


## ğŸŒ¾ç¬¬äºŒéƒ¨åˆ†ï¼šdockerå®‰è£…å„ç§è½¯ä»¶

### 1.å®‰è£…MongoDB

- æ‹‰å–ï¼šdocker pull mongo
- å»ºç«‹MongoDBå­˜å‚¨çš„ç›®å½•ï¼šmkdir ~/mgdb
- è¿è¡Œï¼šdocker run -p 27017:27017 -v /Users/zhukunpeng/mgdb:/data/db -d mongo
  - -p 27017:27017 :å°†å®¹å™¨çš„ 27017 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 27017 ç«¯å£ï¼ˆç«¯å£å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰ï¼ˆå‰é¢ä¸€ä¸ª27017æ˜¯ä¸»æœºç«¯å£ï¼Œåé¢ä¸€ä¸ªæ˜¯å®¹å™¨ç«¯å£ï¼‰
  - -v /Users/zhukunpeng/mgdb:/data/db å°†ä¸»æœºä¸­ä¸‹çš„ mgdb æŒ‚è½½åˆ°å®¹å™¨çš„/data/dbï¼Œä½œä¸º mongo æ•° æ®å­˜å‚¨ç›®å½•ï¼ˆæˆ‘è¿™æ˜¯Macçš„ç›®å½•ï¼Œä½ ä»¬ç¯å¢ƒä¸åŒç›®å½•æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¦æ”¹æˆè‡ªå·±çš„ï¼‰
- æŸ¥çœ‹å®¹å™¨å¯åŠ¨æƒ…å†µï¼šdocker ps
- é‡å‘½åå®¹å™¨å¯¹è±¡ï¼šdocker rename åŸæ¥åå­— ä¿®æ”¹çš„åå­—ï¼ˆè¿™æ­¥æ˜¯ä¸ºäº†ä»¥åæ–¹ä¾¿ï¼Œå› ä¸ºä½ docker ps æŸ¥çœ‹ä¼šå‘ç°å¯åŠ¨å®¹å™¨çš„åå­—æ˜¯éšæœºçš„ï¼Œä¸å¥½æ‰“ï¼‰
- è¿›å…¥mongoå®¹å™¨ï¼šdocker exec -it å¯åŠ¨å®¹å™¨åå­— bash

---


## ğŸ“šå‚è€ƒåˆ—è¡¨ï¼ˆè‡´æ•¬ï¼‰

