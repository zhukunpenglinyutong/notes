<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7.微信小程序 | Notes</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="知识速查（了不起的个人工具库）">
    <link rel="preload" href="/assets/css/0.styles.f5078b10.css" as="style"><link rel="preload" href="/assets/js/app.f2516ed4.js" as="script"><link rel="preload" href="/assets/js/2.b5be6ff6.js" as="script"><link rel="preload" href="/assets/js/72.7666a73f.js" as="script"><link rel="preload" href="/assets/js/3.87d40112.js" as="script"><link rel="prefetch" href="/assets/js/10.35e5e2b7.js"><link rel="prefetch" href="/assets/js/100.e67d24bc.js"><link rel="prefetch" href="/assets/js/101.8805974b.js"><link rel="prefetch" href="/assets/js/102.c5475d9e.js"><link rel="prefetch" href="/assets/js/103.6977e35c.js"><link rel="prefetch" href="/assets/js/104.ed9a180b.js"><link rel="prefetch" href="/assets/js/105.b9e863b3.js"><link rel="prefetch" href="/assets/js/106.2af16856.js"><link rel="prefetch" href="/assets/js/107.31538448.js"><link rel="prefetch" href="/assets/js/108.719b7c9c.js"><link rel="prefetch" href="/assets/js/109.ea679fce.js"><link rel="prefetch" href="/assets/js/11.88a97907.js"><link rel="prefetch" href="/assets/js/110.c81ee9d5.js"><link rel="prefetch" href="/assets/js/111.7f69e65d.js"><link rel="prefetch" href="/assets/js/112.72258ddc.js"><link rel="prefetch" href="/assets/js/12.bf0f2c7b.js"><link rel="prefetch" href="/assets/js/13.b246cedc.js"><link rel="prefetch" href="/assets/js/14.c8298f66.js"><link rel="prefetch" href="/assets/js/15.a80b1d45.js"><link rel="prefetch" href="/assets/js/16.9f8d4d27.js"><link rel="prefetch" href="/assets/js/17.5515190b.js"><link rel="prefetch" href="/assets/js/18.38b3c891.js"><link rel="prefetch" href="/assets/js/19.bae830c1.js"><link rel="prefetch" href="/assets/js/20.bbb98eac.js"><link rel="prefetch" href="/assets/js/21.70845d4e.js"><link rel="prefetch" href="/assets/js/22.6166d260.js"><link rel="prefetch" href="/assets/js/23.3ed55092.js"><link rel="prefetch" href="/assets/js/24.86663ab9.js"><link rel="prefetch" href="/assets/js/25.d873c7a2.js"><link rel="prefetch" href="/assets/js/26.da03dd1a.js"><link rel="prefetch" href="/assets/js/27.0857ab05.js"><link rel="prefetch" href="/assets/js/28.f06dd93c.js"><link rel="prefetch" href="/assets/js/29.e6a51913.js"><link rel="prefetch" href="/assets/js/30.9eddc820.js"><link rel="prefetch" href="/assets/js/31.7b1c958f.js"><link rel="prefetch" href="/assets/js/32.00028b3b.js"><link rel="prefetch" href="/assets/js/33.9925562b.js"><link rel="prefetch" href="/assets/js/34.83ed9b84.js"><link rel="prefetch" href="/assets/js/35.94596f7b.js"><link rel="prefetch" href="/assets/js/36.12266af3.js"><link rel="prefetch" href="/assets/js/37.101b8b9c.js"><link rel="prefetch" href="/assets/js/38.cbd3c52d.js"><link rel="prefetch" href="/assets/js/39.a175711d.js"><link rel="prefetch" href="/assets/js/4.02bf3d71.js"><link rel="prefetch" href="/assets/js/40.8291eb1a.js"><link rel="prefetch" href="/assets/js/41.34907669.js"><link rel="prefetch" href="/assets/js/42.1347b1c2.js"><link rel="prefetch" href="/assets/js/43.c588d6c9.js"><link rel="prefetch" href="/assets/js/44.0b5847af.js"><link rel="prefetch" href="/assets/js/45.55878d65.js"><link rel="prefetch" href="/assets/js/46.0b17e194.js"><link rel="prefetch" href="/assets/js/47.ef1df327.js"><link rel="prefetch" href="/assets/js/48.14215855.js"><link rel="prefetch" href="/assets/js/49.c3a89b55.js"><link rel="prefetch" href="/assets/js/5.d572fee8.js"><link rel="prefetch" href="/assets/js/50.224110e5.js"><link rel="prefetch" href="/assets/js/51.a067aaf7.js"><link rel="prefetch" href="/assets/js/52.e37db22c.js"><link rel="prefetch" href="/assets/js/53.6e95c85c.js"><link rel="prefetch" href="/assets/js/54.844c0d12.js"><link rel="prefetch" href="/assets/js/55.72478f22.js"><link rel="prefetch" href="/assets/js/56.9ffbaa6d.js"><link rel="prefetch" href="/assets/js/57.3b2b96cb.js"><link rel="prefetch" href="/assets/js/58.d01cee9b.js"><link rel="prefetch" href="/assets/js/59.5fb6bca7.js"><link rel="prefetch" href="/assets/js/6.1cd776fd.js"><link rel="prefetch" href="/assets/js/60.498fd1e2.js"><link rel="prefetch" href="/assets/js/61.a402dc0f.js"><link rel="prefetch" href="/assets/js/62.d0065cf8.js"><link rel="prefetch" href="/assets/js/63.e94506ac.js"><link rel="prefetch" href="/assets/js/64.0d8ec08a.js"><link rel="prefetch" href="/assets/js/65.c5be27b4.js"><link rel="prefetch" href="/assets/js/66.e4b0c082.js"><link rel="prefetch" href="/assets/js/67.b2be89ef.js"><link rel="prefetch" href="/assets/js/68.1f6f139e.js"><link rel="prefetch" href="/assets/js/69.ce10c0f3.js"><link rel="prefetch" href="/assets/js/7.01faab87.js"><link rel="prefetch" href="/assets/js/70.33616c52.js"><link rel="prefetch" href="/assets/js/71.0b8d493f.js"><link rel="prefetch" href="/assets/js/73.51b916d0.js"><link rel="prefetch" href="/assets/js/74.62ebdb0f.js"><link rel="prefetch" href="/assets/js/75.d6905641.js"><link rel="prefetch" href="/assets/js/76.d8833735.js"><link rel="prefetch" href="/assets/js/77.85302ac6.js"><link rel="prefetch" href="/assets/js/78.7c05a122.js"><link rel="prefetch" href="/assets/js/79.0eb7a7d6.js"><link rel="prefetch" href="/assets/js/8.6639ecf1.js"><link rel="prefetch" href="/assets/js/80.a4626fd1.js"><link rel="prefetch" href="/assets/js/81.d68b98fd.js"><link rel="prefetch" href="/assets/js/82.8069da06.js"><link rel="prefetch" href="/assets/js/83.85947d20.js"><link rel="prefetch" href="/assets/js/84.1a5f2453.js"><link rel="prefetch" href="/assets/js/85.a7a2253e.js"><link rel="prefetch" href="/assets/js/86.2ea16429.js"><link rel="prefetch" href="/assets/js/87.8ba893a4.js"><link rel="prefetch" href="/assets/js/88.b92c6ebb.js"><link rel="prefetch" href="/assets/js/89.5f2cf8bb.js"><link rel="prefetch" href="/assets/js/9.dac21db2.js"><link rel="prefetch" href="/assets/js/90.1f7e8323.js"><link rel="prefetch" href="/assets/js/91.f7b05486.js"><link rel="prefetch" href="/assets/js/92.b52805fb.js"><link rel="prefetch" href="/assets/js/93.82513672.js"><link rel="prefetch" href="/assets/js/94.6d48faf9.js"><link rel="prefetch" href="/assets/js/95.c15c94ee.js"><link rel="prefetch" href="/assets/js/96.4668611c.js"><link rel="prefetch" href="/assets/js/97.7efd20e5.js"><link rel="prefetch" href="/assets/js/98.67e6aca7.js"><link rel="prefetch" href="/assets/js/99.ec48a5d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f5078b10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  速查
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  前端体系
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  其他
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  速查
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  前端体系
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  其他
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>0.计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3.JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.jQuery及其周边库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.1MVVM框架（Vue）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.2MVVM框架（React）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>6.移动端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2.note/6.移动端/0.移动端开发绪论.html" class="sidebar-link">0.移动端开发绪论</a></li><li><a href="/2.note/6.移动端/1.移动端H5页面适配.html" class="sidebar-link">1.移动端H5页面适配</a></li><li><a href="/2.note/6.移动端/2.移动端H5手机内调试.html" class="sidebar-link">2.移动端H5手机内调试</a></li><li><a href="/2.note/6.移动端/3.Flutter.html" class="sidebar-link">3.Flutter</a></li><li><a href="/2.note/6.移动端/4.React-Native.html" class="sidebar-link">4.React-Native</a></li><li><a href="/2.note/6.移动端/5.移动端原生开发.html" class="sidebar-link">5.移动端原生开发</a></li><li><a href="/2.note/6.移动端/6.Weex.html" class="sidebar-link">6.Weex</a></li><li><a href="/2.note/6.移动端/7.微信小程序.html" class="active sidebar-link">7.微信小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🐇第一部分-微信小程序核心理念-以及基础开发介绍" class="sidebar-link">🐇第一部分：微信小程序核心理念，以及基础开发介绍</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🐳第二部分-wxml" class="sidebar-link">🐳第二部分：WXML</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🐠第三部分-wxss" class="sidebar-link">🐠第三部分：WXSS</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🔥第四部分-微信小程序基础组件" class="sidebar-link">🔥第四部分：微信小程序基础组件</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🐌第五部分-微信小程序api" class="sidebar-link">🐌第五部分：微信小程序API</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🦀第六部分-微信小程序开放能力" class="sidebar-link">🦀第六部分：微信小程序开放能力</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🔎第七部分-微信小程序其他探索" class="sidebar-link">🔎第七部分：微信小程序其他探索</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🦋第八部分-组件化开发小程序-基础" class="sidebar-link">🦋第八部分：组件化开发小程序（基础）</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🙉第九部分-组件化开发小程序-进阶" class="sidebar-link">🙉第九部分：组件化开发小程序（进阶）</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#☁️第十部分-小程序云开发" class="sidebar-link">☁️第十部分：小程序云开发</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🐯十一部分-现代化开发小程序探索" class="sidebar-link">🐯十一部分：现代化开发小程序探索</a></li><li class="sidebar-sub-header"><a href="/2.note/6.移动端/7.微信小程序.html#🕊第十二部分-微信小程序项目实践" class="sidebar-link">🕊第十二部分：微信小程序项目实践</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.0网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.1前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.2 前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.3前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.4前端代码质量</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.5运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.6前端架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.项目</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_7-微信小程序"><a href="#_7-微信小程序" class="header-anchor">#</a> 7.微信小程序</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>微信小程序这个东西怎么说呢，编译器贼难用，也就比记事本好用点</p> <p>技术含量很低，你说学这个有什么用？一个是公司可能有这方面的业务</p> <p>还有就是可以接一点私活，一般小程序工作的情况下 一个星期也可以搞定，赚点外快</p> <p>但是切记不要以这个为主，以为这个技术必将被淘汰（或者被新的事物替代）...</p></div> <h2 id="🐇第一部分-微信小程序核心理念-以及基础开发介绍"><a href="#🐇第一部分-微信小程序核心理念-以及基础开发介绍" class="header-anchor">#</a> 🐇第一部分：微信小程序核心理念，以及基础开发介绍</h2> <p><strong>这块不好写了，因为小程序我会用一点了，所以再来写这里有些麻烦，所以干脆先不写了吧</strong></p> <hr> <h2 id="🐳第二部分-wxml"><a href="#🐳第二部分-wxml" class="header-anchor">#</a> 🐳第二部分：WXML</h2> <p><strong>WXML用法上和HTML一样，就是标签（小程序里面是叫组件）名称不一样</strong></p> <h3 id="_1-wxml基础"><a href="#_1-wxml基础" class="header-anchor">#</a> 1.WXML基础</h3> <ul><li>WXML 全称 WeiXin Markup Language，是小程序设计的一套标签语言（虽然用法和HTML相似，但是不是HTML）</li> <li>首先要明确一点，在小程序中书写 标签（或者叫组件），为什么能展示出来，是因为微信的渲染引擎和脚本引擎，经过一系列复杂的过程，最后呈现出来</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- 小程序中没有div标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 小程序中没有p标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 小程序中没有 img标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- ...... --&gt;</span>

</code></pre></div><hr> <h3 id="_2-组件共同属性"><a href="#_2-组件共同属性" class="header-anchor">#</a> 2.组件共同属性</h3> <ul><li>id 组件标识，页面唯一</li> <li>class 类名</li> <li>style 内联样式</li> <li>hidden 是否隐藏</li> <li>data-* 自定义属性</li> <li>bind*/catch* 绑定事件</li></ul> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/" target="_blank" rel="noopener noreferrer">更多...微信组件官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h3 id="_3-wxml数据绑定"><a href="#_3-wxml数据绑定" class="header-anchor">#</a> 3.WXML数据绑定</h3> <p><strong>类似于Vue的 {{}}</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.wxml 页面（不是组件哦） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 基础绑定 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{className}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 基础运算 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{ name === '朱昆鹏' ?  '三目运算测试成功' : '三目运算测试失败'}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{ name + '，你好'}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- wx:if --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ name === <span class="token punctuation">'</span>朱昆鹏<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>名称是 朱昆鹏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> name === <span class="token punctuation">'</span>路人甲<span class="token punctuation">'</span> <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>名称是 路人甲<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>名称是 其他人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- wx:for, 下面那个block组件 就是为了for循环防止创建没用的组件 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ [1,2,3] }}<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{index}} {{item}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js 页面的JS（不是组件的哦）</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// {{}} 里面解析的就是data里面的，但是这里没有像Vue一样返回一个新的对象，估计有自己的处理方式</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'朱昆鹏'</span><span class="token punctuation">,</span>
    className<span class="token operator">:</span> <span class="token string">'test'</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="_4-wx-if-和-hidden属性的差异"><a href="#_4-wx-if-和-hidden属性的差异" class="header-anchor">#</a> 4.wx:if 和 hidden属性的差异</h3> <ul><li>wx:if 的渲染是惰性的，只有值是 true 的时候，微信引擎才会对里面的内容进行渲染
<ul><li>渲染过程：切换 false 和 true 的时候，都会重新渲染</li> <li>适合比较稳定，不频繁切换的场景</li></ul></li> <li>hidden属性，不管是 false还是 true，第一次的时候都会被引擎加载，存在我们的页面中
<ul><li>渲染过程：由始至终只对组件渲染一次，即使切换隐藏和显示，组件其实不会销毁和创建</li> <li>hidden初始化消耗资源多，适合频繁切换的场景</li></ul></li></ul> <hr> <h3 id="_5-微信小程序-事件系统"><a href="#_5-微信小程序-事件系统" class="header-anchor">#</a> 5.微信小程序 事件系统</h3> <ul><li><strong>注意：小程序的事件系统，可以设置是冒泡，还是捕获</strong> <ul><li>冒泡：bind，例如 bind:tap（或者 bindtap）</li> <li>捕获：capture，例如 capture:tap（或者capturetap）</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.wxml 页面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>朱昆鹏<span class="token punctuation">&quot;</span></span> <span class="token attr-name">222</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickFun<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// index.js 页面的JS</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  data<span class="token operator">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">clickFun</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 事件对象，常用的属性</span>
    
    <span class="token comment">// e.target 用户触发的组件</span>
    <span class="token comment">// e.target.dataset 组件上绑定的自定义数据 | 例如 e.target.dataset { name: 朱昆鹏 }</span>

    <span class="token comment">// e.currentTarget 经过冒泡 响应的组件</span>
    <span class="token comment">// e.currentTarget.dataset 和上面的一样</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li><strong>常用事件分类</strong> <ul><li>tap 手指触摸后马上离开（就是点击）</li> <li>touchstart 手指触摸动作开始（就是点击开始）</li> <li>touchend 手指触摸动作结束（就是点击结束）</li> <li>touchmove 手指触摸后移动（就是拖拽）</li> <li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" target="_blank" rel="noopener noreferrer">更多请看...官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul> <hr> <hr> <h3 id="_6-wxs"><a href="#_6-wxs" class="header-anchor">#</a> 6.WXS</h3> <p><strong>为什么要有WXS</strong></p> <ul><li>小程序刚开始内测的时候是没有WXS，后来人们在使用过程中，发现了一个问题，就是优势互，数据和展示效果之间，可能要经过一些比较复杂的逻辑处理
<ul><li>例如：数据是 1566739136513 一个时间戳，展示层要的效果是 2019-8-25 21点19分，这种的，小程序原有的 {{}} 写很多逻辑也不好，所以就有了WXS的出现</li> <li>备注：这个解决的问题，就相当于 Vue 中的计算属性</li></ul></li></ul> <hr> <p><strong>WXS的使用（主要有三种,此处的使用，还需要举例）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 1.写到WXML页面中</span>


<span class="token comment">// 2.写成独立的WXML文件</span>


<span class="token comment">// 3.写成WXS文件</span>

<span class="token comment">// src属性引用</span>
<span class="token operator">&lt;</span>wxs src<span class="token operator">=</span><span class="token string">&quot;WXS文件相对路径&quot;</span> module<span class="token operator">=</span><span class="token string">&quot;名称&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wxs<span class="token operator">&gt;</span>

<span class="token comment">// require函数引用</span>
<span class="token operator">&lt;</span>wxs module<span class="token operator">=</span><span class="token string">&quot;名称&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">let</span> 名称 <span class="token operator">=</span> <span class="token function">reuquire</span><span class="token punctuation">(</span><span class="token string">'WXS文件相对路径'</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span>export<span class="token punctuation">.</span>data <span class="token operator">=</span> 名称<span class="token punctuation">.</span>data
<span class="token operator">&lt;</span><span class="token operator">/</span>wxs<span class="token operator">&gt;</span>

</code></pre></div><hr> <h3 id="_4-wxml实现原理解析"><a href="#_4-wxml实现原理解析" class="header-anchor">#</a> 4.WXML实现原理解析</h3> <hr> <h2 id="🐠第三部分-wxss"><a href="#🐠第三部分-wxss" class="header-anchor">#</a> 🐠第三部分：WXSS</h2> <h3 id="_1-wxss基础"><a href="#_1-wxss基础" class="header-anchor">#</a> 1.WXSS基础</h3> <ul><li><strong>小程序的视图层是由 WXML 和 WXSS 进行编写，由微信框架组件进行展示</strong></li> <li>WXSS 不是 CSS哦，WXSS是微信定义的一套，修饰微信框架组件样式的规则</li></ul> <hr> <p><strong>小程序尺寸单位</strong></p> <ul><li>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。</li> <li>微信以iPhone6为依据，指定了rpx规则，其他和iPhone6手机大小不一致的，通够rpx进行转化，就能呈现出一样的效果了</li></ul> <p><strong>拓展知识</strong></p> <ul><li>物理像素：Pixel</li> <li>逻辑像素：PT/DP</li> <li>像素密度：PPI</li> <li>逻辑像素比：DPR</li></ul> <hr> <p><strong>微信小程序内联样式</strong></p> <ul><li>微信小程序中不能通过link来引入外部样式，只有 style内部样式 和 class类名，优先级和CSS一样</li> <li>important &gt; style &gt; #id &gt; class</li></ul> <hr> <h3 id="_2-wxss样式导入-和-选择器"><a href="#_2-wxss样式导入-和-选择器" class="header-anchor">#</a> 2.WXSS样式导入 和 选择器</h3> <p><strong>样式导入：使用@import语句可以导入外联样式表，@import后跟需要导入的外联样式表的相对路径，用;表示语句结束</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;./css/common.wxss&quot;</span><span class="token punctuation">;</span></span>
</code></pre></div><p><strong>微信小程序支持从CSS1 - CSS3的部分选择器</strong></p> <hr> <h3 id="_3-全局样式和局部样式"><a href="#_3-全局样式和局部样式" class="header-anchor">#</a> 3.全局样式和局部样式</h3> <ul><li>小程序有全局样式和局部样式概念</li></ul> <div class="language-css extra-class"><pre class="language-css"><code>
<span class="token comment">/* app.wxss 里面的代码作用全局，就是名称一样的话，会覆盖页面级wxss */</span>

<span class="token comment">/* test.wxss 页面中的wxss，只作用于对应的页面 */</span>

</code></pre></div><p><strong>❣️：WXSS无法加载本地文件（也就是如果要设置背景图的话，别用WXSS来设置本地的，要用网络上的，或者用内联样式）</strong></p> <hr> <h3 id="_4-微信小程序布局-flex"><a href="#_4-微信小程序布局-flex" class="header-anchor">#</a> 4.微信小程序布局（Flex）</h3> <p><strong>就是对于布局来说，WXSS完美支持Flex方案，建议好好学下，也不难，最核心的是下面这张图，要明白它的轴线，和交叉轴线的概念，其他的就是用了</strong></p> <img src="http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png"> <ul><li>备注：<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool" target="_blank" rel="noopener noreferrer">阮一峰Flex详细 链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <h3 id="_5-wxss原理分析"><a href="#_5-wxss原理分析" class="header-anchor">#</a> 5.WXSS原理分析</h3> <hr> <h2 id="🔥第四部分-微信小程序基础组件"><a href="#🔥第四部分-微信小程序基础组件" class="header-anchor">#</a> 🔥第四部分：微信小程序基础组件</h2> <h3 id="_0-微信小程序组件绪论"><a href="#_0-微信小程序组件绪论" class="header-anchor">#</a> 0.微信小程序组件绪论</h3> <ul><li>微信的组件才是最重要的，因为我们所看到的视图，都是微信组件搭建的</li> <li><a href="https://developers.weixin.qq.com/miniprogram/dev/component/" target="_blank" rel="noopener noreferrer">更多...微信组件官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <p><strong>使用组件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code></code></pre></div><hr> <h3 id="_1-视图容器"><a href="#_1-视图容器" class="header-anchor">#</a> 1.视图容器</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- view：和div用法相似，没啥可说的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- swiper &amp;&amp; swiper-item：滑块视图容器（就跟轮播图一样），有一些属性可以进行配置，例如下面的小点点啥的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>滑动项一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>滑动项二<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>滑动项三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- scroll-view 可滚动视图区域。使用竖向滚动时，需要给scroll-view一个固定高度，通过 WXSS 设置 height。组件属性的长度单位默认为px，2.4.0起支持传入单位(rpx/px)。 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- cover-view &amp;&amp; cover-image 覆盖在原生组件之上的 原生组件，解决原生组件层级最高的问题 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 覆盖在原生组件之上的文本视图 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cover-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 覆盖在原生组件之上的图片视图。可覆盖的原生组件同cover-view，支持嵌套在cover-view里 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cover-image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cover-image</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cover-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- movable-area &amp;&amp; movable-view --&gt;</span>
<span class="token comment">&lt;!-- movable-view的可移动区域 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>movable-area</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span> <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 可移动的视图容器，在页面中可以拖拽滑动。movable-view必须在 movable-area 组件中，并且必须是直接子节点，否则不能移动 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>movable-view</span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span> <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>movable-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>movable-area</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><hr> <h3 id="_2-基础内容"><a href="#_2-基础内容" class="header-anchor">#</a> 2.基础内容</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- text：和p标签相似，没啥可说的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- icon：图标。组件属性的长度单位默认为px，2.4.0起支持传入单位(rpx/px) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icon</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- progress：进度条 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">percent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active</span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- rich-text：富文本？ --&gt;</span>

</code></pre></div><hr> <h3 id="_3-表单组件"><a href="#_3-表单组件" class="header-anchor">#</a> 3.表单组件</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- button：按钮，不用多说 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- input：输入框 该组件是原生组件，使用时请注意相关限制 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>这是一个可以自动聚焦的input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">auto-focus</span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- textarea：多行输入框 该组件是原生组件，使用时请注意相关限制 --&gt;</span>

<span class="token comment">&lt;!-- radio：单选项目（单选框） --&gt;</span>

<span class="token comment">&lt;!-- checkbox：多选项目（就是复选框） --&gt;</span>

<span class="token comment">&lt;!-- switch：开关选择器（手机上常用的开关的形状） --&gt;</span>

<span class="token comment">&lt;!-- 更多请看文档... --&gt;</span>

</code></pre></div><hr> <h3 id="_4-导航"><a href="#_4-导航" class="header-anchor">#</a> 4.导航</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- navigator：页面链接 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/classic/classic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>跳转到新页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- functional-page-navigator：仅在插件中有效，用于跳转到插件功能页 --&gt;</span>

</code></pre></div><hr> <h3 id="_5-媒体组件"><a href="#_5-媒体组件" class="header-anchor">#</a> 5.媒体组件</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- image：图片组件，微信的这个组件封装了一些属性，让我们很方便的进行设置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- video：相关api：wx.createVideoContext --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>地址<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- camera：系统相机。扫码二维码功能，需升级微信客户端至6.7.3。需要用户授权 scope.camera。 --&gt;</span>

<span class="token comment">&lt;!-- live-pusher：实时音视频录制 --&gt;</span>

<span class="token comment">&lt;!-- live-player：实时音视频播放 --&gt;</span>

<span class="token comment">&lt;!-- audio: 音频 1.6.0版本开始，该组件不再维护。建议使用能力更强的 wx.createInnerAudioContext 接口 --&gt;</span>

</code></pre></div><hr> <h3 id="_6-地图"><a href="#_6-地图" class="header-anchor">#</a> 6.地图</h3> <p><strong>地图。相关api <a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/map/wx.createMapContext.html" target="_blank" rel="noopener noreferrer">wx.createMapContext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <hr> <h3 id="_7-画布"><a href="#_7-画布" class="header-anchor">#</a> 7.画布</h3> <p><strong>画布。相关api：<a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.createCanvasContext.html" target="_blank" rel="noopener noreferrer">wx.createCanvasContext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <hr> <h3 id="_8-原生组件-和-非原生组件"><a href="#_8-原生组件-和-非原生组件" class="header-anchor">#</a> 8.原生组件 和 非原生组件</h3> <ul><li><p>微信小程序，根据渲染类型不同可以分为两种</p> <ul><li>基于WebView渲染的（基于浏览器渲染引擎渲染），我们称之为 <strong>非原生组件</strong></li> <li>基于微信客户端渲染的，我们称之为 <strong>原生组件</strong></li></ul></li> <li><p>非原生组件有</p> <ul><li>view</li> <li>image</li> <li>text</li> <li>button</li> <li>scroll-view</li> <li>...</li></ul></li> <li><p>原生组件有</p> <ul><li>camera</li> <li>canvas</li> <li>input（仅在focus时表现为原生组件）</li> <li>live-player</li> <li>live-pusher</li> <li>map</li> <li>textarea</li> <li>video</li></ul></li></ul> <hr> <p><strong>🔥 cover-view &amp;&amp; cover-image 解决原生组件层级问题</strong></p> <ul><li>原生组件遇到最常见的问题，就是，无法在原生组件上添加东西，例如无法在地图map上添加东西，因为层级map一直是最高的</li> <li>所以有了 cover-view 和 cover-image 来解决这个问题，这两个是原生组件，用来解决 原生组件层级最高的限制</li></ul> <hr> <p><strong>原生组件渲染流程</strong></p> <ul><li>先由WebView渲染一个占位元素（一个黑色的区域）</li> <li>再调用微信客户端，跨线程通信，在刚刚的占位元素上，生成对应的原生组件（注意这里黑色的占位元素还未消失哦）</li></ul> <hr> <p><strong>原生组件和非原生组件的差异</strong></p> <p>原生组件脱离在 WebView 渲染流程，会有一些问题，<strong>原因是，跨线程的渲染机制，使我们组件之间数据，无法及时进行同步</strong></p> <ul><li>原生组件的层级是最高的，所以页面中的其他组件无论设置 z-index 为多少，都无法盖在原生组件上
<ul><li>后插入的原生组件可以覆盖之前的原生组件</li></ul></li> <li>原生组件还无法在 picker-view 中使用
<ul><li>基础库 2.4.4 以下版本，原生组件不支持在 scroll-view、swiper、movable-view 中使用</li> <li>可以以后也可以在 picker-view 中使用了</li></ul></li> <li>部分CSS样式无法应用于原生组件
<ul><li>无法对原生组件设置 CSS 动画</li> <li>无法定义原生组件为 position: fixed</li> <li>不能在父级节点使用 overflow: hidden 来裁剪原生组件的显示区域</li></ul></li> <li>原生组件的事件监听不能使用 bind:eventname 的写法，只支持 bindeventname。原生组件也不支持 catch 和 capture 的事件绑定方式</li> <li>原生组件会遮挡 vConsole 弹出的调试面板。 在工具上，原生组件是用web组件模拟的，因此很多情况并不能很好的还原真机的表现，建议开发者在使用到原生组件时尽量在真机上进行调试</li></ul> <p><strong>❓ 为什么原生组件有这么多问题，微信还开发这么原生组件呢</strong></p> <ul><li>因为在视频解码，绘制地图，调用摄像头，调用键盘等等，有的是WebView有很差的性能问题，或者根本WebView就没办法实现，所以用微信客户端来渲染，就能很好的解决了</li></ul> <hr> <h3 id="_9-组件通信原理-了解即可"><a href="#_9-组件通信原理-了解即可" class="header-anchor">#</a> 9.组件通信原理（了解即可）</h3> <p><strong>IOS的通信机制</strong></p> <p>对于 IOS 系统来说，小程序的页面是呈现在 WKWebView 中的，WKWebView 初始化时，开发者会为其定义一系列的参数，而这些参数中，包含了一个方法 -addScriptMessageHandler，我们把它简称为 MessageHandler。MessageHandler 的主要功能，就是用于为 JavaScript 设置通讯的桥梁，多数情况下，我们可以认为它定义了 JavaScript 调用客户端的方法名称和接收传递的数据，并可监听客户端的事件消息。原生组件在 IOS 里，就是利用了这个特性实现与客户端通讯的。</p> <p><strong>Andriod的通信机制</strong></p> <p>不同于 IOS 的 MessageHandler 特性，在安卓系统里，小程序采用了 JavaScript 注入的方式，为 WebView 的 window 对象注入原生方法，并以类似于 JSBridge 的形式提供给开发者使用，包括调用（invoke）和监听（on）两种类型的方法，通过方法调用，可以通知客户端执行需要的方法并可传递不同的参数数据，而通过事件监听，可以获知组件的事件触发，从而实现了原生组件的通信。</p> <p><strong>通信层级</strong></p> <p>上面所讲到的机制，只是小程序页面与微信客户端之间的通信过程，但实际上，开发者大部份情况下并不会直接使用这些通信机制进行功能调用，更多的时候我们是间接地设置好组件，通过组件内部的实现，去使用客户端的原生功能。一般来说，原生组件在页面里定义好之后，在页面渲染阶段就会与客户端发生数据交互，通知客户端同步渲染组件内容。而在后续用户使用过程中，组件也会在必要时调用客户端接口对内容进行更新。</p> <p>对于一些交互比较复杂的原生组件，小程序也会提供跟组件相关联的上下文对象，以便开发者可以在逻辑层中对组件进行操作。以 video 为例，小程序提供了 wx.createVideoContext 这个 API 来创建 video 的 context，以便在必要时可以控制视频的暂停、跳转、设置播放倍速等等。当然这些 API 也是经过一定的封装再提供给开发者的，我们并不能直接调用客户端的方法。</p> <hr> <h2 id="🐌第五部分-微信小程序api"><a href="#🐌第五部分-微信小程序api" class="header-anchor">#</a> 🐌第五部分：微信小程序API</h2> <h3 id="_1-微信小程序api简介"><a href="#_1-微信小程序api简介" class="header-anchor">#</a> 1.微信小程序API简介</h3> <p><strong>所谓微信小程序的API，就是微信封装的一层，微信 与 手持设备之间的一个桥梁（例如网络通信API，缓存API，等等）</strong></p> <p>小程序API有很多，<a href="https://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener noreferrer">官方详细文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="🦀第六部分-微信小程序开放能力"><a href="#🦀第六部分-微信小程序开放能力" class="header-anchor">#</a> 🦀第六部分：微信小程序开放能力</h2> <p><strong>我们将微信生态赋予小程序的能力（例如登录，支付，获取运动步数等等），我们称之为，开放能力，这里也对应着 开放接口API</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html" target="_blank" rel="noopener noreferrer">官方详细文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="🔎第七部分-微信小程序其他探索"><a href="#🔎第七部分-微信小程序其他探索" class="header-anchor">#</a> 🔎第七部分：微信小程序其他探索</h2> <h3 id="_1-页面的生命周期"><a href="#_1-页面的生命周期" class="header-anchor">#</a> 1.页面的生命周期</h3> <p><strong>以下内容你不需要立马完全弄明白，不过以后它会有帮助，下图说明了页面 Page 实例的生命周期</strong></p> <img src="https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png"> <hr> <h3 id="_2-setdata原理分析"><a href="#_2-setdata原理分析" class="header-anchor">#</a> 2.setData原理分析</h3> <hr> <h2 id="🦋第八部分-组件化开发小程序-基础"><a href="#🦋第八部分-组件化开发小程序-基础" class="header-anchor">#</a> 🦋第八部分：组件化开发小程序（基础）</h2> <h3 id="_1-定义一个自定义组件"><a href="#_1-定义一个自定义组件" class="header-anchor">#</a> 1.定义一个自定义组件</h3> <ul><li>首先一般是建立一个文件夹，一般在根目录（与app.js同级）建立一个 component 文件夹</li> <li>示例：建立一个 test 组件</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>
<span class="token comment"># 目录结构示例（test下面的名字可以随便起，但是要四个要一致，一般要不取index，要不取文件夹名称test）</span>
--- component 文件夹
  --- <span class="token builtin class-name">test</span> 文件夹
    --- index.wxml
    --- index.wxss
    --- index.js
    --- index.json

<span class="token comment"># 小程序的编辑器也能通过右键，一下生成这四个自定义组件的模板了</span>

</code></pre></div><p><strong>❣️：wxml和wxss部分和写页面一样，js部分是 Component({}) 不再是 Page({}) 里面的内容也不一样了，json部分，也有自己的配置</strong></p> <hr> <h3 id="_2-自定义组件使用"><a href="#_2-自定义组件使用" class="header-anchor">#</a> 2.自定义组件使用</h3> <ul><li>在需要使用自定义组件的页面的 .json 文件中配置</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;z-test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/component/test/index&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>z-test</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>z-test</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <h3 id="_3-自定义组件构造器-componet"><a href="#_3-自定义组件构造器-componet" class="header-anchor">#</a> 3.自定义组件构造器（Componet）</h3> <p><strong>主要分为三部分：数据，生命周期，方法（函数，事件）</strong></p> <p><strong>1️⃣ 数据</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">/**
   * 组件的属性列表
  */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String <span class="token comment">// 类型，如果传入的不正确会报错的</span>
      <span class="token comment">// value: '默认名称'</span>
      <span class="token comment">// observer: function (newVal, oldValue) { // （旧版本的写法）</span>
      <span class="token comment">//    console.log(传递到这里的值改变了，就会触发) // 注意千万不要在这里面改变值，例如改变name的值，因为会无限递归，卡死了（一种套路是，写个中间变量 _name 类似于这样的，让这个渲染组件视图层，改这个，监听的是 name）</span>
      <span class="token comment">// }</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> Number <span class="token comment">// 简写形式，没什么可说的，很多框架配置都是这种的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// observers新版写法</span>
  <span class="token comment">// observers: {</span>
  <span class="token comment">//   type () {</span>

  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>

  <span class="token comment">// 继承（具体使用 自定义组件进阶中有）</span>
  <span class="token comment">// behaviors: [名称],</span>

  <span class="token comment">// 启动插槽（具体使用 自定义组件进阶中有）</span>
  <span class="token comment">// options: {</span>
  <span class="token comment">//   multipleSlots: true</span>
  <span class="token comment">// },</span>

  <span class="token comment">// 定义外部样式（具体使用 自定义组件进阶中有）</span>
  <span class="token comment">// externalClasses: ['mycolor'],</span>

  <span class="token comment">/**
   * 组件的初始数据（和页面的使用功能一致，不过多解释）
  */</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// ...</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- 页面使用 自定义组件示例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>朱昆鹏<span class="token punctuation">&quot;</span></span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><hr> <p><strong>2️⃣ 生命周期</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  lifetimes<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例进入页面节点树时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 以下是旧式的定义方式，可以保持对 2.2.3版本以下基础库的兼容</span>
  <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件实例进入页面节点树时执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// ...</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html" target="_blank" rel="noopener noreferrer">组件声明周期，官方详细文档...<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <hr> <p><strong>3️⃣ 方法（函数，事件）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="🙉第九部分-组件化开发小程序-进阶"><a href="#🙉第九部分-组件化开发小程序-进阶" class="header-anchor">#</a> 🙉第九部分：组件化开发小程序（进阶）</h2> <h3 id="_1-自定义事件的激活和监听"><a href="#_1-自定义事件的激活和监听" class="header-anchor">#</a> 1.自定义事件的激活和监听</h3> <ul><li><strong>用途</strong> <ul><li>页面 监听 自定义组件触发的事件</li> <li>自定义组件 向页面 传值（相当于Vue中的子组件向父组件传值）</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 我们给自定义组件绑定一个事件，这没啥吧，都会 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickTest<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ... </span>
  
  <span class="token comment">/**
   * 组件的方法列表
  */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">clickTest</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 下面这个方法是自定义事件的核心</span>
      <span class="token comment">// 参数一是规定的 页面触发事件的名称，参数二是传递的参数，放到 e.detail里面，参数三是...</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'朱昆鹏'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 页面使用，注意这里绑定的事件是 test，页面是自定义组件中规定的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">bindtest</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yTest<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 页面的js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  
  <span class="token function-variable function">yTest</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;朱昆鹏&quot;}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="_2-自定义组件间的通信"><a href="#_2-自定义组件间的通信" class="header-anchor">#</a> 2.自定义组件间的通信</h3> <p><strong>页面 ---&gt; 自定义组件：直接通过自定义组件的properties属性的方式来传</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 自定义组件</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> Number
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- （页面 --- 自定义组件数据的传递） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>21<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <p><strong>自定义组件 ---&gt; 页面</strong></p> <ul><li>🔥一般通过组件的自定义事件来传递数据</li></ul> <p><strong>或者如果组件触发了跳转的话，也可以通过 wx.navigateTo()来传</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 页面跳转情况下的传参</span>

<span class="token comment">// 自定义组件</span>
wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages/test/index?name=&quot;朱昆鹏&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 页面</span>
<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'options'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;朱昆鹏&quot;}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>


</code></pre></div><hr> <p><strong>自定义组件 ---&gt; 自定义组件</strong></p> <p><strong>目前可行的是，通过自定义事件传到页面，再由页面发到自定义组件，让页面当一个过渡者，传递者进行传递</strong></p> <hr> <h3 id="_3-behavio-自定义组件的继承"><a href="#_3-behavio-自定义组件的继承" class="header-anchor">#</a> 3.behavio（自定义组件的继承）</h3> <p><strong>这个解决了什么问题？主要解决的是部分自定义组件的一些属性，和一些生命周期非常的一致，于是就可以通过集成来抽离出来，维护相同的部分</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// zhu-beh.js</span>
<span class="token keyword">const</span> zhuBeh <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> String<span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> Number
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>zhuBeh<span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用🔥</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> zhuBeh <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../zhu-beh.js'</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// 继承</span>
  behaviors<span class="token operator">:</span> <span class="token punctuation">[</span>zhuBeh<span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    sex<span class="token operator">:</span> String
    <span class="token comment">// 因为继承了，所以页面传的时候，可以传 name,age,sex三个属性进来</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// ......</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ❣️ 多继承规则</span>

behaviors<span class="token operator">:</span> <span class="token punctuation">[</span>zhuBeh<span class="token punctuation">,</span> zhu1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span>

<span class="token comment">// 既然支持多继承，就有一个覆盖规则：</span>
<span class="token comment">// 子组件中会覆盖继承的（自定义组件中的权级高）</span>
<span class="token comment">// 继承的生命周期函数，不会覆盖</span>

</code></pre></div><hr> <h3 id="_4-slot插槽的使用"><a href="#_4-slot插槽的使用" class="header-anchor">#</a> 4.slot插槽的使用</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- test.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>下面是插槽的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Slot插槽 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// test.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ❣️❣️❣️ 启动插槽，别忘了这一步</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    multipleSlots<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- 页面中使用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的名字是朱昆鹏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 最后的展示效果就是 下面是插槽的内容，然后一个按钮，按钮的文字是 我的名字是朱昆鹏 --&gt;</span>

</code></pre></div><hr> <h3 id="_5-自定义组件外部样式"><a href="#_5-自定义组件外部样式" class="header-anchor">#</a> 5.自定义组件外部样式</h3> <p><strong>痛点，一个自定义组件，是由很多官方组件堆积成的，但是我们却没办法通过设置样式改变自定义组件，除非你自己在组件的wxss中改组件的样式，否则是不太能在页面中改的，为了应对这个问题，微信出了 外部样式的概念</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- test.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mycolor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>字体颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// test.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// 定义外部样式</span>
  externalClasses<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'mycolor'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 页面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mycolor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 我们给页面的 wxss 设置 .mycolor 颜色为红色，最后展示出来的字体颜色也就是红色 --&gt;</span>
</code></pre></div><hr> <h3 id="_6-自定义组件的一些小坑"><a href="#_6-自定义组件的一些小坑" class="header-anchor">#</a> 6.自定义组件的一些小坑</h3> <p><strong>hidden属性，无法隐藏自定义组件</strong></p> <ul><li>wx:if 的方式可以隐藏组件，但是 hidden 却隐藏不了我们自定义的组件，这个是为什么？</li> <li>原因是小程序会认为这个可能是我们自己写的属性</li> <li>解决方法：在组件中设置 hidden 属性，然后直接设置</li> <li>为什么我们这里要用 hidden，因为如果要频繁的切换，用 hidden 比较好（具体可以看 wx:if vs hidden）</li></ul> <hr> <h2 id="☁️第十部分-小程序云开发"><a href="#☁️第十部分-小程序云开发" class="header-anchor">#</a> ☁️第十部分：小程序云开发</h2> <h3 id="_1-云开发简介"><a href="#_1-云开发简介" class="header-anchor">#</a> 1.云开发简介</h3> <p><strong>所谓小程序云开发就是通过小程序的接口，调用小程序的云数据库，云函数，云存储（还能使用云调用，和HTTP API）</strong></p> <ul><li>云函数：在云端运行的代码，微信私有协议天然鉴权</li> <li>云数据库：一个既可以在小程序端操作，又可以在云函数中操作的JSON数据库（非关系型，类似MongoDB）</li> <li>云存储：在云端存储文件，可以在云端控制台可视化管理</li> <li>云调用：基于云函数免鉴权使用微信开放接口的鞥哪里（例如我们可以给用户推送信息）</li> <li>🔥HTTP API：使用HTTP API开发者可以在已有服务器上访问云资源，实现与云开发的互通</li></ul> <p><strong>拓展：Serverless介绍，这个又叫云服务，或者无服务，函数及服务</strong></p> <hr> <h3 id="_2-建立一个具有云开发的小程序"><a href="#_2-建立一个具有云开发的小程序" class="header-anchor">#</a> 2.建立一个具有云开发的小程序</h3> <ul><li>首先是创建，这里选择使用云开发</li> <li>然后初始化会报错，因为没有开通，所以开通一下，会让你创建环境
<ul><li>环境配置取名字随便取，我这里取的是 test</li> <li>然后需要在 app.js 中设置 env ，不设置的话，还会报错的</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//app.js</span>
<span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>wx<span class="token punctuation">.</span>cloud<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'请使用 2.2.3 或以上的基础库以使用云能力'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// env 参数说明：</span>
        <span class="token comment">//   env 参数决定接下来小程序发起的云开发调用（wx.cloud.xxx）会默认请求到哪个云环境的资源</span>
        <span class="token comment">//   此处请填入环境 ID, 环境 ID 可打开云控制台查看</span>
        <span class="token comment">//   如不填则使用默认环境（第一个创建的环境）</span>
        env<span class="token operator">:</span> <span class="token string">'test-t8jsc'</span><span class="token punctuation">,</span>
        traceUser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>globalData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer">代码规范网站<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h3 id="_3-云函数的基本使用"><a href="#_3-云函数的基本使用" class="header-anchor">#</a> 3.云函数的基本使用</h3> <ul><li>在cloudfuncitons文件夹下，右键，新建Node云函数，输入名称，就能初始化一个云函数</li> <li>上传：云函数文件夹右键上传，如果有npm包的话，就选那个 上传并部署：云端安装依赖</li> <li>然后就可以在云开发的面板中对云函数进行测试等操作</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 云函数中使用 云数据库示例</span>

<span class="token keyword">const</span> cloud <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wx-server-sdk'</span><span class="token punctuation">)</span>
cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> db <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 数据库</span>
<span class="token keyword">const</span> playlistCollection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'playlist'</span><span class="token punctuation">)</span> <span class="token comment">// 数据库集合</span>

<span class="token keyword">const</span> rp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request-promise'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'http://musicapi.xiecheng.live/personalized'</span>

<span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">await</span> playlistCollection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取集合数据（其中data就是）</span>

  <span class="token keyword">let</span> dataRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> playlist <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dataRes<span class="token punctuation">)</span><span class="token punctuation">.</span>result

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> playlist<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> playlistCollection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>playlist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        createTime<span class="token operator">:</span> db<span class="token punctuation">.</span><span class="token function">serverDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="_4-云数据库"><a href="#_4-云数据库" class="header-anchor">#</a> 4.云数据库</h3> <p><strong>云数据库只能一条条的插入</strong></p> <hr> <h2 id="🐯十一部分-现代化开发小程序探索"><a href="#🐯十一部分-现代化开发小程序探索" class="header-anchor">#</a> 🐯十一部分：现代化开发小程序探索</h2> <h3 id="_0-使用npm"><a href="#_0-使用npm" class="header-anchor">#</a> 0.使用npm</h3> <p><strong>安装依赖和传统的一样</strong></p> <hr> <h3 id="_1-封装api层探索"><a href="#_1-封装api层探索" class="header-anchor">#</a> 1.封装API层探索</h3> <hr> <h3 id="_2-封装状态管理探索-类vuex"><a href="#_2-封装状态管理探索-类vuex" class="header-anchor">#</a> 2.封装状态管理探索（类Vuex）</h3> <hr> <h3 id="_3-小程序测试探索-单元测试-集成测试-e2e测试"><a href="#_3-小程序测试探索-单元测试-集成测试-e2e测试" class="header-anchor">#</a> 3.小程序测试探索（单元测试，集成测试，E2E测试）</h3> <hr> <h3 id="_4-小程序工程化开发探索"><a href="#_4-小程序工程化开发探索" class="header-anchor">#</a> 4.小程序工程化开发探索</h3> <hr> <h3 id="_5-多端打包技术探索"><a href="#_5-多端打包技术探索" class="header-anchor">#</a> 5.多端打包技术探索</h3> <hr> <h2 id="🕊第十二部分-微信小程序项目实践"><a href="#🕊第十二部分-微信小程序项目实践" class="header-anchor">#</a> 🕊第十二部分：微信小程序项目实践</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/2.note/6.移动端/6.Weex.html" class="prev">
        6.Weex
      </a></span> <span class="next"><a href="/2.note/7.Node/1.Node绪论.html">
        1.Node绪论
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f2516ed4.js" defer></script><script src="/assets/js/2.b5be6ff6.js" defer></script><script src="/assets/js/72.7666a73f.js" defer></script><script src="/assets/js/3.87d40112.js" defer></script>
  </body>
</html>
