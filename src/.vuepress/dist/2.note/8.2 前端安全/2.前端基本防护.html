<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.å‰ç«¯åŸºæœ¬é˜²æŠ¤ | Notes</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="çŸ¥è¯†é€ŸæŸ¥ï¼ˆäº†ä¸èµ·çš„ä¸ªäººå·¥å…·åº“ï¼‰">
    <link rel="preload" href="/assets/css/0.styles.f5078b10.css" as="style"><link rel="preload" href="/assets/js/app.f2516ed4.js" as="script"><link rel="preload" href="/assets/js/2.b5be6ff6.js" as="script"><link rel="preload" href="/assets/js/85.a7a2253e.js" as="script"><link rel="preload" href="/assets/js/3.87d40112.js" as="script"><link rel="prefetch" href="/assets/js/10.35e5e2b7.js"><link rel="prefetch" href="/assets/js/100.e67d24bc.js"><link rel="prefetch" href="/assets/js/101.8805974b.js"><link rel="prefetch" href="/assets/js/102.c5475d9e.js"><link rel="prefetch" href="/assets/js/103.6977e35c.js"><link rel="prefetch" href="/assets/js/104.ed9a180b.js"><link rel="prefetch" href="/assets/js/105.b9e863b3.js"><link rel="prefetch" href="/assets/js/106.2af16856.js"><link rel="prefetch" href="/assets/js/107.31538448.js"><link rel="prefetch" href="/assets/js/108.719b7c9c.js"><link rel="prefetch" href="/assets/js/109.ea679fce.js"><link rel="prefetch" href="/assets/js/11.88a97907.js"><link rel="prefetch" href="/assets/js/110.c81ee9d5.js"><link rel="prefetch" href="/assets/js/111.7f69e65d.js"><link rel="prefetch" href="/assets/js/112.72258ddc.js"><link rel="prefetch" href="/assets/js/12.bf0f2c7b.js"><link rel="prefetch" href="/assets/js/13.b246cedc.js"><link rel="prefetch" href="/assets/js/14.c8298f66.js"><link rel="prefetch" href="/assets/js/15.a80b1d45.js"><link rel="prefetch" href="/assets/js/16.9f8d4d27.js"><link rel="prefetch" href="/assets/js/17.5515190b.js"><link rel="prefetch" href="/assets/js/18.38b3c891.js"><link rel="prefetch" href="/assets/js/19.bae830c1.js"><link rel="prefetch" href="/assets/js/20.bbb98eac.js"><link rel="prefetch" href="/assets/js/21.70845d4e.js"><link rel="prefetch" href="/assets/js/22.6166d260.js"><link rel="prefetch" href="/assets/js/23.3ed55092.js"><link rel="prefetch" href="/assets/js/24.86663ab9.js"><link rel="prefetch" href="/assets/js/25.d873c7a2.js"><link rel="prefetch" href="/assets/js/26.da03dd1a.js"><link rel="prefetch" href="/assets/js/27.0857ab05.js"><link rel="prefetch" href="/assets/js/28.f06dd93c.js"><link rel="prefetch" href="/assets/js/29.e6a51913.js"><link rel="prefetch" href="/assets/js/30.9eddc820.js"><link rel="prefetch" href="/assets/js/31.7b1c958f.js"><link rel="prefetch" href="/assets/js/32.00028b3b.js"><link rel="prefetch" href="/assets/js/33.9925562b.js"><link rel="prefetch" href="/assets/js/34.83ed9b84.js"><link rel="prefetch" href="/assets/js/35.94596f7b.js"><link rel="prefetch" href="/assets/js/36.12266af3.js"><link rel="prefetch" href="/assets/js/37.101b8b9c.js"><link rel="prefetch" href="/assets/js/38.cbd3c52d.js"><link rel="prefetch" href="/assets/js/39.a175711d.js"><link rel="prefetch" href="/assets/js/4.02bf3d71.js"><link rel="prefetch" href="/assets/js/40.8291eb1a.js"><link rel="prefetch" href="/assets/js/41.34907669.js"><link rel="prefetch" href="/assets/js/42.1347b1c2.js"><link rel="prefetch" href="/assets/js/43.c588d6c9.js"><link rel="prefetch" href="/assets/js/44.0b5847af.js"><link rel="prefetch" href="/assets/js/45.55878d65.js"><link rel="prefetch" href="/assets/js/46.0b17e194.js"><link rel="prefetch" href="/assets/js/47.ef1df327.js"><link rel="prefetch" href="/assets/js/48.14215855.js"><link rel="prefetch" href="/assets/js/49.c3a89b55.js"><link rel="prefetch" href="/assets/js/5.d572fee8.js"><link rel="prefetch" href="/assets/js/50.224110e5.js"><link rel="prefetch" href="/assets/js/51.a067aaf7.js"><link rel="prefetch" href="/assets/js/52.e37db22c.js"><link rel="prefetch" href="/assets/js/53.6e95c85c.js"><link rel="prefetch" href="/assets/js/54.844c0d12.js"><link rel="prefetch" href="/assets/js/55.72478f22.js"><link rel="prefetch" href="/assets/js/56.9ffbaa6d.js"><link rel="prefetch" href="/assets/js/57.3b2b96cb.js"><link rel="prefetch" href="/assets/js/58.d01cee9b.js"><link rel="prefetch" href="/assets/js/59.5fb6bca7.js"><link rel="prefetch" href="/assets/js/6.1cd776fd.js"><link rel="prefetch" href="/assets/js/60.498fd1e2.js"><link rel="prefetch" href="/assets/js/61.a402dc0f.js"><link rel="prefetch" href="/assets/js/62.d0065cf8.js"><link rel="prefetch" href="/assets/js/63.e94506ac.js"><link rel="prefetch" href="/assets/js/64.0d8ec08a.js"><link rel="prefetch" href="/assets/js/65.c5be27b4.js"><link rel="prefetch" href="/assets/js/66.e4b0c082.js"><link rel="prefetch" href="/assets/js/67.b2be89ef.js"><link rel="prefetch" href="/assets/js/68.1f6f139e.js"><link rel="prefetch" href="/assets/js/69.ce10c0f3.js"><link rel="prefetch" href="/assets/js/7.01faab87.js"><link rel="prefetch" href="/assets/js/70.33616c52.js"><link rel="prefetch" href="/assets/js/71.0b8d493f.js"><link rel="prefetch" href="/assets/js/72.7666a73f.js"><link rel="prefetch" href="/assets/js/73.51b916d0.js"><link rel="prefetch" href="/assets/js/74.62ebdb0f.js"><link rel="prefetch" href="/assets/js/75.d6905641.js"><link rel="prefetch" href="/assets/js/76.d8833735.js"><link rel="prefetch" href="/assets/js/77.85302ac6.js"><link rel="prefetch" href="/assets/js/78.7c05a122.js"><link rel="prefetch" href="/assets/js/79.0eb7a7d6.js"><link rel="prefetch" href="/assets/js/8.6639ecf1.js"><link rel="prefetch" href="/assets/js/80.a4626fd1.js"><link rel="prefetch" href="/assets/js/81.d68b98fd.js"><link rel="prefetch" href="/assets/js/82.8069da06.js"><link rel="prefetch" href="/assets/js/83.85947d20.js"><link rel="prefetch" href="/assets/js/84.1a5f2453.js"><link rel="prefetch" href="/assets/js/86.2ea16429.js"><link rel="prefetch" href="/assets/js/87.8ba893a4.js"><link rel="prefetch" href="/assets/js/88.b92c6ebb.js"><link rel="prefetch" href="/assets/js/89.5f2cf8bb.js"><link rel="prefetch" href="/assets/js/9.dac21db2.js"><link rel="prefetch" href="/assets/js/90.1f7e8323.js"><link rel="prefetch" href="/assets/js/91.f7b05486.js"><link rel="prefetch" href="/assets/js/92.b52805fb.js"><link rel="prefetch" href="/assets/js/93.82513672.js"><link rel="prefetch" href="/assets/js/94.6d48faf9.js"><link rel="prefetch" href="/assets/js/95.c15c94ee.js"><link rel="prefetch" href="/assets/js/96.4668611c.js"><link rel="prefetch" href="/assets/js/97.7efd20e5.js"><link rel="prefetch" href="/assets/js/98.67e6aca7.js"><link rel="prefetch" href="/assets/js/99.ec48a5d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f5078b10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  é€ŸæŸ¥
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  å‰ç«¯ä½“ç³»
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  å…¶ä»–
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  é€ŸæŸ¥
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  å‰ç«¯ä½“ç³»
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  å…¶ä»–
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>0.è®¡ç®—æœºåŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3.JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.jQueryåŠå…¶å‘¨è¾¹åº“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.1MVVMæ¡†æ¶ï¼ˆVueï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.2MVVMæ¡†æ¶ï¼ˆReactï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.ç§»åŠ¨ç«¯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.0ç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.1å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>8.2 å‰ç«¯å®‰å…¨</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/1.å‰ç«¯å®‰å…¨ç»ªè®º.html" class="sidebar-link">1.å‰ç«¯å®‰å…¨ç»ªè®º</a></li><li><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html" class="active sidebar-link">2.å‰ç«¯åŸºæœ¬é˜²æŠ¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html#ğŸç¬¬ä¸€ç§-sqlæ³¨å…¥" class="sidebar-link">ğŸç¬¬ä¸€ç§ï¼šSQLæ³¨å…¥</a></li><li class="sidebar-sub-header"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html#ğŸç¬¬äºŒç§-xss" class="sidebar-link">ğŸç¬¬äºŒç§ï¼šXSS</a></li><li class="sidebar-sub-header"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html#ğŸŠç¬¬ä¸‰ç§-csrf" class="sidebar-link">ğŸŠç¬¬ä¸‰ç§ï¼šCSRF</a></li><li class="sidebar-sub-header"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html#ğŸˆç¬¬å››ç§-ddos" class="sidebar-link">ğŸˆç¬¬å››ç§ï¼šDDOS</a></li><li class="sidebar-sub-header"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/2.å‰ç«¯åŸºæœ¬é˜²æŠ¤.html#ğŸŒ¶ç¬¬äº”ç§-httpåŠ«æŒ" class="sidebar-link">ğŸŒ¶ç¬¬äº”ç§ï¼šHTTPåŠ«æŒ</a></li></ul></li><li><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/3.æ¸—é€æ”»é˜².html" class="sidebar-link">3.æ¸—é€æ”»é˜²</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.3å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.4å‰ç«¯ä»£ç è´¨é‡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.5è¿ç»´</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.6å‰ç«¯æ¶æ„</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.é¡¹ç›®</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-å‰ç«¯åŸºæœ¬é˜²æŠ¤"><a href="#_2-å‰ç«¯åŸºæœ¬é˜²æŠ¤" class="header-anchor">#</a> 2.å‰ç«¯åŸºæœ¬é˜²æŠ¤</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>webå®‰å…¨å¾ˆé‡è¦ï¼Œå› ä¸ºæµè§ˆå™¨èƒ½åšçš„äº‹æƒ…è¶Šæ¥è¶Šå¤šäº†ï¼Œè€Œä¼ ç»Ÿçš„æ”»å‡»æ‰‹æ®µå› ä¸ºç»è¿‡äº†å¾ˆé•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥é»‘å®¢ä»¬ä¹Ÿå°±è¶Šæ¥è¶Šéš¾æ”»å…‹ï¼Œä½†æ˜¯é»‘å®¢å¦‚æœå¯ä»¥é€šè¿‡ç½‘ç«™ï¼Œæ”»å…‹ä½ çš„æµè§ˆå™¨ï¼Œä¹Ÿå°±èƒ½è·å–åˆ°ä½ çš„rootæƒé™ï¼Œç„¶åæ§åˆ¶ä½ çš„æ•´ä¸ªç”µè„‘ï¼Œæ‰€ä»¥webå®‰å…¨å¾ˆé‡è¦ï¼Œæˆ‘è¿™é‡Œè®²åˆ°æ˜¯æ¯”è¾ƒæµ…çš„ç½‘ç«™çº§åˆ«é˜²æŠ¤</p></div> <h2 id="ğŸç¬¬ä¸€ç§-sqlæ³¨å…¥"><a href="#ğŸç¬¬ä¸€ç§-sqlæ³¨å…¥" class="header-anchor">#</a> ğŸç¬¬ä¸€ç§ï¼šSQLæ³¨å…¥</h2> <h3 id="_1-sqlæ³¨å…¥åŸºç¡€é˜²æŠ¤"><a href="#_1-sqlæ³¨å…¥åŸºç¡€é˜²æŠ¤" class="header-anchor">#</a> 1.SQLæ³¨å…¥åŸºç¡€é˜²æŠ¤</h3> <p>åœ¨æœåŠ¡ç«¯è¿›è¡Œé˜²èŒƒçš„ï¼Œå¾ˆå¤šæœåŠ¡å™¨çš„æ¡†æ¶éƒ½å·²ç»é˜²èŒƒçš„å¾ˆå¥½äº†</p> <p>ä¾‹å¦‚å‰ç«¯å¯ä»¥å‘åç«¯æäº¤è¡¨å•æ•°æ®ï¼Œè¿™ä¸ªéå¸¸çš„å¸¸è§ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·æ¶æ„çš„åœ¨è¡¨å•ä¸­å¡«å†™sqlä»£ç ï¼Œä¾‹å¦‚</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token string">';select * from æŸæŸè¡¨'</span>

åå°ä¸€èˆ¬éƒ½æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œè¿›è¡Œæ•°æ®åº“çš„æ‰§è¡Œï¼Œé‡åˆ°ä¸Šé¢çš„è¿™ä¸ªï¼Œä»£ç ä¸€æ‹¼æ¥ï¼Œé‡åˆ° <span class="token string">';'</span> ï¼Œå°±ä¼šæ‰§è¡Œåé¢çš„ï¼Œè¿™å°±å¾ˆå±é™©äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·å¯ä»¥æ¶æ„çš„åˆ é™¤ä½ çš„æ•°æ®åº“

ç°åœ¨ä¸€èˆ¬çš„æ¡†æ¶éƒ½æœ‰è½¬ä¹‰çš„åŠŸèƒ½ï¼Œå°†æ•æ„Ÿçš„è¯­å¥è¿›è¡Œè½¬ä¹‰ï¼Œé˜²æ­¢å¯¹æœåŠ¡å™¨è¿›è¡Œä¼¤å®³ï¼Œè¿™ä¸ªé—®é¢˜ä¸€èˆ¬éƒ½ä¸ç®—æ˜¯å¤§çš„é—®é¢˜äº†ï¼ŒæœåŠ¡å™¨éƒ½ä¼šè¿›è¡Œé˜²æŠ¤çš„

</code></pre></div><hr> <h2 id="ğŸç¬¬äºŒç§-xss"><a href="#ğŸç¬¬äºŒç§-xss" class="header-anchor">#</a> ğŸç¬¬äºŒç§ï¼šXSS</h2> <p><strong>å¦‚æœäº†è§£å‰ç«¯å’Œåç«¯æ˜¯å¦‚ä½•åšçš„ï¼Œä½ å°±èƒ½å¾ˆæ¸…æ™°çš„çœ‹åˆ°XSSçš„äº§ç”ŸåŸå› äº†</strong></p> <h3 id="_1-xssç®€ä»‹"><a href="#_1-xssç®€ä»‹" class="header-anchor">#</a> 1.XSSç®€ä»‹</h3> <p>XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡» Cross-Site Scriptï¼‰æ˜¯ä¸€ç§é€šè¿‡å¾€ç½‘é¡µé‡Œæ³¨å…¥æ¶æ„è„šæœ¬ä»£ç ï¼Œç„¶åç”¨æˆ·è®¿é—®åˆ°ç½‘é¡µï¼Œè‚¯å®šä¹Ÿå°±æŠŠæ¶æ„è„šæœ¬ä»£ç ä¸‹è½½ä¸‹æ¥äº†ï¼Œè¿™æ—¶å€™é»‘å®¢é€šè¿‡æ¶æ„è„šæœ¬ï¼Œè·å–å’Œæ§åˆ¶ç”¨æˆ·çš„ä¿¡æ¯</p> <p>æ ¹æ®ä¸Šé¢çš„æ„æ€ï¼Œæˆ‘ä»¬å¯ä»¥æ„Ÿè§‰åˆ° XSS æ˜¯ä¸€ç§æ³¨å…¥æ€§æ”»å‡»æ‰‹æ®µï¼Œè€Œæ ¹æ®æ³¨å…¥çš„ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥ç»†åˆ†ä¸º ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯</p> <ul><li>åå°„å‹ï¼ˆéæŒä¹…æ€§å‹ï¼‰XSS</li> <li>å­˜å‚¨å‹ï¼ˆæŒä¹…å‹ï¼‰XSS</li> <li>DOM-Basedå‹ XSS</li></ul> <hr> <h3 id="_2-åå°„æ€§-éæŒä¹…å‹-xss"><a href="#_2-åå°„æ€§-éæŒä¹…å‹-xss" class="header-anchor">#</a> 2.åå°„æ€§ï¼ˆéæŒä¹…å‹ï¼‰XSS</h3> <p>è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥æ¥é€ æˆä¸€æ¬¡æ€§æ”»å‡»ï¼ˆåŸç†æ˜¯åœ¨é“¾æ¥ä¸Šæ‰§è¡ŒJSä»£ç ï¼‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç¤ºä¾‹</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>xxx<span class="token punctuation">.</span>xxx<span class="token operator">/</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>â£ï¸ äº§ç”ŸåŸå› ï¼š æœåŠ¡å™¨ç›´æ¥è·å–è¯·æ±‚å‚æ•°ï¼Œå¹¶ç›´æ¥ä½¿ç”¨ï¼Œè¿™ä¸ªæ˜¯å¯¼è‡´äº§ç”Ÿè¿™ä¸ªçš„ä¸»è¦åŸå› ï¼Œå’ŒSQLæ³¨å…¥å¾ˆç±»ä¼¼</strong></p> <p><strong>ğŸ”¥ é˜²èŒƒï¼šå¯¹æ•æ„Ÿè¯æ±‡è¿›è¡Œè½¬ä¹‰</strong></p> <hr> <h3 id="_3-å­˜å‚¨å‹-æŒä¹…å‹-xss"><a href="#_3-å­˜å‚¨å‹-æŒä¹…å‹-xss" class="header-anchor">#</a> 3.å­˜å‚¨å‹ï¼ˆæŒä¹…å‹ï¼‰XSS</h3> <p>å°†æ¶æ„ä»£ç å­˜å‚¨åˆ°æ¼æ´æœåŠ¡å™¨ä¸­ï¼Œç”¨æˆ·æµè§ˆç›¸å…³é¡µé¢æ—¶å€™å°±ä¼šè¢«æ”»å‡»ï¼ˆæ¶æ„ä»£ç æ‰§è¡Œï¼‰</p> <p>ç»å¸¸å‘ç”Ÿåœ¨è¯„è®ºè¿™ç§åœºæ™¯ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¾‹å¦‚æ³¨å…¥ console.log(document.cookie)</span>
</code></pre></div><p><strong>â£ï¸ äº§ç”ŸåŸå› ï¼šè¿˜æ˜¯æœåŠ¡å™¨ç«¯æ²¡æœ‰å¤„ç†ç”¨æˆ·æäº¤çš„ä¿¡æ¯ï¼Œå°±ç›´æ¥ä½¿ç”¨ï¼Œå¯¼è‡´äº§ç”Ÿäº†é—®é¢˜</strong></p> <p><strong>ğŸ”¥ é˜²èŒƒï¼šå¯¹ç”¨æˆ·æäº¤çš„å†…å®¹ï¼Œæ•æ„Ÿéƒ¨åˆ†è¿›è¡Œè½¬ä¹‰</strong></p> <hr> <h3 id="_4-dom-basedå‹-xss"><a href="#_4-dom-basedå‹-xss" class="header-anchor">#</a> 4.DOM-Basedå‹ XSS</h3> <p>åŸºäºæµè§ˆå™¨ DOMè§£æçš„ æ”»å‡»æ–¹å¼ï¼ˆä¸éœ€è¦åç«¯å‚ä¸ï¼‰</p> <p>å¸¸è§çš„è§¦å‘åœºæ™¯ï¼šéœ€è¦ innerHtml ,outHtml, document.write æ”¹å˜çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå—åˆ° DOM-Basedå‹ XSS æ”»å‡»</p> <p>ä¸€èˆ¬å¯ä»¥æŸ¥çœ‹JSä»£ç ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä½¿ç”¨ innerHTML ç­‰ç­‰æ–¹æ³•ï¼Œæ¥çœ‹æ˜¯å¦å¯ä»¥è¿›è¡Œæ”»å‡»</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ä¸€ç§æ”»å‡»ä»£ç : å€ŸåŠ© imgæ ‡ç­¾ï¼Œä¸å†™ src æŠ¥é”™çš„æœºåˆ¶ï¼Œæ‰§è¡Œ onerror äº‹ä»¶ä¸­çš„ä»£ç ï¼Œä»è€Œå‘åŠ¨XSSæ”»å‡»</span>
<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;&quot;</span> onerror<span class="token operator">=</span><span class="token string">&quot;æ’å…¥ä»£ç &quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>img<span class="token operator">&gt;</span>

</code></pre></div><hr> <h3 id="_5-xss-payload-å’Œ-å±å®³"><a href="#_5-xss-payload-å’Œ-å±å®³" class="header-anchor">#</a> 5.XSS payload å’Œ å±å®³</h3> <p>XSSçš„æ”»å‡»æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œèƒ½å‘èµ·XSSæ”»å‡»çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º XSS payload</p> <p>XSS payload çš„å±å®³æœ‰</p> <ul><li>è·å–cookie</li> <li>è·å–å…¶ä»–ä¿¡æ¯</li> <li>ä¼ªé€ è¯·æ±‚</li> <li>XSS é’“é±¼ï¼ˆXSS + é’“é±¼ç½‘ç«™ï¼‰</li></ul> <hr> <h3 id="_6-xssé˜²å¾¡-httponly"><a href="#_6-xssé˜²å¾¡-httponly" class="header-anchor">#</a> 6.XSSé˜²å¾¡ - httpOnly</h3> <p>ç»™ cookie è®¾ç½® httpOnly ï¼Œå¯ä»¥é˜²æ­¢å®¢æˆ·ç«¯è„šæœ¬è·å–cookie</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>cookie <span class="token comment">// '' å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šæ‹¿ä¸åˆ°</span>
</code></pre></div><p>ç¼ºç‚¹å°±æ˜¯ï¼šè‡ªå·±ä¹Ÿä¸èƒ½è·å–cookieäº†ï¼Œä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³XSS</p> <p><strong>â£ï¸ æœåŠ¡ç«¯å¦‚ä½•è®¾ç½®ï¼šåªéœ€è¦åœ¨è¿”å›å¤´ä¸­è®¾ç½® Set-Cookie: æ­£å¸¸çš„cookieé”®å€¼å¯¹;httponly</strong></p> <hr> <h3 id="_7-xssé˜²å¾¡-è¾“å…¥æ£€æŸ¥"><a href="#_7-xssé˜²å¾¡-è¾“å…¥æ£€æŸ¥" class="header-anchor">#</a> 7.XSSé˜²å¾¡ - è¾“å…¥æ£€æŸ¥</h3> <p>åŸåˆ™ï¼šæ°¸è¿œä¸ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥</p> <ul><li>å‰ç«¯ï¼šæŸäº›åœºæ™¯ï¼Œåšè¾“å…¥æ ¼å¼åˆ¤æ–­ï¼ˆç™½åå•ï¼‰å’Œ è¿›è¡Œè½¬ä¹‰ï¼ˆé»‘åå•ï¼‰</li> <li>åç«¯ï¼šè½¬ä¹‰æ•æ„Ÿè¯æ±‡</li></ul> <p><strong>å‰ç«¯å’Œåç«¯éƒ½è¦è¿›è¡Œ è¾“å…¥æ£€æŸ¥</strong></p> <hr> <h3 id="_8-xssé˜²å¾¡-è¾“å‡ºæ£€æŸ¥"><a href="#_8-xssé˜²å¾¡-è¾“å‡ºæ£€æŸ¥" class="header-anchor">#</a> 8.XSSé˜²å¾¡ - è¾“å‡ºæ£€æŸ¥</h3> <p>æ ¹æ®ä¸åŒçš„åœºæ™¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†</p> <p>æ ¹æ®è¾“å‡ºåœºæ™¯ä¸åŒè¿›è¡Œåˆ†ç±»</p> <ul><li>HTMLæ ‡ç­¾ä¸­ï¼ˆHTMLæ‰§è¡Œç¯å¢ƒï¼‰</li> <li>HTMLå±æ€§ä¸­ï¼ˆHTMLæ‰§è¡Œç¯å¢ƒï¼‰</li> <li>scriptæ ‡ç­¾ä¸­ï¼ˆJSè§£æç¯å¢ƒï¼‰</li> <li>äº‹ä»¶å±æ€§ä¸­ï¼ˆJSè§£æç¯å¢ƒï¼‰</li> <li>URLä¸­ï¼ˆURLè§£æç¯å¢ƒï¼‰</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// è½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦</span>
<span class="token keyword">function</span> <span class="token function">HtmlEncode</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> hex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token string">'4'</span><span class="token punctuation">,</span><span class="token string">'5'</span><span class="token punctuation">,</span><span class="token string">'6'</span><span class="token punctuation">,</span><span class="token string">'7'</span><span class="token punctuation">,</span><span class="token string">'8'</span><span class="token punctuation">,</span><span class="token string">'9'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> preescape <span class="token operator">=</span> str<span class="token punctuation">;</span>
    <span class="token keyword">var</span> escaped <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> preescape<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> preescape<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        escaped <span class="token operator">=</span> escaped <span class="token operator">+</span> <span class="token function">escapeCharx</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> escaped<span class="token punctuation">;</span>
                    
    <span class="token keyword">function</span> <span class="token function">escapeCharx</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> found<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> thechar<span class="token operator">=</span>original<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>thechar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;&lt;br/&gt;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//newline</span>
            <span class="token keyword">case</span> <span class="token number">32</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;&amp;nbsp;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//space</span>
            <span class="token keyword">case</span> <span class="token number">34</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;quot;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//&quot;</span>
            <span class="token keyword">case</span> <span class="token number">38</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;amp;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//&amp;</span>
            <span class="token keyword">case</span> <span class="token number">39</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;#x27;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//'</span>
            <span class="token keyword">case</span> <span class="token number">47</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;#x2F;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// /</span>
            <span class="token keyword">case</span> <span class="token number">60</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;lt;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//&lt;</span>
            <span class="token keyword">case</span> <span class="token number">62</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;gt;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//&gt;</span>
            <span class="token keyword">case</span> <span class="token number">198</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;AElig;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">193</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Aacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">194</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Acirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">192</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Agrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">197</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Aring;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">195</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Atilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">196</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Auml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">199</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ccedil;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">208</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ETH;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">201</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Eacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">202</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ecirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">200</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Egrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">203</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Euml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">205</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Iacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">206</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Icirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">204</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Igrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">207</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Iuml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">209</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ntilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">211</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Oacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">212</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ocirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">210</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ograve;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">216</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Oslash;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">213</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Otilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">214</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ouml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">222</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;THORN;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">218</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Uacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">219</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ucirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">217</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Ugrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">220</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Uuml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">221</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;Yacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">225</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;aacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">226</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;acirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">230</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;aelig;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">224</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;agrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">229</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;aring;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">227</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;atilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">228</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;auml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">231</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ccedil;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">233</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;eacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">234</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ecirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">232</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;egrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">240</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;eth;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">235</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;euml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">237</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;iacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">238</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;icirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">236</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;igrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">239</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;iuml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">241</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ntilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">243</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;oacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">244</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ocirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">242</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ograve;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">248</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;oslash;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">245</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;otilde;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">246</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ouml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">223</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;szlig;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">254</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;thorn;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">250</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;uacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">251</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ucirc;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">249</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;ugrave;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">252</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;uuml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">253</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;yacute;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token number">255</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;yuml;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">162</span><span class="token operator">:</span><span class="token keyword">return</span> <span class="token string">&quot;&amp;cent;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> 
            <span class="token keyword">case</span> <span class="token string">'\r'</span><span class="token operator">:</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                found<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>found<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>thechar<span class="token operator">&gt;</span><span class="token number">127</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> c<span class="token operator">=</span>thechar<span class="token punctuation">;</span>
                <span class="token keyword">var</span> a4<span class="token operator">=</span>c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token keyword">var</span> a3<span class="token operator">=</span>c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> a2<span class="token operator">=</span>c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> a1<span class="token operator">=</span>c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token string">&quot;&amp;#x&quot;</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a1<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a2<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a3<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a4<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">;</span>        
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> original<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è½¬ä¹‰JSç‰¹æ®Šå­—ç¬¦</span>
<span class="token keyword">function</span> <span class="token function">JavaScriptEncode</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> 
     
    <span class="token keyword">var</span> hex<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token string">'4'</span><span class="token punctuation">,</span><span class="token string">'5'</span><span class="token punctuation">,</span><span class="token string">'6'</span><span class="token punctuation">,</span><span class="token string">'7'</span><span class="token punctuation">,</span><span class="token string">'8'</span><span class="token punctuation">,</span><span class="token string">'9'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token keyword">function</span> <span class="token function">changeTo16Hex</span><span class="token punctuation">(</span><span class="token parameter">charCode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\\x&quot;</span> <span class="token operator">+</span> charCode<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">function</span> <span class="token function">encodeCharx</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">var</span> found <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> thecharchar <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> thechar <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>thecharchar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'\n'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//newline</span>
            <span class="token keyword">case</span> <span class="token string">'\r'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\r&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">//Carriage return</span>
            <span class="token keyword">case</span> <span class="token string">'\''</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\'&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'&quot;'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\\&quot;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'\&amp;'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\&amp;&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'\\'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\\\&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'\t'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\t&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'\b'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\b&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'\f'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\f&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'/'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\x2F&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'&lt;'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\x3C&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'&gt;'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;\\x3E&quot;</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                found<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>found<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>thechar <span class="token operator">&gt;</span> <span class="token number">47</span> <span class="token operator">&amp;&amp;</span> thechar <span class="token operator">&lt;</span> <span class="token number">58</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//æ•°å­—</span>
                <span class="token keyword">return</span> original<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">if</span><span class="token punctuation">(</span>thechar <span class="token operator">&gt;</span> <span class="token number">64</span> <span class="token operator">&amp;&amp;</span> thechar <span class="token operator">&lt;</span> <span class="token number">91</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//å¤§å†™å­—æ¯</span>
                <span class="token keyword">return</span> original<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>thechar <span class="token operator">&gt;</span> <span class="token number">96</span> <span class="token operator">&amp;&amp;</span> thechar <span class="token operator">&lt;</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//å°å†™å­—æ¯</span>
                <span class="token keyword">return</span> original<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>        
            
            <span class="token keyword">if</span><span class="token punctuation">(</span>thechar<span class="token operator">&gt;</span><span class="token number">127</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//å¤§äº127ç”¨unicode</span>
                <span class="token keyword">var</span> c <span class="token operator">=</span> thechar<span class="token punctuation">;</span>
                <span class="token keyword">var</span> a4 <span class="token operator">=</span> c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token keyword">var</span> a3 <span class="token operator">=</span> c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> a2 <span class="token operator">=</span> c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c<span class="token operator">/</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> a1 <span class="token operator">=</span> c<span class="token operator">%</span><span class="token number">16</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token string">&quot;\\u&quot;</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a1<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a2<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a3<span class="token punctuation">]</span><span class="token operator">+</span>hex<span class="token punctuation">[</span>a4<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>        
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">changeTo16Hex</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>     
  
    <span class="token keyword">var</span> preescape <span class="token operator">=</span> str<span class="token punctuation">;</span>
    <span class="token keyword">var</span> escaped <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> preescape<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        escaped <span class="token operator">=</span> escaped <span class="token operator">+</span> <span class="token function">encodeCharx</span><span class="token punctuation">(</span>preescape<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> escaped<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><hr> <h3 id="_9-xssè‡ªåŠ¨åŒ–å°è£…å±‚é˜²æŠ¤"><a href="#_9-xssè‡ªåŠ¨åŒ–å°è£…å±‚é˜²æŠ¤" class="header-anchor">#</a> 9.XSSè‡ªåŠ¨åŒ–å°è£…å±‚é˜²æŠ¤</h3> <p>æ¢ç´¢ä¸­...</p> <hr> <h2 id="ğŸŠç¬¬ä¸‰ç§-csrf"><a href="#ğŸŠç¬¬ä¸‰ç§-csrf" class="header-anchor">#</a> ğŸŠç¬¬ä¸‰ç§ï¼šCSRF</h2> <h3 id="_1-å®ç°åŸç†"><a href="#_1-å®ç°åŸç†" class="header-anchor">#</a> 1.å®ç°åŸç†</h3> <blockquote><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross Site Request Forgeryï¼‰</p></blockquote> <p>å¦‚æœä½ ç™»å½•äº†æŸä¸ªç½‘ç«™ï¼ˆç½‘ç«™ä¸ºäº†è®°å½•ä½ çš„ç™»å½•çŠ¶æ€ï¼Œè‚¯å®šä¼šè¿”å›ç»™ä½ å”¯ä¸€æ ‡è¯†ï¼Œè¿™é‡Œå°±å½“æ˜¯cookieå§ï¼‰ï¼Œç„¶åCSRFå°±æ˜¯é€šè¿‡è¯±å¯¼ä½ ï¼ˆæ€ä¹ˆè¯±å¯¼ä½ æ‡‚å¾—ï¼Œæˆ‘å°±ä¸å¼€è½¦äº†ï¼Œå‘œå‘œå‘œ...ï¼‰æ‰“å¼€æŸä¸ªç½‘ç«™ï¼Œå¦‚æœä½ æ‰“å¼€äº†ç½‘ç«™ï¼Œé‚£ä¹ˆè‚¯å®šå°±èƒ½å‘é€é¡µé¢å’ŒJSæ¥åˆ°ä½ çš„ç”µè„‘ä¸Šï¼Œè¿™æ ·å°±èƒ½é€šè¿‡JSæ‰§è¡Œï¼Œè·å–ä½ çš„ç™»å½•çŠ¶æ€ï¼Œä¼ªé€ æˆä½ ï¼Œè¿›è¡Œè½¬è´¦ï¼Œè´­ç‰©ç­‰æ“ä½œ</p> <ul><li>éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼šä½ ç‚¹å¼€äº†è¯±å¯¼ç½‘ç«™</li> <li>ä½ ç™»å½•äº†é‡è¦çš„ç½‘ç«™ï¼ˆä¾‹å¦‚è´­ç‰©ç½‘ç«™ç­‰ï¼‰</li></ul> <hr> <h3 id="_2-csrfé˜²å¾¡"><a href="#_2-csrfé˜²å¾¡" class="header-anchor">#</a> 2.CSRFé˜²å¾¡</h3> <ul><li><strong>ç”¨æˆ·ä¸çŸ¥æƒ…</strong>ï¼šä½¿ç”¨éªŒè¯ç ï¼ˆçŸ­ä¿¡ï¼Œå›¾ç‰‡éªŒè¯ç ç­‰ç­‰ï¼Œè¿™äº›é»‘å®¢è‚¯å®šä¸çŸ¥é“äº†ï¼‰ï¼ˆå½±å“ç”¨æˆ·ä½“éªŒï¼Œä¸å¸¸ç”¨ï¼ŒéªŒè¯ç ç»å¸¸ç”¨äºé˜²å¾¡DDOSæ”»å‡»ï¼‰</li> <li><strong>è·¨ç«™è¯·æ±‚</strong>ï¼šä»ä¼ªé€ è¯·æ±‚æºå¤´æ¥åˆ†æï¼šä¼ªé€ è¯·æ±‚çš„åŸŸåå¯èƒ½å’Œæ­£å¸¸åŸŸåä¸ä¸€æ ·ï¼ˆè·¨åŸŸäº†ï¼‰ï¼Œä¾‹å¦‚ æ­£å¸¸æ·˜å®æ”¯ä»˜ï¼Œéœ€è¦åœ¨ taobao.com ä¸‹è¿›è¡Œï¼Œè€Œè·¨ç«™ä¼ªé€ è¯·æ±‚ï¼Œå¯èƒ½ä¸æ˜¯ taobao.com åŸŸåä¸‹è¿›è¡Œçš„æ”¯ä»˜è¯·æ±‚ | <strong>é˜²å¾¡ï¼šä½¿ç”¨ referer éªŒè¯ï¼ˆåå°requust.header.referer è¿›è¡ŒéªŒè¯ï¼‰</strong>ï¼Œä¹Ÿä¸å¸¸ç”¨ï¼Œå› ä¸ºä¸å¯é ï¼Œå¯èƒ½è¢«ç¯¡æ”¹</li> <li>å‚æ•°ä¼ªé€ ï¼š<strong>tokenï¼ˆä¸»æµçš„é˜²å¾¡CSRFæ”»å‡»çš„ä¸€ç§æ‰‹æ®µï¼‰</strong></li></ul> <hr> <p><strong>refererç¤ºä¾‹ï¼ˆä¸»è¦æ˜¯åç«¯éªŒè¯ï¼‰</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> referer <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>header<span class="token punctuation">.</span>referer

<span class="token comment">// åˆ©ç”¨æ­£åˆ™åˆ¤æ–­ å‘é€è¯·æ±‚çš„æ¥å£ æ˜¯å¦æ˜¯è·¨ç«™äº†</span>

</code></pre></div><hr> <p><strong>Tokené˜²å¾¡CSRFæ”»å‡»</strong></p> <blockquote><p>å‰ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Štokenï¼Œåç«¯é€šè¿‡ç®—æ³•éªŒè¯token çš„æ­£ç¡®æ€§</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// å‰ç«¯ä¼ é€’ç»™åç«¯token</span>

<span class="token comment">// åç«¯ä¹Ÿç”Ÿæˆtoken</span>

<span class="token comment">// ä¸¤è€…è¿›è¡Œæ¯”è¾ƒ</span>

</code></pre></div><hr> <h3 id="_3-xsså’Œcsrfçš„ç»“åˆæ”»å‡»-xssè •è™«"><a href="#_3-xsså’Œcsrfçš„ç»“åˆæ”»å‡»-xssè •è™«" class="header-anchor">#</a> 3.XSSå’ŒCSRFçš„ç»“åˆæ”»å‡»ï¼ˆXSSè •è™«ï¼‰</h3> <blockquote><p>å¦‚æœä½ çš„ç½‘ç«™å¯ä»¥è¢«æ³¨å…¥æ”»å‡»ï¼ˆXSSï¼‰ï¼Œé‚£ä¹ˆé»‘å®¢éƒ½ä¸éœ€è¦è¯±å¯¼ä½ ç‚¹å‡»ç½‘ç«™äº†ï¼Œç›´æ¥å°±å¯ä»¥æ³¨å…¥æ‰§è¡Œæ”»å‡»ä»£ç äº†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒéªŒè¯ç æ˜¯æœ€ä¸ºå¯é çš„ï¼ˆä½†æ˜¯è¿˜å¯ä»¥è¢«æš´åŠ›ç ´è§£æ‰ï¼‰</p></blockquote> <p>XSSè •è™«ä»‹ç»ï¼šé»‘å®¢åœ¨åšå®¢ä¸Šå‘è¡¨ä¸€ä¸ªXSSæ”»å‡»ä»£ç ï¼Œæ”»å‡»ä»£ç çš„å†…å®¹æ˜¯ï¼Œè¯±å¯¼ä½ å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ˆCSRFï¼‰ï¼Œä¹Ÿå‘é€ä¸€ä¸ªå¸–å­ï¼Œå†…å®¹ä¹Ÿå°±æ˜¯ä½ å‘çš„XSSæ”»å‡»ä»£ç ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ï¼Œä¸€ä¼ äºŒï¼ŒäºŒä¼ å››çš„æ‹“å±•ï¼ˆç™¾åº¦è´´å§ï¼Œå¾®åšéƒ½æ›¾ä¸­è¿‡æ‹›ï¼‰</p> <hr> <h2 id="ğŸˆç¬¬å››ç§-ddos"><a href="#ğŸˆç¬¬å››ç§-ddos" class="header-anchor">#</a> ğŸˆç¬¬å››ç§ï¼šDDOS</h2> <h3 id="_1-ddosæ”»å‡»ä»‹ç»"><a href="#_1-ddosæ”»å‡»ä»‹ç»" class="header-anchor">#</a> 1.DDOSæ”»å‡»ä»‹ç»</h3> <blockquote><p>DDOSï¼ˆåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ Distributed Denial of serviceï¼‰ï¼šé€šè¿‡å¤§é‡ä¸æ­£å¸¸çš„è®¿é—®ï¼Œè€—å°½ï¼ˆå å°½ï¼‰æˆ‘ä»¬æœåŠ¡å™¨çš„èµ„æºï¼Œä½¿å¾—æˆ‘ä»¬çš„æœåŠ¡æ— æ³•æ­£å¸¸è¿è¡Œï¼ˆå½“æ”»å‡»æµé‡è¶…è¿‡äº†æœåŠ¡çš„ç½‘ç»œè®¾å¤‡çš„æé™æˆ–å¸¦å®½çš„æœ€å¤§è´Ÿè·æ—¶ï¼Œç½‘ç«™æœåŠ¡å°†ç˜«ç—ªå¯¼è‡´æ— æ³•æ­£å¸¸è¿ä½œï¼‰</p></blockquote> <hr> <h3 id="_2-ddosæ”»å‡»é˜²å¾¡"><a href="#_2-ddosæ”»å‡»é˜²å¾¡" class="header-anchor">#</a> 2.DDOSæ”»å‡»é˜²å¾¡</h3> <p><strong>é˜²å¾¡æ‰‹æ®µä¸€ï¼šéªŒè¯ç </strong></p> <p>éªŒè¯ç æ˜¯æˆ‘ä»¬åœ¨äº’è”ç½‘ååˆ†å¸¸è§çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä¸å¾—ä¸è¯´éªŒè¯ç æ˜¯èƒ½å¤Ÿæœ‰æ•ˆåœ°é˜²æ­¢å¤šæ¬¡é‡å¤è¯·æ±‚çš„è¡Œä¸ºã€‚ç›®å‰æ¥è¯´ï¼Œéšç€éªŒè¯ç æ–¹å¼çš„ä¸°å¯ŒåŒ–ï¼Œå¯¼è‡´é»‘å®¢ä»¬æ²¡æœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆçš„æ–¹å¼æ¥è·å–å’Œè¯†åˆ«éªŒè¯ç ã€‚ä½†ç”±äºéªŒè¯ç ä¼šå½±å“åˆ°ç”¨æˆ·ä½“éªŒï¼Œå› æ­¤éªŒè¯ç åªæœ‰åœ¨æ¯”è¾ƒé‡è¦çš„å…¥å£æ‰ä¼šä½¿ç”¨ï¼Œå¦‚è½¬è´¦å’Œç™»é™†çš„åœºæ™¯ã€‚</p> <hr> <p><strong>é˜²å¾¡æ‰‹æ®µäºŒï¼šé™åˆ¶è¯·æ±‚é¢‘ç‡ï¼ˆratelimitï¼‰</strong></p> <p>é™åˆ¶è¯·æ±‚é¢‘ç‡æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„é’ˆå¯¹ DDOS æ”»å‡»çš„é˜²å¾¡æªæ–½ã€‚å…¶åŸç†ä¸ºè®¾ç½®æ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚é¢‘ç‡çš„é™åˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡ä¸€äº›æ ‡è¯†ï¼ˆå¦‚ IP ä¸ Cookieï¼‰æ¥å®šä½ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå¦‚æœè¯¥å®¢æˆ·ç«¯çš„è¯·æ±‚åœ¨ä¸€å®šæ—¶é—´å†…è¿‡äºé¢‘ç¹ã€‚åˆ™å¯¹è¯¥å®¢æˆ·ç«¯ä¹‹åçš„è¯·æ±‚éƒ½é‡å®šå‘åˆ°ä¸€ä¸ªå‡ºé”™çš„é¡µé¢æˆ–è€…å°æ€ç›¸å…³ IPã€‚</p> <p>å½“ç„¶è®¸å¤šæ¡†æ¶éƒ½ä¼šæœ‰ç›¸åº”åœ°é™åˆ¶è¯·æ±‚é¢‘ç‡çš„å·¥å…·åŒ…ï¼Œå¦‚ koa æ¡†æ¶ä¾¿å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›ï¼š</p> <ul><li><a href="https://github.com/cnpm/koa-limit" target="_blank" rel="noopener noreferrer">koa-limit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/koajs/ratelimit" target="_blank" rel="noopener noreferrer">koa-ratelimit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <p><strong>é˜²å¾¡æ‰‹æ®µä¸‰ï¼šæ‰©å®¹åŠ å¸¦å®½</strong></p> <p>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¢åŠ æœºå™¨å¢åŠ æœåŠ¡å¸¦å®½ã€‚åªè¦è¶…è¿‡äº†æ”»å‡»æµé‡ä¾¿å¯ä»¥é¿å…æœåŠ¡ç˜«ç—ªã€‚åœ¨åŒåä¸€æ´»åŠ¨æˆ–è€…12306 æŠ¢è½¦ç¥¨ç­‰åœºæ™¯æ—¶ï¼Œç½‘ç«™æœåŠ¡éƒ½ä¼šå¯¹è‡ªå·±çš„æœºå™¨è¿›è¡Œæ‰©å®¹å’Œæé«˜å¸¦å®½ã€‚ç„¶è€Œä¸ºäº†é¿å…ç”±äºä½¿ç”¨è¿‡å¤šæœºå™¨å¯¼è‡´æˆæœ¬å¤ªé«˜ä¸”æµªè´¹çš„æƒ…å†µã€‚é€šå¸¸æ¥è¯´éƒ½æ˜¯æ ¹æ®ç½‘ç«™æ´»åŠ¨å’Œè¯·æ±‚æƒ…å†µæ¥å®æ–½ç›¸åº”æ‰©å®¹æ“ä½œã€‚</p> <hr> <p><strong>é˜²å¾¡æ‰‹æ®µå››ï¼šå…¶ä»–çš„æ–¹æ³•</strong></p> <ul><li>è®¾ç½®è‡ªå·±çš„ä¸šåŠ¡ä¸ºåˆ†å¸ƒå¼æœåŠ¡ï¼Œé˜²æ­¢å•ç‚¹å¤±æ•ˆ</li> <li>ä½¿ç”¨ä¸»æµäº‘ç³»ç»Ÿå’Œ CDNï¼ˆäº‘å’Œ CDN å…¶è‡ªèº«æœ‰ DDOS çš„é˜²èŒƒä½œç”¨ï¼‰</li> <li>ä¼˜åŒ–èµ„æºä½¿ç”¨æé«˜ web server çš„è´Ÿè½½èƒ½åŠ›</li></ul> <hr> <p><strong>æ›´å¤šé˜…è¯»</strong></p> <ul><li><a href="https://www.zhihu.com/question/19581905" target="_blank" rel="noopener noreferrer">äº’è”ç½‘åˆ›ä¸šå…¬å¸å¦‚ä½•é˜²å¾¡ DDOS æ”»å‡»ï¼Ÿ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.leiphone.com/news/201509/9zGlIDvLhwguqOtg.html" target="_blank" rel="noopener noreferrer">æ¼«ç”»å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯DDoSæ”»å‡»ï¼Ÿ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <h2 id="ğŸŒ¶ç¬¬äº”ç§-httpåŠ«æŒ"><a href="#ğŸŒ¶ç¬¬äº”ç§-httpåŠ«æŒ" class="header-anchor">#</a> ğŸŒ¶ç¬¬äº”ç§ï¼šHTTPåŠ«æŒ</h2> <h3 id="_1-httpåŠ«æŒä»¥åŠè§£å†³æ–¹æ³•"><a href="#_1-httpåŠ«æŒä»¥åŠè§£å†³æ–¹æ³•" class="header-anchor">#</a> 1.HTTPåŠ«æŒä»¥åŠè§£å†³æ–¹æ³•</h3> <blockquote><p>ç”¨æˆ· - æœåŠ¡å™¨ï¼Œå…¶å®ä¸æ˜¯è¿™æ ·ç®€å•çš„å…³ç³»ï¼Œä¸­é—´è¿˜æœ‰å¤¹æ‚ç€è¿è¥å•†ï¼ˆè”é€šï¼Œç”µä¿¡ç­‰ï¼‰ï¼Œä»–ä»¬è½¬å‘æˆ‘ä»¬çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å…¶ä¸­ä½¿ç”¨çš„å¤§å¤šæ•°æ˜¯HTTPåè®®ï¼Œè¿™ä¸ªåè®®æ˜¯æ˜æ–‡çš„ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¼šè¢«åŠ«æŒï¼Œç„¶ååŠ å…¥ä¸€äº›å¹¿å‘Šï¼Œæˆ–è€…æ”»å‡»ä»£ç </p></blockquote> <ul><li><a href="https://juejin.im/post/59e4c02151882578d02f4aca" target="_blank" rel="noopener noreferrer">è°ˆè°ˆ HTTPS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zhukunpenglinyutong.github.io/1.quickcheck/3.%E8%BF%90%E7%BB%B4/5.%E5%85%B6%E4%BB%96.html#_1-http%E5%8D%8F%E8%AE%AE-%E5%8F%98-https%EF%BC%88%E7%94%B3%E8%AF%B7%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6%EF%BC%89" target="_blank" rel="noopener noreferrer">ç»™ç½‘ç«™æ•´ä¸ŠHTTPS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/2.note/8.2 å‰ç«¯å®‰å…¨/1.å‰ç«¯å®‰å…¨ç»ªè®º.html" class="prev">
        1.å‰ç«¯å®‰å…¨ç»ªè®º
      </a></span> <span class="next"><a href="/2.note/8.2 å‰ç«¯å®‰å…¨/3.æ¸—é€æ”»é˜².html">
        3.æ¸—é€æ”»é˜²
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f2516ed4.js" defer></script><script src="/assets/js/2.b5be6ff6.js" defer></script><script src="/assets/js/85.a7a2253e.js" defer></script><script src="/assets/js/3.87d40112.js" defer></script>
  </body>
</html>
