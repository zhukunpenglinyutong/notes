<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.JavaScript深入 | Notes</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="知识速查（了不起的个人工具库）">
    <link rel="preload" href="/assets/css/0.styles.f5078b10.css" as="style"><link rel="preload" href="/assets/js/app.a28e9894.js" as="script"><link rel="preload" href="/assets/js/2.b5be6ff6.js" as="script"><link rel="preload" href="/assets/js/42.d39b5fdb.js" as="script"><link rel="preload" href="/assets/js/3.87d40112.js" as="script"><link rel="prefetch" href="/assets/js/10.35e5e2b7.js"><link rel="prefetch" href="/assets/js/100.f00dc9e9.js"><link rel="prefetch" href="/assets/js/101.f9639423.js"><link rel="prefetch" href="/assets/js/102.c5475d9e.js"><link rel="prefetch" href="/assets/js/103.da7ae3cf.js"><link rel="prefetch" href="/assets/js/104.665c45d5.js"><link rel="prefetch" href="/assets/js/105.e176f192.js"><link rel="prefetch" href="/assets/js/106.c8828b80.js"><link rel="prefetch" href="/assets/js/107.c4340427.js"><link rel="prefetch" href="/assets/js/108.719b7c9c.js"><link rel="prefetch" href="/assets/js/109.87ea0b38.js"><link rel="prefetch" href="/assets/js/11.229c04a5.js"><link rel="prefetch" href="/assets/js/110.d2eeb993.js"><link rel="prefetch" href="/assets/js/111.d3bcb22c.js"><link rel="prefetch" href="/assets/js/112.72258ddc.js"><link rel="prefetch" href="/assets/js/12.0b67de50.js"><link rel="prefetch" href="/assets/js/13.c38d4c68.js"><link rel="prefetch" href="/assets/js/14.ac4bdd84.js"><link rel="prefetch" href="/assets/js/15.f33def02.js"><link rel="prefetch" href="/assets/js/16.9f8d4d27.js"><link rel="prefetch" href="/assets/js/17.16c18b67.js"><link rel="prefetch" href="/assets/js/18.36c1d685.js"><link rel="prefetch" href="/assets/js/19.05742e9a.js"><link rel="prefetch" href="/assets/js/20.0423b7e1.js"><link rel="prefetch" href="/assets/js/21.70845d4e.js"><link rel="prefetch" href="/assets/js/22.9fe53ad0.js"><link rel="prefetch" href="/assets/js/23.fe054a0e.js"><link rel="prefetch" href="/assets/js/24.48aca476.js"><link rel="prefetch" href="/assets/js/25.d873c7a2.js"><link rel="prefetch" href="/assets/js/26.7154f1f5.js"><link rel="prefetch" href="/assets/js/27.09768527.js"><link rel="prefetch" href="/assets/js/28.bfaa30dd.js"><link rel="prefetch" href="/assets/js/29.5ebfc24c.js"><link rel="prefetch" href="/assets/js/30.eeb8c354.js"><link rel="prefetch" href="/assets/js/31.88e796c1.js"><link rel="prefetch" href="/assets/js/32.4bb414c3.js"><link rel="prefetch" href="/assets/js/33.9925562b.js"><link rel="prefetch" href="/assets/js/34.d89f5cb4.js"><link rel="prefetch" href="/assets/js/35.85ad812c.js"><link rel="prefetch" href="/assets/js/36.12266af3.js"><link rel="prefetch" href="/assets/js/37.ebd37158.js"><link rel="prefetch" href="/assets/js/38.b063f9b2.js"><link rel="prefetch" href="/assets/js/39.eeb074c2.js"><link rel="prefetch" href="/assets/js/4.02bf3d71.js"><link rel="prefetch" href="/assets/js/40.cb8dfeba.js"><link rel="prefetch" href="/assets/js/41.31231b50.js"><link rel="prefetch" href="/assets/js/43.e3cc9b3d.js"><link rel="prefetch" href="/assets/js/44.18be67b1.js"><link rel="prefetch" href="/assets/js/45.2008d378.js"><link rel="prefetch" href="/assets/js/46.97fe3010.js"><link rel="prefetch" href="/assets/js/47.69114193.js"><link rel="prefetch" href="/assets/js/48.14215855.js"><link rel="prefetch" href="/assets/js/49.7eb885ee.js"><link rel="prefetch" href="/assets/js/5.d572fee8.js"><link rel="prefetch" href="/assets/js/50.1e65a98b.js"><link rel="prefetch" href="/assets/js/51.11130cf1.js"><link rel="prefetch" href="/assets/js/52.e37db22c.js"><link rel="prefetch" href="/assets/js/53.6e95c85c.js"><link rel="prefetch" href="/assets/js/54.dd9a4e29.js"><link rel="prefetch" href="/assets/js/55.9776ad3c.js"><link rel="prefetch" href="/assets/js/56.1bee5f73.js"><link rel="prefetch" href="/assets/js/57.ef85c37a.js"><link rel="prefetch" href="/assets/js/58.b566d49a.js"><link rel="prefetch" href="/assets/js/59.5fb6bca7.js"><link rel="prefetch" href="/assets/js/6.68b83dc0.js"><link rel="prefetch" href="/assets/js/60.498fd1e2.js"><link rel="prefetch" href="/assets/js/61.a402dc0f.js"><link rel="prefetch" href="/assets/js/62.639a2732.js"><link rel="prefetch" href="/assets/js/63.f9d81c98.js"><link rel="prefetch" href="/assets/js/64.66659b4e.js"><link rel="prefetch" href="/assets/js/65.d4b444c4.js"><link rel="prefetch" href="/assets/js/66.e4b0c082.js"><link rel="prefetch" href="/assets/js/67.64f606c7.js"><link rel="prefetch" href="/assets/js/68.11beb140.js"><link rel="prefetch" href="/assets/js/69.2bdb150b.js"><link rel="prefetch" href="/assets/js/7.9ba505b6.js"><link rel="prefetch" href="/assets/js/70.22a28ed0.js"><link rel="prefetch" href="/assets/js/71.5225f919.js"><link rel="prefetch" href="/assets/js/72.16ac4f39.js"><link rel="prefetch" href="/assets/js/73.85d2131d.js"><link rel="prefetch" href="/assets/js/74.6f083167.js"><link rel="prefetch" href="/assets/js/75.95ff534d.js"><link rel="prefetch" href="/assets/js/76.c51ffffe.js"><link rel="prefetch" href="/assets/js/77.7588cc7a.js"><link rel="prefetch" href="/assets/js/78.7c05a122.js"><link rel="prefetch" href="/assets/js/79.0eb7a7d6.js"><link rel="prefetch" href="/assets/js/8.6639ecf1.js"><link rel="prefetch" href="/assets/js/80.a2b1574a.js"><link rel="prefetch" href="/assets/js/81.503dd8b0.js"><link rel="prefetch" href="/assets/js/82.bbfabd85.js"><link rel="prefetch" href="/assets/js/83.aa2ce4eb.js"><link rel="prefetch" href="/assets/js/84.88b65ec1.js"><link rel="prefetch" href="/assets/js/85.7308a591.js"><link rel="prefetch" href="/assets/js/86.8cfe8f13.js"><link rel="prefetch" href="/assets/js/87.09937984.js"><link rel="prefetch" href="/assets/js/88.a861e5dd.js"><link rel="prefetch" href="/assets/js/89.59cc03bf.js"><link rel="prefetch" href="/assets/js/9.dac21db2.js"><link rel="prefetch" href="/assets/js/90.f085f31b.js"><link rel="prefetch" href="/assets/js/91.eca0b451.js"><link rel="prefetch" href="/assets/js/92.5d212955.js"><link rel="prefetch" href="/assets/js/93.4e6f6fab.js"><link rel="prefetch" href="/assets/js/94.8256448b.js"><link rel="prefetch" href="/assets/js/95.a78f6d18.js"><link rel="prefetch" href="/assets/js/96.4668611c.js"><link rel="prefetch" href="/assets/js/97.30f8e4a6.js"><link rel="prefetch" href="/assets/js/98.6891e985.js"><link rel="prefetch" href="/assets/js/99.ec48a5d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f5078b10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  速查
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  前端体系
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  其他
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/1.quickcheck/" class="nav-link">
  速查
</a></div><div class="nav-item"><a href="/2.note/" class="nav-link router-link-active">
  前端体系
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  其他
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>0.计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3.JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2.note/3.JavaScript/1.JavaScript根基.html" class="sidebar-link">1.JavaScript根基</a></li><li><a href="/2.note/3.JavaScript/2.JavaScript深入.html" class="active sidebar-link">2.JavaScript深入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐶预编译" class="sidebar-link">🐶预编译</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐹作用域-作用域链-主要对于函数而言" class="sidebar-link">🐹作用域，作用域链（主要对于函数而言）</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐼闭包-对于函数而言" class="sidebar-link">🐼闭包（对于函数而言）</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐮立即执行函数-iief" class="sidebar-link">🐮立即执行函数（IIEF）</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🙉原型-原型链" class="sidebar-link">🙉原型，原型链</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐯this指向详解" class="sidebar-link">🐯this指向详解</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐸var-let-const-function-到底区别在哪里" class="sidebar-link">🐸var let const function 到底区别在哪里？</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐙内存回收机制" class="sidebar-link">🐙内存回收机制</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐔event-loop" class="sidebar-link">🐔Event Loop</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🐣位操作符" class="sidebar-link">🐣位操作符</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#🦄web中的编码和转义" class="sidebar-link">🦄Web中的编码和转义</a></li><li class="sidebar-sub-header"><a href="/2.note/3.JavaScript/2.JavaScript深入.html#📚参考列表" class="sidebar-link">📚参考列表</a></li></ul></li><li><a href="/2.note/3.JavaScript/3.JavaScript应用.html" class="sidebar-link">3.JavaScript应用</a></li><li><a href="/2.note/3.JavaScript/4.ES6.html" class="sidebar-link">4.ES6</a></li><li><a href="/2.note/3.JavaScript/5.Underscore库源码分析.html" class="sidebar-link">5.Underscore库源码分析</a></li><li><a href="/2.note/3.JavaScript/6.Lodashjs库源码分析.html" class="sidebar-link">6.Lodashjs库源码分析</a></li><li><a href="/2.note/3.JavaScript/7.函数式编程.html" class="sidebar-link">7.函数式编程</a></li><li><a href="/2.note/3.JavaScript/8.TypeScript.html" class="sidebar-link">8.TypeScript</a></li><li><a href="/2.note/3.JavaScript/Cocos2d.html" class="sidebar-link">Cocos2d</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.jQuery及其周边库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.1MVVM框架（Vue）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.2MVVM框架（React）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.移动端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.0网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.1前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.2 前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.3前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.4前端代码质量</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.5运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.6前端架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.项目</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-javascript深入"><a href="#_2-javascript深入" class="header-anchor">#</a> 2.JavaScript深入</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>JavaScript基础用的差不多了之后，就不要吃老本了，要多去探索</p> <p>本篇就是对JavaScript这们语言的探索，说实话，有用么</p> <p>我明确的告诉你，探索一两个没有用，但是探索十几个之后，就有大用了，自己试一下吧</p></div> <hr> <h2 id="🐶预编译"><a href="#🐶预编译" class="header-anchor">#</a> 🐶预编译</h2> <h3 id="_1-javascript运行三部曲-语法分析-预编译-解释执行"><a href="#_1-javascript运行三部曲-语法分析-预编译-解释执行" class="header-anchor">#</a> 1.JavaScript运行三部曲：语法分析，预编译，解释执行</h3> <p><strong>JavaScript是 单线程，解释性语言，所谓解释性语言就是读一句，执行一句，但是JavaScript还没那么解释性，而是在这之前还有几个步骤</strong></p> <ul><li>第一步：语法分析 ，此过程会通篇扫描一遍，看看是否有语法错误</li> <li>第二步：预编译，此过程 会把变量和函数提升，并给变量赋初始值
<ul><li>函数提升：直接把函数提升到最前面执行</li> <li>变量提升：声明提升，例如 let a = 10, 只提升 let a 这一步，赋值的那一步不进行提升</li></ul></li> <li>第三步：解释执行，这才到了读一行，解释一行的地步</li></ul> <p><strong>备注：暗示全局变量，任何变量如果未经声明就赋值，此变量就为全局对象所有（一切声明的变量都是window的属性）</strong></p> <hr> <h3 id="_2-函数预编译详解-ao-activation-object"><a href="#_2-函数预编译详解-ao-activation-object" class="header-anchor">#</a> 2.函数预编译详解（AO Activation Object）</h3> <ul><li>第一步：创建AO对象（Activation Object），这就是我们理解的作用域，也叫执行期上下文</li> <li>第二步：找形参和变量声明，将变量和形参名作为AO属性名，值为undefined</li> <li>第三步：将实参值和形参统一</li> <li>第四步：在函数体里面找函数声明，名称作为AO属性名，值赋予函数体</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ********** 示例一 **********</span>

<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// function a() {}</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123</span>
    <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123</span>
    <span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// function () {}</span>
    <span class="token keyword">function</span> <span class="token function">d</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 函数执行前的AO情况
 * 
 * AO {
 *  a: function a() {}
 *  b: undefined
 *  d: function d () {}
 * }
 * 
 */</span>



<span class="token comment">// ********** 示例二 **********</span>

<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// function a () {}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">234</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 234</span>
    a <span class="token operator">=</span> <span class="token number">123</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123</span>
    <span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">var</span> a
    b <span class="token operator">=</span> <span class="token number">234</span>
    <span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// function () {}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 函数执行前的AO情况
 * 
 * AO {
 *  a: function a () {}
 *  b: undefined
 * }
 * 
 */</span>

</code></pre></div><hr> <h3 id="_3-全局预编译-go-global-object"><a href="#_3-全局预编译-go-global-object" class="header-anchor">#</a> 3.全局预编译（GO Global Object）</h3> <ul><li>第一步：创建GO对象（Global Object），这就是我们用的window</li> <li>第二步：变量声明，将变量名作为GO属性名，值为undefined</li> <li>第三步：找函数声明，名称作为GO属性名，值赋予函数体</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ********** 示例一 **********</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token comment">// function test () {...}</span>

<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token comment">// function test () {}</span>
    <span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token number">234</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token comment">// 234</span>
    <span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token number">123</span>

<span class="token comment">/**
 * 全局代码执行前的GO情况
 * 
 * GO {
 *  test: function test () {...}
 * }
 * 
 */</span>

<span class="token comment">/**
 * 函数执行前的AO情况
 * 
 * AO {
 *  test: function test () {}
 * }
 * 
 */</span>


<span class="token comment">// ********** 示例二 **********</span>

global <span class="token operator">=</span> <span class="token number">100</span>

<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
    global <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span> <span class="token comment">// 200</span>
    <span class="token keyword">var</span> global <span class="token operator">=</span> <span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">// ********** 示例三 **********</span>

<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
    c <span class="token operator">=</span> <span class="token number">234</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// 234</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// 234</span>


<span class="token comment">// ********** 示例四 **********</span>

<span class="token keyword">function</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> foo
    foo <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">11</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// function foo () {}</span>


<span class="token comment">// ********** 示例五 **********</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 11</span>

<span class="token keyword">function</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">11</span>
    <span class="token keyword">return</span> foo
<span class="token punctuation">}</span>

</code></pre></div><p><strong>❣️ 如果AO用一个属性，没有的话，会上GO上继续找，没有才返回undefined</strong></p> <hr> <h2 id="🐹作用域-作用域链-主要对于函数而言"><a href="#🐹作用域-作用域链-主要对于函数而言" class="header-anchor">#</a> 🐹作用域，作用域链（主要对于函数而言）</h2> <p><strong>JavaScript原来只有全局作用域，和函数作用域</strong></p> <h3 id="_1-执行期上下文"><a href="#_1-执行期上下文" class="header-anchor">#</a> 1.执行期上下文</h3> <ul><li>当函数执行时候，会创建一个 执行期上下文（AO）的内部对象，这里面定义了函数执行的环境</li> <li>多次调用一个函数，会导致创建多个执行上下文（AO），并且每个AO都是独一无二的</li> <li>当函数执行完毕，执行期上下文被销毁</li></ul> <hr> <h3 id="_2-作用域基础解释"><a href="#_2-作用域基础解释" class="header-anchor">#</a> 2.作用域基础解释</h3> <ul><li>[ [ scope ] ]：每个JavaScript函数都是一个对象，有一些属性只能JavaScript引擎存取， [ [ scope ] ] 就是其中的一个</li> <li>[ [ scope ] ] 里面就是作用域集合（其中存储了执行期上下文集合）</li></ul> <img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/3.JavaScript/3.JavaScript%E6%B7%B1%E5%85%A5/1.%E4%BD%9C%E7%94%A8%E5%9F%9F.png"> <hr> <h3 id="_3-作用域链基础解释-vo"><a href="#_3-作用域链基础解释-vo" class="header-anchor">#</a> 3.作用域链基础解释（VO）</h3> <ul><li>作用域链：[ [ scope ] ] 中所存储的执行期上下文对象的集合，这个集合呈链式结构，我们把这个链式结构叫做作用域链</li></ul> <p><strong>查找变量：从作用域链的顶端依次向下查找，创建作用域是从头部创建，消除的时候，也是从头部消除，先进先出</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ******* 示例一 *******</span>

<span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">234</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> glob <span class="token operator">=</span> <span class="token number">100</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * a 定义 [[scope]] 0 --&gt; GO
 * 
 * a 执行 [[scope]] 0 --&gt; a的AO
 *                 1 --&gt; GO
 * 
 * b 定义 [[scope]] 0 --&gt; a的AO
 *                 1 --&gt; GO
 * 
 * b 执行 [[scope]] 0 --&gt; b的AO
 *                 1 --&gt; a的AO
 *                 2 --&gt; GO
 * 
 * b 执行完毕 断开与 b的AO 这个对象的引用（会被标记清除删除掉，涉及到新生代，老生带的一些规则...）
 * 
 * a 执行完毕 断开与 a的AO 这个对象的引用
 * 
 */</span>


<span class="token comment">// ******* 示例二 *******</span>

<span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">function</span> <span class="token function">c</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
        <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * a 定义 [[scope]] 0 --&gt; GO
 * 
 * a 执行 [[scope]] 0 --&gt; a 的 AO
 *                 1 --&gt; GO
 * 
 * b 定义 [[scope]] 0 --&gt; a 的 AO（引用）
 *                 1 --&gt; GO
 * 
 * b 执行 [[scope]] 0 --&gt; b 的 AO
 *                 1 --&gt; a 的 AO（引用）
 *                 2 --&gt; GO
 * 
 * c 定义 [[scope]] 0 --&gt; b 的 AO（引用）
 *                 1 --&gt; a 的 AO（引用）
 *                 2 --&gt; GO
 * 
 * c 执行 [[scope]] 0 --&gt; c 的 AO 
 *                 0 --&gt; b 的 AO（引用）
 *                 1 --&gt; a 的 AO（引用）
 *                 2 --&gt; GO
 * 
 * c 执行完毕 断开于 c的AO 这个对象的引用
 * 
 * b 执行完毕 断开于 b的AO 这个对象的引用
 * 
 * a 执行完毕 断开于 a的AO 这个对象的引用
 * 
 */</span>

</code></pre></div><p><strong>❣️：这个就解释了函数，为什么最里面的可以访问外面的，而外面的访问不了里面的!!!</strong></p> <p><strong>🔥 拓展：在作用域上找不到报错，在原型链上找不到undefined</strong></p> <hr> <h2 id="🐼闭包-对于函数而言"><a href="#🐼闭包-对于函数而言" class="header-anchor">#</a> 🐼闭包（对于函数而言）</h2> <p><strong>我感觉知道 AO GO 和 内存回收之后，才能更近一步的理解闭包</strong></p> <h3 id="_1-闭包解释-从-ao-go-角度解释"><a href="#_1-闭包解释-从-ao-go-角度解释" class="header-anchor">#</a> 1.闭包解释（从 AO GO 角度解释）</h3> <ul><li>在函数里面，返回函数（或者返回的类型里面包括函数），一定会产生闭包</li> <li>我们来看一下下面的例子
<ul><li>首先 a 执行 作用域链 有两个，a的AO 和 GO</li> <li>然后 b 定义 作用域链 有三个，b的AO，a的AO，GO</li> <li>当 a 执行完成之后，就断开与 a的AO 这个对象的引用，但是此时，a的AO还被 b 引用着，所以标记清除不会回收 a 的AO</li> <li>最终的效果就是 a的AO的内容，还能通过 b 来访问，这个一个函数访问另一个函数内，内容的现象，人们称之为 <strong>闭包</strong></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 示例</span>

<span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'朱昆鹏'</span>

    <span class="token keyword">function</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> b
<span class="token punctuation">}</span>

<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 朱昆鹏</span>

</code></pre></div><hr> <h3 id="_2-闭包的缺点"><a href="#_2-闭包的缺点" class="header-anchor">#</a> 2.闭包的缺点</h3> <p><strong>当内部函数被保存到外部时，会生成闭包，闭包会导致原有作用域链不释放，造成内存泄漏</strong></p> <p><strong>❓如何解决闭包可能会导致内存泄漏的问题呢</strong></p> <hr> <h3 id="_3-闭包的应用"><a href="#_3-闭包的应用" class="header-anchor">#</a> 3.闭包的应用</h3> <p><strong>实现公有变量</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 示例：函数累加器</span>
<span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count <span class="token operator">++</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> countFn <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">countFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token function">countFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token function">countFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

</code></pre></div><p><strong>可以做缓存（存储结构）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">100</span>

    <span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        num <span class="token operator">++</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        num <span class="token operator">--</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myFn <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myFn<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 101</span>
myFn<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 100</span>

<span class="token comment">// ES6 写法</span>
<span class="token comment">// let [a, b] = test()</span>
<span class="token comment">// a()</span>
<span class="token comment">// b()</span>


<span class="token comment">// ****** 🔥示例二 *******</span>

<span class="token keyword">function</span> <span class="token function">eater</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'朱昆鹏'</span> <span class="token comment">// 这个就是缓存</span>

    <span class="token keyword">let</span> zhu <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我的姓名是：'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>
            name <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">myName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            name <span class="token operator">=</span> myName
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> zhu
<span class="token punctuation">}</span>

<span class="token keyword">let</span> eater1 <span class="token operator">=</span> <span class="token function">eater</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

eater1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'无'</span><span class="token punctuation">)</span>
eater1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 我的姓名是：无</span>

</code></pre></div><p><strong>可以实现封装，属性私有化</strong></p> <p><strong>模块化开发，防止污染全局变量</strong></p> <p>主要利用函数是 函数作用域，是独立的作用域</p> <hr> <h3 id="_4-解释一些经典的闭包的问题"><a href="#_4-解释一些经典的闭包的问题" class="header-anchor">#</a> 4.解释一些经典的闭包的问题</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> arrFn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            arrFn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> arrFn
<span class="token punctuation">}</span>

<span class="token keyword">var</span> testArr <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
testArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 然后执行 testArr 中的每一个函数，会打印 10 个 10</span>
<span class="token comment">// ❣️ 我的理解是：这个 i ，放到了 test 的 AO 中，每次 i++ 都会改变 test 的 AO</span>
<span class="token comment">// 而这十个函数，内部都没有i，所有都引用了 test 的 AO，也就是最后变换的</span>

<span class="token comment">// 🔥 然后通过 IIEF 的方法，本质上就是 立即执行函数的 AO 中保存了 i</span>
<span class="token comment">// 然后 具体的函数 作用域链中 具有 立即执行函数的 AO，那里面是正确的值</span>
<span class="token comment">// 其实这时候 test的 AO 还是 10，具体的函数本身还是没有 i, 但是立即执行函数有 AO，并且值正是我们想要的</span>

<span class="token comment">// ❓ 通过 let 的方法来解决，这个原理是什么</span>

</code></pre></div><hr> <h2 id="🐮立即执行函数-iief"><a href="#🐮立即执行函数-iief" class="header-anchor">#</a> 🐮立即执行函数（IIEF）</h2> <p><strong>❣️ 立即执行函数不是官方的，像CSS的浮动，也是人们试出来的</strong></p> <p><strong>基础使用</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>原理：只有表达式才能被执行符号执行（只要你能把函数转为表达式，都能执行）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ❌这个不行，因为不是表达式</span>

<span class="token keyword">let</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '执行了'</span>

<span class="token operator">+</span><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '执行了'</span>

<span class="token operator">-</span><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '执行了'</span>

<span class="token operator">!</span><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '执行了'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token comment">//undefined, 立即执行函数会忽略函数名称</span>

</code></pre></div><p><strong>拓展</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// 不会报错，因为会被计算机理解为下面的样子（真的是能不报错就不报错呀, 制作者666）</span>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

</code></pre></div><hr> <h2 id="🙉原型-原型链"><a href="#🙉原型-原型链" class="header-anchor">#</a> 🙉原型，原型链</h2> <hr> <h2 id="🐯this指向详解"><a href="#🐯this指向详解" class="header-anchor">#</a> 🐯this指向详解</h2> <h3 id="_1-this基础解释"><a href="#_1-this基础解释" class="header-anchor">#</a> 1.this基础解释</h3> <ul><li>函数预编译过程，this指向window（AO阶段 arguments也会创建完成）</li> <li>全局作用域，this指向window</li> <li>call/apply 可以改变函数运行时this指向</li> <li>obj.fun(), fun() 里面的this指向 obj（谁调用函数，函数的this就是指向谁）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ***** 示例一 ******</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'222'</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'111'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fun <span class="token operator">=</span> a<span class="token punctuation">.</span>say
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 222 | this指的 window</span>
a<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 111 | this指的是a对象</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'333'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fun</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
b<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>say<span class="token punctuation">)</span> <span class="token comment">// 222 | b.say() 这时候 this 是 b对象，但是 fun() 不是 this.fun() 所以，走的是window</span>
b<span class="token punctuation">.</span>say <span class="token operator">=</span> a<span class="token punctuation">.</span>say
b<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 333 | this指的是b对象</span>


<span class="token comment">// ***** 示例二 ******</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'222'</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'111'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fun <span class="token operator">=</span> a<span class="token punctuation">.</span>say
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 222 | this指的 window</span>
a<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 222 | this指的 window（() =&gt; {} 这种写法会把this锁定到window，除非外面还套一层function）</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'333'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token parameter">fun</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
b<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>say<span class="token punctuation">)</span> <span class="token comment">// 222 | b.say() 这时候 this 是 window</span>
b<span class="token punctuation">.</span>say <span class="token operator">=</span> a<span class="token punctuation">.</span>say
b<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 222 | this指的 window</span>


<span class="token comment">// ***** 示例三 ******</span>
<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">function</span> <span class="token function">print</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">235</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 235</span>
<span class="token keyword">new</span> <span class="token class-name">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 123，首先 print() 不管是new 还是 直接执行，其内部的 AO 都没有 foo，而new导致 this变为其他的了，所以改不了window，所以结果是123</span>


<span class="token comment">// ***** 示例四 ******</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">0</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
    <span class="token keyword">var</span> a
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0 5 0 | 第一个等于0 是 test AO 的，不指向window，因为下面有个 var a ，于是预编译阶段，test AO 上有 a 这个属性，所以直接赋值了</span>
<span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0 undefined 0</span>


<span class="token comment">// ***** 示例五 ******</span>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数this'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'定时器：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 都指的window，就算不用 () =&gt; {} ，定时器的也指的window</span>
<span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 如果用 () =&gt; {} 的话，定时器 this 指向 test 创建的那个对象this，如果用 function () {} 的话，定时器this指向 window，函数this 都是执行 test创建出来的那个 对象this</span>

</code></pre></div><hr> <h2 id="🐸var-let-const-function-到底区别在哪里"><a href="#🐸var-let-const-function-到底区别在哪里" class="header-anchor">#</a> 🐸var let const function 到底区别在哪里？</h2> <h3 id="_1-基础解释"><a href="#_1-基础解释" class="header-anchor">#</a> 1.基础解释</h3> <p><strong>首先先摘自方应杭知乎的图，<a href="https://zhuanlan.zhihu.com/p/28140450" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <img src="https://pic1.zhimg.com/80/v2-9c8c4a0a3ce5402b1a74f488d79c74d0_hd.jpg"> <p><strong>我来谈谈对这个的理解，还是得说预编译阶段</strong></p> <ul><li>首先全局预编译会产生 GO（Global Object），对于这一步，var function let const 有不同的过程
<ul><li>var 一个变量的话，会在预编译阶段就 创建，初始化赋值 undefined</li> <li>functino 一个函数的话，会在预编译阶段就 创建，初始化赋值 undefined，和将函数体赋值给 这个函数变量（也就是我们说的函数提升，就是我们不管在哪用函数，都能用，而不用在乎函数体写的位置）</li> <li>let 一个变量的话 会在编译阶段，创建，不初始化（可能这么理解不对，但是效果可以），如果我们在初始化赋值之前用它，就会报错</li> <li>const 一个变量的话，会在预编译阶段，创建，不初始化</li></ul></li></ul> <p><strong>❣️ 当然，上面解释可能并不是很好，如果有更好的，我会修改的，也欢迎大家提出自己的想法</strong></p> <hr> <h3 id="_2-暂时性死区"><a href="#_2-暂时性死区" class="header-anchor">#</a> 2.暂时性死区</h3> <hr> <h2 id="🐙内存回收机制"><a href="#🐙内存回收机制" class="header-anchor">#</a> 🐙内存回收机制</h2> <p><strong>这个我就理解下，知道是干啥的，具体的应用我目前水平还是没有用到</strong></p> <h3 id="_1-基础解释-2"><a href="#_1-基础解释-2" class="header-anchor">#</a> 1.基础解释</h3> <ul><li>内存回收主要是由V8引擎来做的，主要策略是分代式垃圾回收机制，也就是新生代（存活时间较短的对象）和 老生代（存活时间较长的对象）</li> <li>为什么有两种呢，因为没有一种垃圾回收算法能够 胜任所有的场景</li></ul> <hr> <h3 id="_2-scavenge算法-新生代算法"><a href="#_2-scavenge算法-新生代算法" class="header-anchor">#</a> 2.Scavenge算法（新生代算法）</h3> <ul><li>在分代基础上，新生代的对象主要通过Scavenge算法进行垃圾回收，再具体实现的时候主要采用 Cheney算法</li> <li>Cheney算法 是一种采用赋值的方式实现的垃圾回收算法
<ul><li>它将内存一分为二，每一个空间称之为 semispace，这两个空间中一个处于使用，一个处于闲置</li> <li>处于使用的称之为 From，闲置的称之为 To</li> <li>分配对象时先分配到From，当开始进行垃圾回收时，检查From存活对象 ，并赋值到 To，非存活对象被释放（就是没有被用到的）</li> <li>然后 From ，To 互换位置，再次进行回收，发现被回收过，直接晋升到老生代（To空间使用超过25%也直接晋升）</li></ul></li> <li>缺点:只能使用堆内存的一般，这是空间换时间的方法，但是正适合新生代声明周期较短的情况</li></ul> <hr> <h3 id="_3-mark-sweep-mark-compact-老生代算法"><a href="#_3-mark-sweep-mark-compact-老生代算法" class="header-anchor">#</a> 3.Mark-Sweep &amp; Mark-compact（老生代算法）</h3> <ul><li>V8老生代主要采用 Mark-Sweep &amp; Mark-compact
<ul><li>Mark-Sweep：标记清除，标记那些死亡的对象，然后清除，但是清除之后会出现内存不连续的情况，所以要使用下面的方法</li> <li>Mark-compact：先将活着的对象移到一起（连续了），移动之后再进行清理</li> <li>❓当CPU内存不足的时候会非常的高效</li></ul></li> <li>V8还引入了延迟处理，增量处理，并行标记处理</li></ul> <hr> <h2 id="🐔event-loop"><a href="#🐔event-loop" class="header-anchor">#</a> 🐔Event Loop</h2> <h3 id="_1-前言介绍"><a href="#_1-前言介绍" class="header-anchor">#</a> 1.前言介绍</h3> <p>要整理这里的内容，引子是一道面试题，主要考察的是定时器，Promise，async/await的执行顺序次序的问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 问下面的执行顺序是什么？</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后我查阅很多资料，最终由下面两篇文章整理出基本的规则，可以应对基础的这三类问题（但是其实还有 this指向 和 原型链问题，这三者学会在面对执行问题的时候才游刃有余），正式由于我此处缺少系统性的知识，所以在此建立一个基础的知识分支，用来记录整理这块的知识点</p> <div class="language-js extra-class"><pre class="language-js"><code>
口诀：同步先执行，异步先执行微队列，再执行宏队列

细节点：Promise<span class="token punctuation">.</span>then 才会放到微队列中 <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>（此题和上一道题简直承上启下）

细节点：async<span class="token operator">/</span><span class="token keyword">await</span> <span class="token keyword">await</span>前面的代码是同步，<span class="token keyword">await</span>后面的代码是异步（这里其实是语法糖）

细节点：还有就是小心 <span class="token keyword">return</span> （<span class="token keyword">return</span> 了promise ，那么整个promise都是微队列了）

</code></pre></div><ul><li>推荐拓展阅读文章一：<a href="https://www.yanceyleo.com/p/5cbc0ad8ec9b0f4eac13467e" target="_blank" rel="noopener noreferrer">最后一次搞懂 Event Loop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>推荐拓展阅读文章二：<a href="https://juejin.im/post/5b73d7a6518825610072b42b#heading-5" target="_blank" rel="noopener noreferrer">微任务、宏任务与Event-Loop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <h3 id="_2-一些基础的介绍-看完其实并没有太大作用-参考与-javascript忍者秘籍-倒是好找新的吧"><a href="#_2-一些基础的介绍-看完其实并没有太大作用-参考与-javascript忍者秘籍-倒是好找新的吧" class="header-anchor">#</a> 2.一些基础的介绍（看完其实并没有太大作用，参考与 JavaScript忍者秘籍，倒是好找新的吧）</h3> <ul><li>浏览器执行的是 JS单线程执行模型，也就是说同一时刻只能执行一段代码，要保证这点，需要一套规则，那就是事件循环和事件队列（即事件的调度方法）</li> <li>事件循环不仅包含事件队列，除了事件，还要保持浏览器执行的其他操作，这些操作被认为任务（宏任务，微任务）
<ul><li>宏任务：主要创建主文档对象，解析HTML，执行主线（全局）JavaScript代码，更改当前URL以及各种事件（如页面加载，输入，网络事件，定时器等）</li> <li>微任务：是更小的任务，更新应用程序的状态，如 Promise回调函数，DOM发生变化</li></ul></li></ul> <img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/3.JavaScript/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3JavaScript/1%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png"> <hr> <h2 id="🐣位操作符"><a href="#🐣位操作符" class="header-anchor">#</a> 🐣位操作符</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" target="_blank" rel="noopener noreferrer">mdn地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1-arguments"><a href="#_1-arguments" class="header-anchor">#</a> 1.arguments</h3> <p><strong>实参列表执行的时候有多少就是多少，不会随着后期变换</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">zhu</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    b <span class="token operator">=</span> <span class="token number">2</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined 实参列表执行的时候有多少就是多少，不会随着后期变换</span>

<span class="token punctuation">}</span>

<span class="token function">zhu</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><hr> <ul><li>arguments.callee：指向函数自身，适用于IIEF中，拿不到函数自身的问题</li></ul> <hr> <h2 id="🦄web中的编码和转义"><a href="#🦄web中的编码和转义" class="header-anchor">#</a> 🦄Web中的编码和转义</h2> <p>web中常用的编码有 URL编码，HTML编码，JS编码</p> <h3 id="_1-url编码"><a href="#_1-url编码" class="header-anchor">#</a> 1.URL编码</h3> <p>一般来说，URL只能使用英文字母（a-zA-Z）、数字（0-9）、-_.~4个特殊字符以及所有（;,/?😡&amp;=+$#）保留字符。</p> <p>意味着如果使用了一些其他文字和特殊字符，则需要通过编码的方式来进行表示，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> url1 <span class="token operator">=</span> <span class="token string">'http://www.朱.com'</span> <span class="token comment">// 链接使用了汉字</span>
<span class="token keyword">let</span> url2 <span class="token operator">=</span> <span class="token string">'http://www.a.com?我=1'</span> <span class="token comment">// 传参使用了汉字</span>
<span class="token keyword">let</span> url3 <span class="token operator">=</span> <span class="token string">'http://a.com?key=?&amp;'</span> <span class="token comment">// 值的内容为特殊符号</span>

<span class="token comment">// 解决方法：encodeURI()</span>
<span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'http://www.朱.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http://www.%E6%9C%B1.com&quot;</span>
<span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'http://www.a.com?我=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// &quot;http://www.a.com?%E6%88%91=1&quot;</span>

<span class="token comment">// 内容为特殊符号,这个encodeURI()没法转义，就需要 encodeURIComponent()</span>
<span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'http://a.com?key=?&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http://a.com?key=?&amp;&quot;</span>
<span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'http://a.com'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'?a='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'?&amp;'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;http://a.com?a=%3F%26&quot;</span>

<span class="token comment">// ❣️ URL解码</span>
<span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">decodeURIComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="_2-html-编码"><a href="#_2-html-编码" class="header-anchor">#</a> 2.HTML 编码</h3> <p>在 HTML 中，某些字符是预留的，比如不能使用小于号（&lt;）和大于号（&gt;），这是因为浏览器会误认为它们是标签。如果希望正确地显示预留字符，我们必须在 HTML 源代码中使用字符实体（character entities）。当然还另一个重要原因，有些字符在 ASCII 字符集中没有定义，因此需要使用字符实体来表示，比如中文。</p> <p>HTML 编码分为：</p> <ul><li>HTML 十六进制编码 &amp;#xH;</li> <li>HTML 十进制编码 &amp;#D;</li> <li>HTML 实体编码 &lt; 等</li></ul> <p>在 HTML 进制编码中其中的数字则是对应字符的 unicode 字符编码。</p> <p>比如单引号的 unicode 字符编码是27，则单引号可以被编码为'</p> <p><strong>HTML 实体编码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 通常来说，在业务中我们用到更多的是 HTML 的实体编码。常用的 HTML 实体编码函数如下所示：</span>

<span class="token comment">/**
 * 转义 HTML 特殊字符
 * @param {String} str
 */</span>
<span class="token keyword">function</span> <span class="token function">htmlEncode</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&amp;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&quot;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/'/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;#39;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&gt;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="_3-javascript转义"><a href="#_3-javascript转义" class="header-anchor">#</a> 3.JavaScript转义</h3> <p>JavaScript 中有些字符有特殊用途，如果字符串中想使用这些字符原来的含义，需要使用反斜杠对这些特殊符号进行转义。我们称之为 Javascript编码。一般有以下几类：</p> <ul><li>三个八进制数字，如果不够个数，前面补0，例如 “e” 编码为“\145”</li> <li>两个十六进制数字，如果不够个数，前面补0，例如 “e” 编码为“\x65”</li> <li>四个十六进制数字，如果不够个数，前面补0，例如 “e” 编码为“\u0065”</li> <li>对于一些控制字符，使用特殊的C类型的转义风格（例如\n和\r）</li></ul> <p><a href="https://imweb.io/topic/57024e4606f2400432c1396d" target="_blank" rel="noopener noreferrer">从零开始学web安全（3）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/FrankFang/githublog/blob/master/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF%E7%9A%84%E5%90%84%E7%A7%8D%E8%BD%AC%E4%B9%89.md" target="_blank" rel="noopener noreferrer">前端的各种转义<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="📚参考列表"><a href="#📚参考列表" class="header-anchor">#</a> 📚参考列表</h2> <ul><li>《你不知道的JavaScript》系列</li> <li>《JavaScript忍者秘籍》（第2版）</li> <li><a href="https://blog.csdn.net/one_girl/article/details/80192899" target="_blank" rel="noopener noreferrer">for、forEach、for in 、 for of 的区别 参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://ke.qq.com/" target="_blank" rel="noopener noreferrer">腾讯课堂<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/2.note/3.JavaScript/1.JavaScript根基.html" class="prev">
        1.JavaScript根基
      </a></span> <span class="next"><a href="/2.note/3.JavaScript/3.JavaScript应用.html">
        3.JavaScript应用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a28e9894.js" defer></script><script src="/assets/js/2.b5be6ff6.js" defer></script><script src="/assets/js/42.d39b5fdb.js" defer></script><script src="/assets/js/3.87d40112.js" defer></script>
  </body>
</html>
