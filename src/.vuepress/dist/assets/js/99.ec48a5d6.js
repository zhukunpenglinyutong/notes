(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{458:function(t,s,a){"use strict";a.r(s);var n=a(47),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_1-nodeé¡¹ç›®ä»¿çŸ¥ä¹api-md"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nodeé¡¹ç›®ä»¿çŸ¥ä¹api-md"}},[t._v("#")]),t._v(" 1.Nodeé¡¹ç›®ä»¿çŸ¥ä¹API.md")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ³¨æ„æ­¤å¤„ï¼šæ­¤å¤„å†…å®¹éœ€è¦é‡æ–°æ¢³ç†")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ”¥åºç« "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥åºç« "}},[t._v("#")]),t._v(" ğŸ”¥åºç« ")]),t._v(" "),a("p",[a("strong",[t._v("æœ¬é¡¹ç›®é‡‡ç”¨ Koa2 + mongoose ä½œä¸ºåŸºç¡€ï¼Œé‡‡ç”¨JWTåšé‰´æƒï¼ˆTokenï¼‰ï¼Œæ˜¯æˆ‘ç†Ÿæ‚‰Koa2 + MongoDBå¼€å‘çš„å…¥é—¨é¡¹ç›®")])]),t._v(" "),a("ul",[a("li",[t._v("æ”¶è·ä¸€ï¼šæŠ½ç¦»å‡ºä¸€ä¸ª Koa + mongoose çš„MVCç®€å•é¡¹ç›® "),a("a",{attrs:{href:"https://github.com/zhukunpenglinyutong/Koa-api-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("é¡¹ç›®åœ°å€"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("æ”¶è·äºŒï¼šåŠ æ·±äº† RESTful API çš„è§„èŒƒè®¤çŸ¥ï¼Œè§ä¸‹é¢çš„ç¬”è®°")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ´ç¬¬ä¸€ç« -è®¤è¯†restful-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ´ç¬¬ä¸€ç« -è®¤è¯†restful-api"}},[t._v("#")]),t._v(" ğŸŒ´ç¬¬ä¸€ç« ï¼šè®¤è¯†RESTful API")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_1-restæ˜¯ä»€ä¹ˆä»¥åŠå®ƒçš„6ä¸ªé™åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-restæ˜¯ä»€ä¹ˆä»¥åŠå®ƒçš„6ä¸ªé™åˆ¶"}},[t._v("#")]),t._v(" 1.RESTæ˜¯ä»€ä¹ˆä»¥åŠå®ƒçš„6ä¸ªé™åˆ¶")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ä»€ä¹ˆæ˜¯REST")]),t._v("ï¼šRESTæ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œç”¨æ¥åˆ›å»ºç½‘ç»œæœåŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("ä¸ºä½•å«REST")]),t._v("ï¼šè‹±è¯­å…¨ç§°æ˜¯ Representational State Transfer\n"),a("ul",[a("li",[t._v("Representationalï¼šæ•°æ®è¡¨ç¤ºå½¢å¼ï¼Œå¯ä»¥ç”¨å¾ˆå¤šç§ï¼Œä¸€èˆ¬ç”¨JSON")]),t._v(" "),a("li",[t._v("Stateï¼šå½“å‰çŠ¶æ€æˆ–è€…æ•°æ®")]),t._v(" "),a("li",[t._v("Transferï¼šæ•°æ®ä¼ è¾“")])])])]),t._v(" "),a("p",[a("strong",[t._v("é€šè¿‡å­—é¢æ„æ€æ¥çœ‹æ˜¯ä¸å¥½ç†è§£çš„ï¼Œæˆ–è€…è¯´ä¸å…¨é¢çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡RESTçš„å…­ä¸ªé™åˆ¶æ¥æ›´æ·±åˆ»çš„è®¤è¯†REST")])]),t._v(" "),a("ul",[a("li",[t._v("å®¢æˆ·-æœåŠ¡å™¨ï¼ˆClent-Serverï¼‰ï¼ˆè¿™ä¸ªè§£é‡Šéå¸¸çš„å¥½ğŸ”¥ï¼‰\n"),a("ul",[a("li",[t._v("å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆæœåŠ¡ç«¯å…³æ³¨æ•°æ®å­˜å‚¨ï¼Œæå‡äº†ç®€å•æ€§ï¼›å‰ç«¯ä¸“æ³¨ç”¨æˆ·ç•Œé¢ï¼Œæé«˜äº†å¯ç§»æ¤æ€§ï¼‰")]),t._v(" "),a("li",[t._v("ç®€å•æ€§è§£é‡Šï¼šè¿‡å»æœåŠ¡ç«¯ç«¯è¿˜éœ€è¦æ¸²æŸ“é¡µé¢ï¼Œç°åœ¨åªéœ€è¦å†™å¥½æ•°æ®å­˜å‚¨å°±å¥½äº†")]),t._v(" "),a("li",[t._v("å¯ç§»æ¤æ€§è§£é‡Šï¼šè°ƒç”¨æ¥å£ï¼Œæ¸²æŸ“å¹³å°çš„èƒ½åŠ›ï¼Œå¾ˆå¤šå¹³å°éƒ½æ”¯æŒè¿™ç§æ“ä½œ")])])]),t._v(" "),a("li",[t._v("æ— çŠ¶æ€ï¼ˆStatelessï¼‰\n"),a("ul",[a("li",[t._v("æ‰€æœ‰ç”¨æˆ·ä¼šè¯ä¿¡æ¯éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯")]),t._v(" "),a("li",[t._v("æ¯æ¬¡å»è¯·æ±‚å¿…é¡»åŒ…æ‹¬æ‰€æœ‰ä¿¡æ¯ï¼Œä¸èƒ½ä¾èµ–ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆä¾‹å¦‚å°è¯´ç¿»é¡µï¼Œä½ æƒ³è¯·æ±‚ä¸‹ä¸€é¡µï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“ä¸‹ä¸€é¡µæ˜¯å•¥ï¼Œéœ€è¦ä½ ç¡®å®šçš„è¯·æ±‚ç¬¬å‡ é¡µæ‰è¡Œï¼‰")]),t._v(" "),a("li",[t._v("ğŸ”¥æ— çŠ¶æ€çš„å¥½å¤„ï¼šæœåŠ¡ç«¯ä¸ç”¨ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œæå‡äº†ç®€å•æ€§ï¼Œå¯é æ€§ï¼Œå¯è§æ€§")])])]),t._v(" "),a("li",[t._v("ç¼“å­˜ï¼ˆCacheï¼‰\n"),a("ul",[a("li",[t._v("æ‰€æœ‰æœåŠ¡ç«¯å“åº”éƒ½è¦æ ‡è®°å¯ç¼“å­˜æˆ–è€…ä¸å¯ç¼“å­˜")]),t._v(" "),a("li",[t._v("ç¼“å­˜çš„å¥½å¤„ï¼šå‡å°‘å‰åç«¯äº¤äº’ï¼Œæå‡äº†æ€§èƒ½")])])]),t._v(" "),a("li",[t._v("ç»Ÿä¸€æ¥å£ï¼ˆUniform Interfaceï¼‰ğŸ”¥\n"),a("ul",[a("li",[t._v("æ¥å£è®¾è®¡å°½å¯èƒ½ç»Ÿä¸€é€šç”¨ï¼Œæå‡äº†ç®€å•æ€§ï¼Œå¯è§æ€§")]),t._v(" "),a("li",[t._v("æ¥å£ä¸å®ç°è§£è€¦ï¼Œä½¿å‰åç«¯å¯ä»¥ç‹¬ç«‹å¼€å‘è¿­ä»£ï¼ˆæ¥å£å®šå¥½ä¹‹åï¼Œå‰ç«¯å¯ä»¥è‡ªå·±mockæ•°æ®ï¼Œä¸ç”¨ç­‰åç«¯å¼€å‘å®Œæˆï¼‰")])])]),t._v(" "),a("li",[t._v("åˆ†å±‚ç³»ç»Ÿï¼ˆLayered Systemï¼‰\n"),a("ul",[a("li",[t._v("æ¯å±‚åªçŸ¥é“ç›¸é‚»çš„ä¸€å±‚ï¼Œåé¢éšè—çš„å°±ä¸çŸ¥é“äº†")]),t._v(" "),a("li",[t._v("å®¢æˆ·ç«¯ä¸çŸ¥é“æ˜¯åœ¨å’Œä»£ç†è¿˜æ˜¯çœŸæ­£çš„æœåŠ¡å™¨é€šä¿¡")]),t._v(" "),a("li",[t._v("å…¶ä»–å±‚ï¼šå®‰å…¨å±‚ï¼Œè´Ÿè½½å‡è¡¡å±‚ï¼Œç¼“å­˜å±‚ç­‰ï¼ˆé˜¿é‡Œå·´å·´æœ‰ä¸ªæœºæ„ä¸“é—¨åšè¿™ç§å±‚çš„ï¼Œä¸ç”¨å…³ç³»ä¸šåŠ¡é€»è¾‘ï¼‰")])])]),t._v(" "),a("li",[t._v("æŒ‰éœ€ä»£ç ï¼ˆCode-On-Demandå¯é€‰ï¼‰ï¼ˆä¸æ˜¯å¾ˆé‡è¦ï¼‰\n"),a("ul",[a("li",[t._v("å®¢æˆ·ç«¯å¯ä»¥ä¸‹è½½è¿è¡ŒæœåŠ¡ç«¯ä¼ è¿‡æ¥ä»£ç ï¼ˆä¾‹å¦‚JSï¼‰")]),t._v(" "),a("li",[t._v("å‡å°‘ä¸€äº›åŠŸèƒ½ï¼Œç®€åŒ–å®¢æˆ·ç«¯")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-ç»Ÿä¸€æ¥å£é™åˆ¶-æ¥å£éœ€è¦ç»Ÿä¸€æˆä»€ä¹ˆæ ·å­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç»Ÿä¸€æ¥å£é™åˆ¶-æ¥å£éœ€è¦ç»Ÿä¸€æˆä»€ä¹ˆæ ·å­"}},[t._v("#")]),t._v(" 2.ç»Ÿä¸€æ¥å£é™åˆ¶ï¼ˆæ¥å£éœ€è¦ç»Ÿä¸€æˆä»€ä¹ˆæ ·å­ï¼Ÿï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("èµ„æºçš„æ ‡è¯†\n"),a("ul",[a("li",[t._v("èµ„æºæ˜¯ä»»ä½•å¯ä»¥å‘½åçš„çš„äº‹ç‰©ï¼Œæ¯”å¦‚ç”¨æˆ·ï¼Œè¯„è®ºç­‰")]),t._v(" "),a("li",[t._v("æ¯ä¸ªèµ„æºé€šè¿‡URLè¢«ç»Ÿä¸€çš„æ ‡è¯†ï¼ˆä¾‹å¦‚ï¼šhttps://api.github.com/usersï¼‰")])])]),t._v(" "),a("li",[t._v("é€šè¿‡è¡¨è¿°æ¥æ“ä½œèµ„æºï¼ˆè¿™ä¸ªæˆ‘æ‡‚ï¼Œæˆ‘å°±æ˜¯è¿™æ ·ç”¨çš„ï¼‰\n"),a("ul",[a("li",[t._v("å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥æ“ä½œï¼ˆæ¯”å¦‚SQLï¼‰æœåŠ¡ç«¯èµ„æº")]),t._v(" "),a("li",[t._v("å®¢æˆ·ç«¯åº”è¯¥é€šè¿‡è¡¨è¿°ï¼ˆæ¯”å¦‚JSONï¼‰æ¥æ“ä½œèµ„æº")])])]),t._v(" "),a("li",[t._v("è‡ªæè¿°ä¿¡æ¯\n"),a("ul",[a("li",[t._v("æ¯ä¸ªæ¶ˆæ¯ï¼ˆè¯·æ±‚æˆ–è€…å“åº”ï¼‰å¿…é¡»è¸¢ç‹—è¶³å¤Ÿçš„ä¿¡æ¯è®©æ¥å—è€…ç†è§£")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼šä½ å¯ä»¥éœ€è¦ä¼ åª’ä½“ç±»å‹ï¼ˆapplication/json,application/xmlï¼‰")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼šä½ éœ€è¦è§„å®šè¯·æ±‚ç±»å‹ï¼šGET,POST,DELETE")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼šå“åº”æ˜¯å¦è¢«ç¼“å­˜ï¼šCache-Control")])])]),t._v(" "),a("li",[t._v("è¶…åª’ä½“ä½œä¸ºåº”ç”¨çŠ¶æ€å¼•æ“ï¼ˆæ²¡æ‡‚ï¼‰\n"),a("ul",[a("li",[t._v("...")])])])]),t._v(" "),a("p",[t._v("åè®°ï¼šGitHub api æœ‰ v3ï¼Œä¹Ÿå°±æ˜¯ REST API,è¿˜æœ‰ v4 GraphQL api å­¦å®Œv3å¯ä»¥çœ‹ä¸‹v4")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-restful-apiç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-restful-apiç®€ä»‹"}},[t._v("#")]),t._v(" 3.RESTful APIç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("å­—é¢è§£é‡Šæ˜¯ï¼šç¬¦åˆRESTæ¶æ„é£æ ¼çš„API")]),t._v(" "),a("li",[t._v("RESTful API å…·ä½“é•¿ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ\n"),a("ul",[a("li",[t._v("åŸºæœ¬çš„URLï¼Œä¾‹å¦‚:https//api.github.com/users")]),t._v(" "),a("li",[t._v("æ ‡å‡†HTTPæ–¹æ³•ï¼Œä¾‹å¦‚ GET,POST,PUT,PATCH,DELETE")]),t._v(" "),a("li",[t._v("ä¼ è¾“çš„æ•°æ®åª’ä½“ç±»å‹ï¼Œå¦‚JSONï¼ŒXML")])])]),t._v(" "),a("li",[t._v("ç°å®ä¸¾ä¾‹\n"),a("ul",[a("li",[t._v("GET /users | è·å–useråˆ—è¡¨")]),t._v(" "),a("li",[t._v("GET /users/12 | æŸ¥çœ‹æŸä¸ªå…·ä½“çš„user")]),t._v(" "),a("li",[t._v("POST /users | åˆ›å»ºä¸€ä¸ªuser")]),t._v(" "),a("li",[t._v("PUT /users/12 | æ›´æ–°userä¸º12çš„ç”¨æˆ·")]),t._v(" "),a("li",[t._v("DELETE /users/12 | åˆ é™¤userä¸º12çš„ç”¨æˆ·")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_4-restful-apiè®¾è®¡æœ€ä½³å®è·µ-è§„èŒƒåŒ–-å¯¹æˆ‘å¾ˆé‡è¦-ğŸ”¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-restful-apiè®¾è®¡æœ€ä½³å®è·µ-è§„èŒƒåŒ–-å¯¹æˆ‘å¾ˆé‡è¦-ğŸ”¥"}},[t._v("#")]),t._v(" 4.RESTful APIè®¾è®¡æœ€ä½³å®è·µï¼ˆè§„èŒƒåŒ–ï¼Œå¯¹æˆ‘å¾ˆé‡è¦ï¼‰ğŸ”¥")]),t._v(" "),a("ul",[a("li",[t._v("è¯·æ±‚è®¾è®¡è§„èŒƒ âœ…\n"),a("ul",[a("li",[t._v("URLè¦ä½¿ç”¨åè¯ï¼Œå°½é‡ç”¨å¤æ•°ï¼Œå¦‚ /users")]),t._v(" "),a("li",[t._v("URLä½¿ç”¨åµŒå¥—è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå¦‚ /users/12/repos/5")]),t._v(" "),a("li",[t._v("ä½¿ç”¨æ­£ç¡®çš„HTTPæ–¹æ³•ï¼Œå¦‚ GET/POST/PUT/DELETE")]),t._v(" "),a("li",[t._v("ä¸ç¬¦åˆå¢åˆ æ”¹æŸ¥çš„æƒ…å†µä¸‹ï¼šPOST/...")])])]),t._v(" "),a("li",[t._v("å“åº”è®¾è®¡è§„èŒƒ âœ…\n"),a("ul",[a("li",[t._v("æŸ¥è¯¢ï¼ˆæ¯ä¸€ä¸ªè¿”å›å€¼éƒ½æ˜¯å¯ä»¥è¢«æŸ¥è¯¢çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åŠ ä¸Šè¿”å›æ¡ä»¶ï¼Œå°±èƒ½ç­›é€‰æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼‰")]),t._v(" "),a("li",[t._v("åˆ†é¡µ")]),t._v(" "),a("li",[t._v("å­—æ®µè¿‡æ»¤ï¼ˆå®Œæ•´çš„å­—æ®µå‡å¦‚æœ‰åä¸ªï¼Œè¿™ä¸ªå¯ä»¥è§„å®šæˆ‘æƒ³è¦çš„å­—æ®µï¼‰")]),t._v(" "),a("li",[t._v("çŠ¶æ€ç ")]),t._v(" "),a("li",[t._v("é”™è¯¯å¤„ç†ï¼ˆå¦‚æœé”™äº†ï¼Œè¦è§„èŒƒåŒ–çš„è¿”å›é”™è¯¯ä¿¡æ¯ï¼‰")])])]),t._v(" "),a("li",[t._v("å®‰å…¨ï¼ˆè¿™ä¸ªä¹Ÿæ˜¯æœ‰æ”¶è·çš„ï¼‰âœ…\n"),a("ul",[a("li",[t._v("ä½¿ç”¨HTTPSï¼ˆä½¿ç”¨HTTPå®¹æ˜“è¢«ç¯¡æ”¹ï¼ŒåŠ ä¸Šä¸€äº›å¹¿å‘Šä»€ä¹ˆçš„ï¼Œå¾ˆçƒ¦ï¼‰")]),t._v(" "),a("li",[t._v("é‰´æƒï¼ˆéœ€è¦ç™»å½•æ‰èƒ½è¯·æ±‚æŸäº›æ¥å£ï¼‰")]),t._v(" "),a("li",[t._v("é™æµï¼ˆé˜²æ­¢æŸäº›åäººåˆ»æ„å ç”¨æ¥å£ï¼‰")])])]),t._v(" "),a("li",[t._v("å¼€å‘è€…ä¼˜åŒ–\n"),a("ul",[a("li",[t._v("æ–‡æ¡£")]),t._v(" "),a("li",[t._v("è¶…åª’ä½“")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ³ç¬¬äºŒç« -ç”¨koa-è¯´-hello-world"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ³ç¬¬äºŒç« -ç”¨koa-è¯´-hello-world"}},[t._v("#")]),t._v(" ğŸŒ³ç¬¬äºŒç« ï¼šç”¨Koa è¯´ Hello World")]),t._v(" "),a("h3",{attrs:{id:"_1-koaç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-koaç®€ä»‹"}},[t._v("#")]),t._v(" 1.Koaç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("ä¸€å¥è¯ç®€ä»‹ï¼šåŸºäºNode.jsçš„ä¸‹ä¸€ä»£webæ¡†æ¶\n"),a("ul",[a("li",[t._v("åŸºäºNode.jsï¼šè¯´æ˜koaæ˜¯ä¸€ä¸ªNode.jsæ¨¡å—")]),t._v(" "),a("li",[t._v("ä¸‹ä¸€ä»£ï¼šèš•é£Ÿç¬¬ä¸€ä»£Expresså¸‚åœº")]),t._v(" "),a("li",[t._v("webæ¡†æ¶ï¼šä¸æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸æ˜¯ç®—æ³•")])])]),t._v(" "),a("li",[t._v("å®˜ç½‘è¯¦ç»†ä»‹ç»\n"),a("ul",[a("li",[t._v("ç”±Expersså¹•åäººåŸç­äººé©¬æ‰“é€ ")]),t._v(" "),a("li",[t._v("Webåº”ç”¨å’ŒAPIå¼€å‘é¢†åŸŸ")]),t._v(" "),a("li",[t._v("æ›´å°ï¼Œæ›´å¯Œæœ‰è¡¨ç°åŠ›ï¼Œæ›´å¥å£®")]),t._v(" "),a("li",[t._v("åˆ©ç”¨asyncå‡½æ•°ï¼Œä¸¢å¼ƒå›è°ƒå‡½æ•°")]),t._v(" "),a("li",[t._v("å¢å¼ºé”™è¯¯å¤„ç†ï¼štry catch")]),t._v(" "),a("li",[t._v("æ²¡æœ‰æ†ç»‘ä»»ä½•ä¸­é—´ä»¶")]),t._v(" "),a("li",[t._v("å¿«é€Ÿè€Œæ„‰å¿«çš„ç¼–å†™ç¨‹åºï¼ˆç”»çš„ä¸€ä¸ªå¤§é¥¼ï¼‰")])])])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/1.png"}}),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-å®‰è£…æ­å»ºç¬¬ä¸€ä¸ªkoaç¨‹åº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®‰è£…æ­å»ºç¬¬ä¸€ä¸ªkoaç¨‹åº"}},[t._v("#")]),t._v(" 2.å®‰è£…æ­å»ºç¬¬ä¸€ä¸ªKoaç¨‹åº")]),t._v(" "),a("ul",[a("li",[t._v("åˆå§‹åŒ–ç›®å½•ï¼šnpm i koa --save")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ï¼šå»ºç«‹ app.jsï¼Œè®©koaè¿”å›ä¸€ä¸ª hello world")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//use() æ–¹æ³•é‡Œé¢å¯ä»¥ä¼ é€’å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸­é—´ä»¶")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-koaä¸­é—´ä»¶ä¸æ´‹è‘±æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-koaä¸­é—´ä»¶ä¸æ´‹è‘±æ¨¡å‹"}},[t._v("#")]),t._v(" 3.Koaä¸­é—´ä»¶ä¸æ´‹è‘±æ¨¡å‹")]),t._v(" "),a("ul",[a("li",[t._v("async/await ç¤ºä¾‹ï¼ˆå½“ä¸€ä¸ªè¯·æ±‚ä¾èµ–ä¸Šä¸ªè¯·æ±‚å®Œæˆçš„æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨åµŒå¥—ï¼Œè¿™ä¸ªéå¸¸çš„ä¸ä¼˜é›…ï¼‰")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªå¯æ˜¯è§£å†³äº†æˆ‘ä¸èƒ½åœ¨ä»»ä½•åœ°æ–¹ç”¨ async çš„æ–¹æ³•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åµŒå¥—ä¸€")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åµŒå¥—äºŒ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("å­¦ä¹ ç¼–å†™Koaä¸­é—´ä»¶")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//use() æ–¹æ³•é‡Œé¢å¯ä»¥ä¼ é€’å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸­é—´ä»¶,è¿™æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæ‰§è¡Œå¤šä¸ªä¸­é—´ä»¶ï¼Œå¿…é¡»è¦å†™ next å‚æ•° ğŸ”¥ğŸ”¥ğŸ”¥")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æˆ‘ä¹Ÿæ˜¯ä¸­é—´ä»¶ï¼Œæˆ‘è¦å…ˆæ‰§è¡Œ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("p",[a("strong",[t._v("æ´‹è‘±æ¨¡å‹")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/2.png"}}),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ„ç¬¬ä¸‰ç« -koa-å’Œ-restful-api-çš„æœ€ä½³å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ„ç¬¬ä¸‰ç« -koa-å’Œ-restful-api-çš„æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" ğŸ„ç¬¬ä¸‰ç« ï¼šKoa å’Œ RESTful API çš„æœ€ä½³å®è·µ")]),t._v(" "),a("h3",{attrs:{id:"_1-è·¯ç”±ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-è·¯ç”±ç®€ä»‹"}},[t._v("#")]),t._v(" 1.è·¯ç”±ç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("è·¯ç”±å†³å®šäº†ä¸åŒçš„URLæ˜¯å¦‚ä½•è¢« ä¸åŒæ‰§è¡Œçš„")]),t._v(" "),a("li",[t._v("åœ¨Koaä¸­ï¼Œè·¯ç”±çš„æœ¬è´¨æ˜¯ä¸€ä¸ªä¸­é—´ä»¶")]),t._v(" "),a("li",[t._v("æ€è€ƒï¼Œå¦‚æœæ²¡æœ‰è·¯ç”±ä¼šæ€ä¹ˆæ ·ï¼Ÿè¯·æ±‚å’Œå“åº”éƒ½æ²¡æ³• å·®å¼‚åŒ–ï¼Œè¯·æ±‚å’Œè¿”å›çš„ç»“æœéƒ½ä¸€æ ·ï¼Œå°±è·Ÿä¸Šé¢æˆ‘ä»¬è¿”å›çš„ Hello Worldä¸€æ ·ï¼Œè¿™.....æ˜¯ä¸è¡Œçš„")]),t._v(" "),a("li",[t._v("è·¯ç”±å­˜åœ¨çš„æ„ä¹‰ï¼šå¤„ç†ä¸åŒçš„URLï¼Œå¤„ç†ä¸åŒçš„httpè¯·æ±‚ï¼Œè§£æURLä¸Šçš„å‚æ•°")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-è‡ªå·±ç¼–å†™koaè·¯ç”±ä¸­é—´ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è‡ªå·±ç¼–å†™koaè·¯ç”±ä¸­é—´ä»¶"}},[t._v("#")]),t._v(" 2.è‡ªå·±ç¼–å†™Koaè·¯ç”±ä¸­é—´ä»¶")]),t._v(" "),a("ul",[a("li",[t._v("ç›®æ ‡å®ç°åŠŸèƒ½ï¼šå¤„ç†ä¸åŒçš„URLï¼Œå¤„ç†ä¸åŒçš„httpæ–¹æ³•ï¼Œè§£æURLä¸Šçš„å‚æ•°")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//use() æ–¹æ³•é‡Œé¢å¯ä»¥ä¼ é€’å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸­é—´ä»¶,è¿™æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæ‰§è¡Œå¤šä¸ªä¸­é—´ä»¶ï¼Œå¿…é¡»è¦å†™ next å‚æ•°")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// â‘  å¤„ç†ä¸åŒçš„URLï¼šctx.url è¡¨ç¤ºä¸Šä¸‹æ–‡çš„URLï¼Œctxè¡¨ç¤ºä¸Šä¸‹æ–‡")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// â‘¡ å¤„ç†ä¸åŒçš„httpæ–¹æ³•ï¼šctx.method")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// â‘¢ è§£æURLä¸Šçš„å‚æ•° ")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("è·¯å¾„ï¼š")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("ï¼Œè¯·æ±‚ç±»å‹ï¼š")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(", å‚æ•°ï¼š")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getURLParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–urlä¸­çš„å‚æ•°")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getURLParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" params "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/([^?=&]+)(=([^&]*))/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-ä½¿ç”¨koa-routerå®ç°è·¯ç”±"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½¿ç”¨koa-routerå®ç°è·¯ç”±"}},[t._v("#")]),t._v(" 3.ä½¿ç”¨Koa-routerå®ç°è·¯ç”±")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i koa-router --save")])]),t._v(" "),a("p",[a("strong",[t._v("åŸºæœ¬ä½¿ç”¨")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†Œè·¯ç”±")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¿™æ˜¯é¦–é¡µ'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æURLå‚æ•°")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("è¿™æ˜¯ç”¨æˆ·")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†Œrouterä¸­é—´ä»¶ï¼ˆè¦ç”¨routerä¸­çš„routes()æ–¹æ³•ï¼‰")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("è·¯ç”±å‰ç¼€å’Œå¤šä¸­é—´ä»¶ä½¿ç”¨ï¼ˆè¿™é‡Œä½¿ç”¨ä¸è§„èŒƒï¼Œæ•´ç†ä»¥åæ¯”è¾ƒè§„èŒƒçš„ç»“æ„ï¼‰")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_4-http-options-æ–¹æ³•çš„ç”¨-é¢-å¯¹æˆ‘ç›®å‰æ²¡å¤ªå¤§ç”¨-å°±æ˜¯å¢åŠ äº›çŸ¥è¯†å¹¿åº¦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-http-options-æ–¹æ³•çš„ç”¨-é¢-å¯¹æˆ‘ç›®å‰æ²¡å¤ªå¤§ç”¨-å°±æ˜¯å¢åŠ äº›çŸ¥è¯†å¹¿åº¦"}},[t._v("#")]),t._v(" 4.HTTP options æ–¹æ³•çš„ç”¨ï¼ˆé¢ï¼Œå¯¹æˆ‘ç›®å‰æ²¡å¤ªå¤§ç”¨ï¼Œå°±æ˜¯å¢åŠ äº›çŸ¥è¯†å¹¿åº¦ï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("ğŸ”¥options æ˜¯HTTPè¯·æ±‚ç±»å‹ä¸­çš„ä¸€ç§ï¼ˆGET,POST......ï¼‰")]),t._v(" "),a("li",[t._v("è¿™æ˜¯ä¸€é“å¸¸è€ƒé¢è¯•é¢˜ï¼Œè¿˜å¯ä»¥å¸®åŠ©ç†è§£ koa-router çš„ allowedMethods çš„ä½œç”¨")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ”¥options ä½œç”¨")]),t._v(" "),a("ul",[a("li",[t._v("æ£€æµ‹æœåŠ¡å™¨æ‰€æ”¯æŒçš„è¯·æ±‚æ–¹æ³•")]),t._v(" "),a("li",[t._v("CORSä¸­çš„é¢„è§è¯·æ±‚")])])]),t._v(" "),a("li",[a("strong",[t._v("allowedMethods ä½œç”¨")]),t._v(" "),a("ul",[a("li",[t._v("å“åº” options æ–¹æ³•ï¼Œå‘Šè¯‰æ‰€æ”¯æŒçš„è¯·æ±‚æ–¹æ³•")]),t._v(" "),a("li",[t._v("ç›¸åº”çš„è¿”å› 405ï¼ˆä¸å…è®¸ï¼‰å’Œ 501ï¼ˆæ²¡å®ç°ï¼‰")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥5-å¢åˆ æ”¹æŸ¥åº”è¯¥è¿”å›ä»€ä¹ˆå“åº”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥5-å¢åˆ æ”¹æŸ¥åº”è¯¥è¿”å›ä»€ä¹ˆå“åº”"}},[t._v("#")]),t._v(" ğŸ”¥5.å¢åˆ æ”¹æŸ¥åº”è¯¥è¿”å›ä»€ä¹ˆå“åº”ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("è¿™é‡Œå¬è¯´æ˜¯æœ€ä½³å®è·µï¼Œä½†æ˜¯æˆ‘è§‚ç‚¹æ˜¯ï¼Œæˆ‘å†çœ‹çœ‹ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¢")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›æ–°å»ºçš„æ•°æ®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ ")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›çŠ¶æ€ç  204ï¼Œè¡¨ç¤ºæ²¡æœ‰å†…å®¹ï¼Œä½†æ˜¯æˆåŠŸäº†")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ”¹")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ä¿®æ”¹åçš„æ•°æ®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›æ•°æ®åˆ—è¡¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†Œrouterä¸­é—´ä»¶ï¼ˆè¦ç”¨routerä¸­çš„routes()æ–¹æ³•ï¼‰")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒµç¬¬å››ç« -koaæ¡†æ¶çš„æ§åˆ¶å™¨ä»¥åŠè®¾è®¡æ›´åˆç†çš„ç›®å½•ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒµç¬¬å››ç« -koaæ¡†æ¶çš„æ§åˆ¶å™¨ä»¥åŠè®¾è®¡æ›´åˆç†çš„ç›®å½•ç»“æ„"}},[t._v("#")]),t._v(" ğŸŒµç¬¬å››ç« ï¼škoaæ¡†æ¶çš„æ§åˆ¶å™¨ä»¥åŠè®¾è®¡æ›´åˆç†çš„ç›®å½•ç»“æ„")]),t._v(" "),a("h3",{attrs:{id:"_1-æ§åˆ¶å™¨ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ§åˆ¶å™¨ç®€ä»‹"}},[t._v("#")]),t._v(" 1.æ§åˆ¶å™¨ç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("ä»€ä¹ˆæ˜¯æ§åˆ¶å™¨ï¼Ÿæ‹¿åˆ°è·¯ç”±åˆ†é…çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("åœ¨Koaä¸­ï¼Œæ§åˆ¶å™¨æ˜¯ä¸€ä¸ªä¸­é—´èŠ‚")]),t._v(" "),a("li",[t._v("ä¸ºä»€ä¹ˆè¦ç”¨æ§åˆ¶å™¨\n"),a("ul",[a("li",[t._v("è·å–httpè¯·æ±‚å‚æ•°")]),t._v(" "),a("li",[t._v("å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆè·å–æ•°æ®ï¼Œå¤„ç†æ•°æ®ï¼Œå­˜å‚¨æ•°æ®...ï¼‰")]),t._v(" "),a("li",[t._v("æ ¹æ®æƒ…å†µå‘é€httpå“åº”")])])]),t._v(" "),a("li",[t._v("è·å–httpè¯·æ±‚å‚æ•°\n"),a("ul",[a("li",[t._v("ï¼ˆæŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰Query Stringï¼Œä¾‹å¦‚ ?q=keyword")]),t._v(" "),a("li",[t._v("ï¼ˆè·¯ç”±å‚æ•°ï¼‰Router Paramsï¼Œå¦‚ /users/:id ï¼ˆè¿™ä¸ªä¸€èˆ¬æ˜¯å¿…é€‰çš„ï¼Œè€Œä¸”å¯èƒ½æœ‰å¤šä¸ªè·¯ç”±å‚æ•°ï¼Œæˆ‘ä»¬å…¬å¸ä¹Ÿå·®ä¸å¤šæ˜¯è¿™æ ·çš„ï¼‰")]),t._v(" "),a("li",[t._v("ğŸ”¥ï¼ˆè¯·æ±‚ä½“ï¼‰Bodyï¼Œå¦‚ { name: 'æœ±æ˜†é¹' }ï¼ˆä¸€èˆ¬ç”¨jsonï¼‰ï¼ˆFromä¹Ÿæ˜¯å¾ˆå¸¸ç”¨çš„è¯·æ±‚ä½“ï¼‰")]),t._v(" "),a("li",[t._v("ï¼ˆè¯·æ±‚å¤´ï¼‰Headerï¼Œå¦‚ Accept,Cookie")])])])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("ğŸ”¥ç¼–å†™æ§åˆ¶å™¨æœ€ä½³å®è·µ")])]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªèµ„æºçš„æ§åˆ¶å™¨æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹")]),t._v(" "),a("li",[t._v("å°½é‡ä½¿ç”¨ç±»+ç±»æ–¹æ³•çš„å½¢å¼ç¼–å†™æ§åˆ¶å™¨ï¼ˆæˆ‘æ˜¯ä¸€ä¸ªæ¥å£å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–è¿™ä¸ªçš„æ€æƒ³æ˜¯ï¼Œå†™æˆä¸€ä¸ªç±»ï¼Œç„¶åæˆ‘çš„è¿™äº›æ¥å£éƒ½æ˜¯ç±»æ–¹æ³•ï¼Œè¿™æ ·è¿™äº›æ¥å£å¯ä»¥ä½¿ç”¨ç±»çš„å…¬å…±å†…å®¹ï¼‰")]),t._v(" "),a("li",[t._v("ä¸¥è°¨çš„é”™è¯¯å¤„ç†")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-è·å–httpè¯·æ±‚å‚æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è·å–httpè¯·æ±‚å‚æ•°"}},[t._v("#")]),t._v(" 2.è·å–httpè¯·æ±‚å‚æ•°")]),t._v(" "),a("ul",[a("li",[t._v("è¯·æ±‚å‚æ•°æœ‰ï¼šè·å– query,è·å– router paramsï¼Œè·å– body, è·å– header")]),t._v(" "),a("li",[t._v("é€šè¿‡æ–­ç‚¹è°ƒè¯•ï¼Œæˆ‘å‘ç° ctx è¿™ä¸ªä¸Šä¸‹æ–‡ä¸ŠæŒ‚è½½çš„æ˜¯æˆ‘éœ€è¦å¥½å¥½çœ‹çœ‹çš„å„ç§ä¸œè¥¿ï¼Œhttpå‚æ•°éƒ½åœ¨è¿™é‡Œé¢å†™ç€å‘¢ï¼Œåå­—ä¹Ÿæ˜¯é€šä¿—æ˜“æ‡‚")]),t._v(" "),a("li",[t._v("ğŸ”¥bodyè¿™æ˜¯ä¸ªè¯·æ±‚ä½“ï¼Œä½†æ˜¯ koaæ˜¯æ²¡æœ‰è§£æè¯·æ±‚ä½“çš„åŠŸèƒ½çš„ï¼ˆctxä¸Šæ²¡æœ‰è§£æbodyçš„å†…å®¹ï¼Œctx.body æ˜¯è®¾ç½®è¿”å›çš„ï¼Œå’Œè¿™ä¸ªæ²¡å…³ç³»ï¼‰ï¼Œéœ€è¦åŠ ä¸€ä¸ªä¸­é—´ä»¶")]),t._v(" "),a("li",[t._v("å®‰è£…è§£æè¯·æ±‚ä½“ä¸­é—´ä»¶ï¼šnpm i koa-bodyparser --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bodyparser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-bodyparser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyparser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”¥ä½¿ç”¨ï¼šctx.request.boay")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-å‘é€httpå“åº”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-å‘é€httpå“åº”"}},[t._v("#")]),t._v(" 3.å‘é€HTTPå“åº”")]),t._v(" "),a("ul",[a("li",[t._v("å¦‚ä½•å‘é€statusï¼Œbodyï¼Œheader")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½® status")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½® body")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Allow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET,POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å“åº”å¤´")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥4-æ›´åˆç†çš„ç›®å½•ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥4-æ›´åˆç†çš„ç›®å½•ç»“æ„"}},[t._v("#")]),t._v(" ğŸ”¥4.æ›´åˆç†çš„ç›®å½•ç»“æ„")]),t._v(" "),a("ul",[a("li",[t._v("è·¯ç”±ï¼Œæ§åˆ¶å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªç›®å½•é‡Œ")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ‡¨ğŸ‡³ routes æ–‡ä»¶å¤¹ /users.jsæ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// new Router({prefix:'user'}) è¿™æ ·å¯ä»¥è®¾ç½®è·¯ç”±å‰ç¼€ï¼Œä¹Ÿæ˜¯å®ç”¨çš„")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€èˆ¬è¿”å›æ•°æ®åˆ—è¡¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¼å‡º")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ‡¨ğŸ‡³ å†™ä¸€ä¸ª routes/index.j ç”¨æ¥æ‰¹é‡æ³¨å†Œè·¯ç”±")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("app")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" route "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("./")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowedMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ‡¨ğŸ‡³ app.js ä¸­ä½¿ç”¨æ‰¹é‡æ³¨å†Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routing "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/routes'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ‡¨ğŸ‡³ å»ºç«‹ controllers æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢å»ºç«‹ users.js ğŸ”¥ğŸ”¥ğŸ”¥ï¼ˆè¿™ä¸ªå®šä¹‰ç±»å’Œä½¿ç”¨ç±»çš„æ–¹å¼ï¼Œæˆ‘å–œæ¬¢ï¼ŒGETåˆ°äº†ï¼Œç¡®å®æ¯”æˆ‘å†™çš„Expressæ­£è§„ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Users")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–ç”¨æˆ·åˆ—è¡¨")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è·å–äº†ç”¨æˆ·åˆ—è¡¨'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ‡¨ğŸ‡³åœ¨è·¯ç”±ä¸­ä½¿ç”¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" getUsers "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../controller/users'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™æ˜¯ES6è¯­æ³•ï¼Œæ›´ç®€å•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æ‰€æœ‰åˆ—è¡¨")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/users'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getUsers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¼å‡º")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ±ç¬¬äº”ç« -å¤šç§æ–¹æ¡ˆå®ç°é”™è¯¯å¤„ç†æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ±ç¬¬äº”ç« -å¤šç§æ–¹æ¡ˆå®ç°é”™è¯¯å¤„ç†æœºåˆ¶"}},[t._v("#")]),t._v(" ğŸŒ±ç¬¬äº”ç« ï¼šå¤šç§æ–¹æ¡ˆå®ç°é”™è¯¯å¤„ç†æœºåˆ¶")]),t._v(" "),a("h3",{attrs:{id:"_1-é”™è¯¯å¤„ç†ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-é”™è¯¯å¤„ç†ç®€ä»‹"}},[t._v("#")]),t._v(" 1.é”™è¯¯å¤„ç†ç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("ä»€ä¹ˆæ˜¯é”™è¯¯å¤„ç†ï¼Ÿé”™è¯¯å¤„ç†æ˜¯ç¼–ç¨‹è¯­è¨€æˆ–è®¡ç®—æœºç¡¬ä»¶ä¸­çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå¤„ç†è½¯ä»¶æˆ–ä¿¡æ¯ç³»ç»Ÿä¸­å‡ºç°çš„å¼‚å¸¸çŠ¶å†µ")]),t._v(" "),a("li",[t._v("å¼‚å¸¸çŠ¶å†µæœ‰å“ªäº›ï¼Ÿ\n"),a("ul",[a("li",[t._v("è¿è¡Œæ—¶é”™è¯¯ï¼šéƒ½è¿”å›500ï¼ˆä»£è¡¨æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰")]),t._v(" "),a("li",[t._v("é€»è¾‘é”™è¯¯ï¼šæ‰¾ä¸å¤šï¼ˆ404ï¼‰ï¼Œå…ˆå†³æ¡ä»¶å¤±è´¥ï¼ˆ412ï¼‰ï¼Œæ— æ³•å¤„ç†çš„")])])]),t._v(" "),a("li",[t._v("ä¸ºä»€ä¹ˆè¦ç”¨é”™è¯¯å¤„ç†ï¼Ÿ\n"),a("ul",[a("li",[t._v("é˜²æ­¢ç¨‹åºæŒ‚æ‰")]),t._v(" "),a("li",[t._v("å‘Šè¯‰ç”¨æˆ·é”™è¯¯ä¿¡æ¯")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-koaè‡ªå¸¦çš„é”™è¯¯å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-koaè‡ªå¸¦çš„é”™è¯¯å¤„ç†"}},[t._v("#")]),t._v(" 2.koaè‡ªå¸¦çš„é”™è¯¯å¤„ç†")]),t._v(" "),a("ul",[a("li",[t._v("å¦‚æœè¯·æ±‚çš„æ¥å£ä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šè¿”å› 404")]),t._v(" "),a("li",[t._v("å¦‚æœæœåŠ¡å™¨å†…éƒ¨è¯­æ³•é”™è¯¯ï¼Œæˆ–è€…å…¶ä»–é”™è¯¯ï¼Œå°±ä¼šè¿”å› 500")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰‹åŠ¨æŠ›å‡º")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¿”å›æŠ¥é”™æ–‡æœ¬ä¿¡æ¯'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("â£ï¸ä½†æ˜¯è¿™é‡Œè¿”å›çš„éƒ½æ˜¯æ–‡å­—ï¼Œæˆ‘ä»¬æƒ³è¿”å›JSONï¼Œè¿™æ ·æ‰æ ¼å¼ç»Ÿä¸€")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-è‡ªå·±ç¼–å†™é”™è¯¯å¤„ç†ä¸­é—´ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-è‡ªå·±ç¼–å†™é”™è¯¯å¤„ç†ä¸­é—´ä»¶"}},[t._v("#")]),t._v(" 3.è‡ªå·±ç¼–å†™é”™è¯¯å¤„ç†ä¸­é—´ä»¶")]),t._v(" "),a("ul",[a("li",[t._v("å†™åˆ°æ‰€æœ‰ä¸­é—´ä»¶çš„æœ€å‰é¢")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸç†å°±æ˜¯æ•æ‰ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æŠ¥é”™ï¼Œç„¶åè¿”å›çŠ¶æ€ç å’Œå†…å®¹ï¼ˆJSONæ ¼å¼ï¼‰")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_4-ä½¿ç”¨-koa-json-errorè¿›è¡Œé”™è¯¯å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨-koa-json-errorè¿›è¡Œé”™è¯¯å¤„ç†"}},[t._v("#")]),t._v(" 4.ä½¿ç”¨ koa-json-errorè¿›è¡Œé”™è¯¯å¤„ç†")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i koa-json-error --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-json-error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å †æ ˆä¿¡æ¯éƒ½è¿”å›äº†ï¼Œè¿™é‡Œå¯ä»¥é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     "message": "Not Found",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     "name": "NotFoundError",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     "stack": "NotFoundError: Not Found\\n    at Object.throw (/Users/zhukunpeng/Desktop/RESU ful API/node_modules/koa/lib/context.js:97:11)\\n    at /Users/zhukunpeng/Desktop/RESU ful API/node_modules/koa-json-error/lib/middleware.js:52:58\\n    at processTicksAndRejections (internal/process/task_queues.js:89:5)",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     "status": 404')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ğŸ”¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè®©æˆ‘ä»¬åœ¨å¼€å‘æ—¶å€™é”™è¯¯å¤„ç†è¿”å›å †æ ˆä¿¡æ¯ï¼Œç”Ÿäº§ç¯å¢ƒä¸è¿”å›ï¼ˆæœªå®Œæˆï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i cross-env --save-dev")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_5-ä½¿ç”¨koa-parameterè¿›è¡Œå‚æ•°æ ¡éªŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä½¿ç”¨koa-parameterè¿›è¡Œå‚æ•°æ ¡éªŒ"}},[t._v("#")]),t._v(" 5.ä½¿ç”¨koa-parameterè¿›è¡Œå‚æ•°æ ¡éªŒ")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i koa-parameter --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªé€šå¸¸æ˜¯æ ¡éªŒè¯·æ±‚ä½“")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parameter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-parameter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‚æ•°æ ¡éªŒï¼ŒåŠ å…¥appçš„è¯ï¼Œå°±èƒ½åœ¨å…¨å±€ä½¿ç”¨äº†")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controller/users.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°å»ºç”¨æˆ·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("verifyParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[a("strong",[t._v("å¦‚æœé”™äº†çš„è¯")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/10.png"}}),t._v(" "),a("p",[a("strong",[t._v("è¿˜æœ‰æ›´å¤šçš„é™åˆ¶æ¡ä»¶ï¼Œä¾‹å¦‚å¿…é€‰ï¼Œä¾‹å¦‚ä»€ä¹ˆç±»å‹ï¼Œè¿™ä¸ªéƒ½å¯ä»¥æŸ¥é˜…")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ¿ç¬¬å…­ç« -koa-mongodb-å®ç°å¢åˆ æ”¹æŸ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ¿ç¬¬å…­ç« -koa-mongodb-å®ç°å¢åˆ æ”¹æŸ¥"}},[t._v("#")]),t._v(" ğŸŒ¿ç¬¬å…­ç« ï¼škoa + MongoDB å®ç°å¢åˆ æ”¹æŸ¥")]),t._v(" "),a("h3",{attrs:{id:"_1-nosqlç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nosqlç®€ä»‹"}},[t._v("#")]),t._v(" 1.NoSQLç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("ä¸å±äºå…³ç³»å‹æ•°æ®åº“çš„å“ªä¸€ç±» è¢«ç§°ä¸º NoSQL")]),t._v(" "),a("li",[t._v("NoSQLæ•°æ®åº“çš„åˆ†ç±»\n"),a("ul",[a("li",[t._v("åˆ—å­˜å‚¨ï¼ˆHBaseï¼‰")]),t._v(" "),a("li",[t._v("ğŸ”¥æ–‡æ¡£å­˜å‚¨ï¼ˆMongoDBï¼‰ï¼ˆæ‰€è°“æ–‡æ¡£å­˜å‚¨å°±æ˜¯æŒ‰ç…§JSONå­˜å‚¨ï¼‰")]),t._v(" "),a("li",[t._v("key-value å­˜å‚¨ï¼ˆRedisï¼‰(é€šå¸¸ç”¨äºç¼“å­˜å’Œæ¶ˆæ¯é€šä¿¡)")]),t._v(" "),a("li",[t._v("......")])])]),t._v(" "),a("li",[t._v("ä¸ºä»€ä¹ˆè¦ç”¨ NoSQL\n"),a("ul",[a("li",[t._v("ç®€å•ï¼ˆæ²¡æœ‰åŸå­æ€§ï¼Œä¸€è‡´æ€§ï¼Œéš”ç¦»æ€§ç­‰å¤æ‚è§„èŒƒï¼‰ï¼ˆå…³ç³»å‹æ•°æ®åº“è¦å¤šä¸ªæœºå™¨ååŒå·¥ä½œï¼Œå¿…é¡»è¦ç¬¦åˆè¿™äº›è§„èŒƒï¼Œè¿™æ ·å°±å¢åŠ äº†å¾ˆå¤šé€šä¿¡ï¼‰")]),t._v(" "),a("li",[t._v("ä¾¿äºæ¨ªå‘æ‹“å±•ï¼ˆå› ä¸ºç®€å•ï¼Œæ²¡æœ‰è§„èŒƒï¼Œæ‰€ä»¥ä¾¿äºæ‹“å±•ï¼‰")]),t._v(" "),a("li",[t._v("é€‚åˆè¶…å¤§è§„æ¨¡çš„æ•°æ®å­˜å‚¨ï¼ˆè¿˜æ˜¯å› ä¸ºæ‹“å±•ï¼‰")]),t._v(" "),a("li",[t._v("å¾ˆçµæ´»çš„å­˜å‚¨å¤æ‚ç»“æ„çš„æ•°æ®")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥2-mongoose-è¿æ¥-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥2-mongoose-è¿æ¥-mongodb"}},[t._v("#")]),t._v(" ğŸ”¥2.mongoose è¿æ¥ MongoDB")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm install mongoose --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼•å…¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨")]),t._v("\nmongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://47.95.0.108:27017/test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("useNewUrlParser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¿æ¥æˆåŠŸ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-è®¾è®¡ç”¨æˆ·æ¨¡å—çš„schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-è®¾è®¡ç”¨æˆ·æ¨¡å—çš„schema"}},[t._v("#")]),t._v(" 3.è®¾è®¡ç”¨æˆ·æ¨¡å—çš„Schema")]),t._v(" "),a("ul",[a("li",[t._v("è¿™é‡Œçš„Schemaæ˜¯JSONçš„ï¼Œå†™å®Œä¹‹åï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ª Model")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬åœ¨ /app/model/users.js å»ºç«‹ä¸€ä¸ªmodelæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢å»ºç«‹users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªè¡¨ç¤ºæ˜¯å­—ç¬¦ä¸²è¿™æ²¡å•¥ï¼Œç¬¬äºŒä¸ªæ„æ€æ˜¯å¿…å†™é¡¹,å½“ç„¶è¿˜æœ‰å¾ˆå¤šè®¾ç½®ï¼Œä¾‹å¦‚ default: ** è¿™æ˜¯è®¾ç½®é»˜è®¤å€¼çš„ï¼Œå½“ç”¨æˆ·æ²¡ä¼ çš„æ—¶å€™ï¼Œè¿™ä¸ªå°±ç”Ÿæ•ˆï¼Œæ›´å¤šè¯·çœ‹ç™¾åº¦")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰é¢Userä¼šåœ¨MongoDBé‡Œé¢å»ºç«‹ä¸€ä¸ªé›†åˆ")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥4-mongodbå®ç°ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥4-mongodbå®ç°ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥"}},[t._v("#")]),t._v(" ğŸ”¥4.MongoDBå®ç°ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼•å…¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../model/users'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsersCtl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ˆfindé‡Œé¢ä¹Ÿèƒ½ä¼ æ­£åˆ™å“¦ï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®IDæŸ¥è¯¢ç‰¹å®šç”¨æˆ·ï¼ˆfindByIdï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·ä¸å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°å»ºç”¨æˆ·ï¼ˆnew + save()ï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œæœ‰ä¸¤ä¸ªç»†èŠ‚ï¼Œä¸€ä¸ªæ˜¯éœ€è¦ newï¼Œå¦ä¸€ä¸ªæ˜¯éœ€è¦ .save()")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿®æ”¹ï¼ˆfindByIdAndUpdateï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByIdAndUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·ä¸å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„ï¼šè¿™é‡Œä¿®æ”¹çš„æ˜¯è¿”å›ä¹‹å‰çš„ä¿¡æ¯")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ é™¤ï¼ˆfindByIdAndRemoveï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByIdAndRemove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·ä¸å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RESUful API è§„èŒƒ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsersCtl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ‹ç¬¬ä¸ƒç« -jwtåœ¨koaæ¡†æ¶ä¸­å®ç°ç”¨æˆ·çš„è®¤è¯ä¸æˆæƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‹ç¬¬ä¸ƒç« -jwtåœ¨koaæ¡†æ¶ä¸­å®ç°ç”¨æˆ·çš„è®¤è¯ä¸æˆæƒ"}},[t._v("#")]),t._v(" ğŸ‹ç¬¬ä¸ƒç« ï¼šJWTåœ¨Koaæ¡†æ¶ä¸­å®ç°ç”¨æˆ·çš„è®¤è¯ä¸æˆæƒ")]),t._v(" "),a("h3",{attrs:{id:"_1-sessionç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-sessionç®€ä»‹"}},[t._v("#")]),t._v(" 1.sessionç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("sessionæ˜¯ä¸€ç§éå¸¸é‡è¦ï¼Œå¸¸è§çš„ï¼Œç”¨æˆ·è®¤è¯ä¸æˆæƒ")])]),t._v(" "),a("p",[a("strong",[t._v("sessionå·¥ä½œåŸç†")])]),t._v(" "),a("ul",[a("li",[t._v("å…ˆç™»å½•ï¼Œç„¶ååç«¯è¿”å›ä¸€ä¸ªsession idï¼Œç„¶åå‰ç«¯å†è¯·æ±‚éç™»å½•çš„ä¸€äº›ä¿¡æ¯çš„æ—¶å€™éƒ½éœ€è¦å¸¦ä¸Šè¿™ä¸ªï¼Œå¦è€…æŠ¥é”™")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/3.png"}}),t._v(" "),a("ul",[a("li",[t._v("sessionçš„ä¼˜åŠ¿\n"),a("ul",[a("li",[t._v("ç›¸æ¯” JWTï¼Œæœ€å¤§çš„ä¼˜åŠ¿å°±åœ¨äºå¯ä»¥ä¸»åŠ¨æ¸…é™¤session")]),t._v(" "),a("li",[t._v("sessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œç›¸å¯¹è¾ƒä¸ºå®‰å…¨")]),t._v(" "),a("li",[t._v("ç»“åˆ cookie ä½¿ç”¨ï¼Œè¾ƒä¸ºçµæ´»ï¼Œå…¼å®¹æ€§è¾ƒå¥½")])])]),t._v(" "),a("li",[t._v("sessionçš„åŠ£åŠ¿\n"),a("ul",[a("li",[t._v("cookie + session åœ¨è·¨åŸŸåœºæ™¯ä¸‹è¡¨ç°å¹¶ä¸å¥½")]),t._v(" "),a("li",[t._v("å¦‚æœæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œéœ€è¦åšå¤šæœºå…±äº«sessionæœºåˆ¶ ğŸ”¥")]),t._v(" "),a("li",[t._v("åŸºäºcookieçš„æœºåˆ¶å¾ˆå®¹æ˜“è¢«CSRF")]),t._v(" "),a("li",[t._v("æŸ¥è¯¢ session ä¿¡æ¯å¯èƒ½ä¼šæœ‰æ•°æ®åº“æŸ¥è¯¢æ“ä½œ")])])]),t._v(" "),a("li",[t._v("sessionç›¸å…³æ¦‚å¿µä»‹ç»\n"),a("ul",[a("li",[t._v("ä¸»è¦æ”¾åˆ°æœåŠ¡å™¨ç«¯ï¼Œç›¸å¯¹äºå®‰å…¨")]),t._v(" "),a("li",[t._v("cookie ä¸»è¦æ”¾åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶ä¸æ˜¯å¾ˆå®‰å…¨")]),t._v(" "),a("li",[t._v("sessionStrongeï¼šä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–è€…æµè§ˆå™¨åè¢«æ¸…é™¤")]),t._v(" "),a("li",[t._v("localstorageï¼šé™¤éè¢«æ¸…é™¤ï¼Œå¦è€…æ°¸ä¹…ä¿å­˜")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-jwtç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-jwtç®€ä»‹"}},[t._v("#")]),t._v(" 2.JWTç®€ä»‹")]),t._v(" "),a("ul",[a("li",[t._v("ä»€ä¹ˆæ˜¯JWTï¼Ÿï¼ˆJSON Web Token æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼‰")]),t._v(" "),a("li",[t._v("å®šä¹‰äº†ä¸€ç§ç´§å‡‘ä¸”ç‹¬ç«‹çš„æ–¹å¼ï¼Œå¯ä»¥å°†å„æ–¹ä¹‹é—´çš„ä¿¡æ¯ä½œä¸ºJSONå¯¹è±¡è¿›è¡Œå®‰å…¨ä¼ è¾“")]),t._v(" "),a("li",[t._v("è¯¥ä¿¡æ¯å¯ä»¥éªŒè¯å’Œä¿¡ä»»ï¼Œå› ä¸ºæ˜¯ç»è¿‡æ•°å­—ç­¾åçš„")]),t._v(" "),a("li",[t._v("JWTçš„æ„æˆï¼šå¤´éƒ¨ï¼ˆHeaderï¼‰, æœ‰æ•ˆè½½è·ï¼ˆPayloadï¼‰,ç­¾åï¼ˆSignatureï¼‰")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/4.png"}}),t._v(" "),a("p",[a("strong",[t._v("æœ‰æ•ˆè½½è·ä»‹ç»ï¼ˆè¿™ä¸ªæŒºé‡è¦çš„ï¼‰")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/5.png"}}),t._v(" "),a("p",[a("strong",[t._v("JWTåŸç†")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/6.png"}}),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-jwt-vs-session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-jwt-vs-session"}},[t._v("#")]),t._v(" 3. JWT vs session")]),t._v(" "),a("ul",[a("li",[t._v("å¯æ‹“å±•æ€§\n"),a("ul",[a("li",[t._v("session ä¸€èˆ¬éƒ½æ˜¯å­˜åˆ° redis è¿™ç§æ•°æ®åº“ä¸­ï¼Œä½ å¯ä»¥éœ€è¦åšä¸€ä¸ªä¸­å¿ƒå¼çš„sessionå­˜å‚¨ç³»ç»Ÿæ‰è¡Œï¼Œå¦åˆ™æ²¡åŠæ³•å…±äº«")]),t._v(" "),a("li",[t._v("åŸºäº token åŸºäº ä»¤ç‰Œçš„è¿™ç§æ–¹å¼æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„æ‹“å±•ï¼ˆå¬ç€æ€ä¹ˆæ„Ÿè§‰è¿™ä¸ªå¾ˆæºœ ğŸ”¥ï¼‰")])])]),t._v(" "),a("li",[t._v("å®‰å…¨æ€§ï¼ˆ...è®²äº†å››ä¸ªï¼Œæœ‰ç©ºçœ‹ä¸‹å§ï¼‰")]),t._v(" "),a("li",[t._v("RESTful APIï¼ˆè¦æ±‚æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™å°±ç”¨JWTï¼‰")]),t._v(" "),a("li",[t._v("æ€§èƒ½ï¼ˆå„æœ‰åˆ©å¼Šï¼‰\n"),a("ul",[a("li",[t._v("JWTå¯èƒ½æ€§èƒ½ä¸å¥½ï¼Œå› ä¸º session æ›´å°")]),t._v(" "),a("li",[t._v("session æ¯•ç«Ÿæ”¾åˆ°å®¢æˆ·ç«¯çš„æ˜¯ä¸€æ®µ idï¼Œä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è¿˜è¦æ ¹æ®è¿™ä¸ªidæ‹¿çœŸæ­£çš„ session æ•°æ®ï¼Œä¹Ÿæ˜¯æœ‰æ€§èƒ½æ¶ˆè€—çš„")])])]),t._v(" "),a("li",[t._v("æ—¶æ•ˆæ€§\n"),a("ul",[a("li",[t._v("JWT å¿…é¡»ç­‰åˆ°è¿‡æœŸæ‰æ›´æ–°ï¼Œä¸èƒ½ä¸»åŠ¨é”€æ¯")]),t._v(" "),a("li",[t._v("session å¯ä»¥ä¸»åŠ¨é”€æ¯")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_4-åœ¨-node-js-ä¸­ä½¿ç”¨-jwt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-åœ¨-node-js-ä¸­ä½¿ç”¨-jwt"}},[t._v("#")]),t._v(" 4.åœ¨ Node.js ä¸­ä½¿ç”¨ JWT")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i jsonwebtoken")]),t._v(" "),a("li",[t._v("ç­¾åï¼š")]),t._v(" "),a("li",[t._v("é€†å‘éªŒè¯ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jwt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jsonwebtoken'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­¾åï¼ˆå‚æ•°ä¸€ï¼Œå°±æ˜¯ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå‚æ•°äºŒ æ˜¯ç§˜é’¥ï¼‰")]),t._v("\ntoken "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jwt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemh1IiwiaWF0IjoxNTYxNzI0NTUzfQ.-JVehTSs3neUbRzF__9lTsXEul_rvA5WYNbpx702Eo4'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éªŒè¯ï¼ˆå‚æ•°ä¸€ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„tokenï¼Œå‚æ•°äºŒ ç§˜é’¥ï¼‰")]),t._v("\njwt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_5-å®ç°ç”¨æˆ·æ³¨å†Œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-å®ç°ç”¨æˆ·æ³¨å†Œ"}},[t._v("#")]),t._v(" 5.å®ç°ç”¨æˆ·æ³¨å†Œ")]),t._v(" "),a("ul",[a("li",[t._v("è®¾è®¡ç”¨æˆ· Schema")]),t._v(" "),a("li",[t._v("ç¼–å†™ä¿è¯å”¯ä¸€æ€§çš„é€»è¾‘")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾è®¡ç”¨æˆ· Schema")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¿”å›ä¸å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç»™ä»–è®¾ç½®ä¸‹ï¼Œè®©å®ƒä¸è¿”å›")]),t._v("\n    __v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªè¡¨ç¤ºæ˜¯å­—ç¬¦ä¸²è¿™æ²¡å•¥ï¼Œç¬¬äºŒä¸ªæ„æ€æ˜¯å¿…å†™é¡¹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// select çš„æ„æ€æ˜¯ä¸è¿”å›ï¼Œè¿™æ˜¯å¯†ç ï¼Œå¦‚æœèƒ½è¢«è¯·æ±‚åˆ°ï¼Œé‚£æ˜¯ä¸æ˜¯å¾ˆææ€–ğŸ™€")]),t._v("\n    password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°å»ºç”¨æˆ·ï¼ˆæœ‰ä¸ªæŸ¥è¯¢ç”¨æˆ·åæ˜¯å¦é‡å¤ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repeatedUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢æ˜¯å¦æœ‰è¿™ä¸ªç”¨æˆ·äº†")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("repeatedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("409")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·å·²ç»å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_6-å®ç°ç™»å½•å¹¶è·å–-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-å®ç°ç™»å½•å¹¶è·å–-token"}},[t._v("#")]),t._v(" 6.å®ç°ç™»å½•å¹¶è·å– Token")]),t._v(" "),a("ul",[a("li",[t._v("ç™»å½•æ¥å£çš„è®¾è®¡ï¼ˆå› ä¸ºå®ƒä¸å±äºç”¨æˆ·å¢åˆ æ”¹æŸ¥ä¸­çš„ä¸€ç§ï¼‰")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ jsonwebtoken ç”Ÿæˆ token")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç™»å½•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¡éªŒç”¨æˆ·åå’Œå¯†ç ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç™»å½•æ­£ç¡®ï¼Œç”Ÿæˆtoken")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" josnwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("expiresIn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‚æ•°ä¸€ è´¦å·å¯†ç ï¼Œå‚æ•°äºŒ ç§˜é’¥ï¼Œå‚æ•°ä¸‰ é…ç½®ï¼Œè¿™é‡Œé…ç½®çš„æ˜¯è¿‡æœŸæ—¶é—´ 1d 1å¤©")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_7-è‡ªå·±ç¼–å†™ä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-è‡ªå·±ç¼–å†™ä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ"}},[t._v("#")]),t._v(" 7.è‡ªå·±ç¼–å†™ä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_8-ç”¨koa-jwtä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-ç”¨koa-jwtä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ"}},[t._v("#")]),t._v(" 8.ç”¨koa-jwtä¸­é—´ä»¶å®ç°ç”¨æˆ·çš„è®¤è¯å’Œæˆæƒ")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i koa-jwt --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è·¯ç”± /routes/users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jwt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-jwt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhukunpeng'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼ å…¥ç§˜é’¥")]),t._v("\n\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" checkOwner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" findUserId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®ID æŸ¥è¯¢ç‰¹å®šç”¨æˆ· æ•°æ®")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /controller/users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æƒé™æ ¡éªŒ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkOwner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ²¡æœ‰æƒé™æŸ¥çœ‹'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/7.png"}}),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ²ç¬¬å…«ç« -ä¸Šä¼ å›¾ç‰‡æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ²ç¬¬å…«ç« -ä¸Šä¼ å›¾ç‰‡æ¨¡å—"}},[t._v("#")]),t._v(" ğŸ²ç¬¬å…«ç« ï¼šä¸Šä¼ å›¾ç‰‡æ¨¡å—")]),t._v(" "),a("h3",{attrs:{id:"_1-ä¸Šä¼ å›¾ç‰‡éœ€æ±‚åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸Šä¼ å›¾ç‰‡éœ€æ±‚åˆ†æ"}},[t._v("#")]),t._v(" 1.ä¸Šä¼ å›¾ç‰‡éœ€æ±‚åˆ†æ")]),t._v(" "),a("ul",[a("li",[t._v("ç”¨æˆ·å¤´åƒ")]),t._v(" "),a("li",[t._v("å°é¢å›¾ç‰‡")]),t._v(" "),a("li",[t._v("é—®é¢˜å’Œå›ç­”ä¸­çš„å›¾ç‰‡")]),t._v(" "),a("li",[t._v("è¯é¢˜å›¾ç‰‡")])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("åŸºç¡€åŠŸèƒ½ï¼šä¸Šä¼ å›¾ç‰‡ï¼Œç”Ÿæˆå›¾ç‰‡é“¾æ¥")]),t._v(" "),a("li",[t._v("é™„åŠ åŠŸèƒ½ï¼šé™åˆ¶ä¸Šä¼ å›¾ç‰‡çš„å¤§å°å’Œç±»å‹ï¼Œç”Ÿæˆé«˜ä¸­ä½ä¸‰ç§åˆ†è¾¨ç‡çš„å›¾ç‰‡é“¾æ¥ï¼Œç”ŸæˆCDN")]),t._v(" "),a("li",[t._v("ä¸Šä¼ å›¾ç‰‡çš„æŠ€æœ¯æ–¹æ¡ˆ\n"),a("ul",[a("li",[t._v("é˜¿é‡Œäº‘OSSç­‰äº‘æœåŠ¡ï¼Œæ¨èç”Ÿæˆç¯å¢ƒä¸‹ä½¿ç”¨")]),t._v(" "),a("li",[t._v("ç›´æ¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå› ä¸ºä¸ç¨³å®š")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-ä½¿ç”¨-koa-body-ä¸­é—´ä»¶è·å–ä¸Šä¼ çš„æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä½¿ç”¨-koa-body-ä¸­é—´ä»¶è·å–ä¸Šä¼ çš„æ–‡ä»¶"}},[t._v("#")]),t._v(" 2.ä½¿ç”¨ koa-body ä¸­é—´ä»¶è·å–ä¸Šä¼ çš„æ–‡ä»¶")]),t._v(" "),a("ul",[a("li",[t._v("ä¹‹å‰æˆ‘ä»¬ç”¨çš„æ˜¯ koa-bodyparser ï¼Œä½†æ˜¯è¿™ä¸ªä¸æ”¯æŒæ–‡ä»¶ï¼Œåªæ”¯æŒ JSON å’Œ... ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ koa-body è¿™ä¸ªä¸­é—´ä»¶")]),t._v(" "),a("li",[t._v("å®‰è£…ï¼šnpm i koa-body  --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js && å»ºç«‹ public/uploads ç”¨æ¥ç››æ”¾ä¸Šä¼ æ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bodyBody "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    multipart"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨æ–‡ä»¶ä¼ è¾“")]),t._v("\n    formidable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        uploadDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app/public/uploads'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–‡ä»¶ä¸Šä¼ è·¯å¾„")]),t._v("\n        keepExtensions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿ç•™æ‹“å±•å")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æ è¯·æ±‚bodyä¸­çš„ JSON")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹ controller/home.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeCtl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸Šä¼ æ–‡ä»¶")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("upload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¸Šä¼ æˆåŠŸ'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeCtl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹ router/home.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// new Router({prefix:'user'}) è¿™æ ·å¯ä»¥è®¾ç½®è·¯ç”±å‰ç¼€ï¼Œä¹Ÿæ˜¯å®ç”¨çš„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" upload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../controller/home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/upload'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" router\n\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-ä½¿ç”¨-koa-static-ä¸­é—´ä»¶ç”Ÿæˆå›¾ç‰‡é“¾æ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½¿ç”¨-koa-static-ä¸­é—´ä»¶ç”Ÿæˆå›¾ç‰‡é“¾æ¥"}},[t._v("#")]),t._v(" 3.ä½¿ç”¨ koa-static ä¸­é—´ä»¶ç”Ÿæˆå›¾ç‰‡é“¾æ¥")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£…ï¼šnpm i koa-static --save")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" koaStatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-static'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("koaStatic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app/public/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆä¸Šä¼ å›¾ç‰‡é“¾æ¥ï¼Œè¿™é‡Œè¿˜å¯åŠ¨äº†é™æ€æœåŠ¡ï¼Œç›´æ¥ä»£ç†æˆ‘ä»¬è®¾ç½®çš„æ–‡ä»¶è·¯å¾„")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controller/home.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeCtl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸Šä¼ æ–‡ä»¶")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("upload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" basename "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/uploads/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("basename"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeCtl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_4-ç¼–å†™å‰ç«¯é¡µé¢ä¸Šä¼ æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç¼–å†™å‰ç«¯é¡µé¢ä¸Šä¼ æ–‡ä»¶"}},[t._v("#")]),t._v(" 4.ç¼–å†™å‰ç«¯é¡µé¢ä¸Šä¼ æ–‡ä»¶")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("action")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://localhost:3000/upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("enctype")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("multipart/form-data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("POST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ä¸Šä¼ "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("è¿”å›ç»“æœ")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:3000/uploads/upload_34ca030139713427223a1c8b604b603a.jpg"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ€ç¬¬ä¹ç« -ä¸ªäººèµ„æ–™æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ€ç¬¬ä¹ç« -ä¸ªäººèµ„æ–™æ¨¡å—"}},[t._v("#")]),t._v(" ğŸ€ç¬¬ä¹ç« ï¼šä¸ªäººèµ„æ–™æ¨¡å—")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_1-ä¸ªäººèµ„æ–™çš„-schema-è®¾è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸ªäººèµ„æ–™çš„-schema-è®¾è®¡"}},[t._v("#")]),t._v(" 1.ä¸ªäººèµ„æ–™çš„ schema è®¾è®¡")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// module/users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªè¡¨ç¤ºæ˜¯å­—ç¬¦ä¸²è¿™æ²¡å•¥ï¼Œç¬¬äºŒä¸ªæ„æ€æ˜¯å¿…å†™é¡¹")]),t._v("\n    password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤´åƒçš„URL")]),t._v("\n    gender"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'famale'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ€§åˆ«ï¼Œè¿™é‡Œåé¢ enum æ˜¯mongooseçš„å¯æšä¸¾ç±»å‹ï¼Œæšä¸¾çš„å€¼æ˜¯é‚£ä¸¤ä¸ª, åé¢çš„æ˜¯é»˜è®¤å€¼ male")]),t._v("\n    handline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€å¥è¯ä»‹ç»")]),t._v("\n    loacations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å±…ä½åœ°ï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²æ•°ç»„")]),t._v("\n    employments"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŒä¸šç»å†")]),t._v("\n        type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            company"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¬å¸")]),t._v("\n            job"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŒä½")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰é¢Userä¼šåœ¨MongoDBé‡Œé¢å»ºç«‹ä¸€ä¸ªé›†åˆ")]),t._v("\n\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-ä¸ªäººèµ„æ–™çš„å‚æ•°æ ¡éªŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸ªäººèµ„æ–™çš„å‚æ•°æ ¡éªŒ"}},[t._v("#")]),t._v(" 2.ä¸ªäººèµ„æ–™çš„å‚æ•°æ ¡éªŒ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿˜æ˜¯æœ‰ä¸€äº›å’Œ mongoose ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œè¿™é‡Œè¦æ³¨æ„")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("verifyParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// required: falseè¡¨ç¤ºéå¿…é€‰")]),t._v("\n  gender"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  handline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  loacations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'array'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" itemType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// itemTypeè¿™æ˜¯è¡¨ç¤ºæ•°ç»„é‡Œé¢çš„é¡¹æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿™å’Œmongooseä¸ä¸€æ ·")]),t._v("\n  employments"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'array'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" itemType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥3-restful-api-æœ€ä½³å®è·µ-å­—æ®µè¿‡æ»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥3-restful-api-æœ€ä½³å®è·µ-å­—æ®µè¿‡æ»¤"}},[t._v("#")]),t._v(" ğŸ”¥3.RESTful API æœ€ä½³å®è·µ - å­—æ®µè¿‡æ»¤")]),t._v(" "),a("ul",[a("li",[t._v("æœ‰å“ªäº›å­—æ®µæ˜¾ç¤ºï¼Œå“ªäº›å­—æ®µä¸æ˜¾ç¤ºï¼Œæœ‰ç§GrhpQLçš„æ„Ÿè§‰")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ select: false æˆ‘ä»¬å¯ä»¥éšè—ä¸€äº›è¿”å›å­—æ®µ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªè¡¨ç¤ºæ˜¯å­—ç¬¦ä¸²è¿™æ²¡å•¥ï¼Œç¬¬äºŒä¸ªæ„æ€æ˜¯å¿…å†™é¡¹")]),t._v("\n    password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤´åƒçš„URL")]),t._v("\n    gender"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'famale'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ€§åˆ«ï¼Œè¿™é‡Œåé¢ enum æ˜¯mongooseçš„å¯æšä¸¾ç±»å‹ï¼Œæšä¸¾çš„å€¼æ˜¯é‚£ä¸¤ä¸ª, åé¢çš„æ˜¯é»˜è®¤å€¼ male")]),t._v("\n    handline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€å¥è¯ä»‹ç»")]),t._v("\n    loacations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å±…ä½åœ°ï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²æ•°ç»„")]),t._v("\n    employments"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŒä¸šç»å†")]),t._v("\n        type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            company"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¬å¸")]),t._v("\n            job"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŒä½")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /controller/users.jsï¼ˆä¸»è¦å°±æ˜¯å€ŸåŠ©mongoose çš„ selectæ–¹æ³•ï¼Œæ‹¼æ¥æˆ +...+...è¿™ç§å½¢å¼ï¼‰")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é—®é¢˜å°±æ˜¯ ç°åœ¨ä¸€ä¸ªå¯ä»¥ï¼Œä½†æ˜¯ä¸¤ä¸ªå°±ä¸è¡Œäº†")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢ç”¨æˆ·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fields "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™æ˜¯ä»¥åˆ†å·éš”å¼€çš„")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" selectFidlds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†åˆ†å·éš”å¼€çš„è½¬ä¸º +...+ è¿™ç§å½¢å¼")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" selectFidlds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("selectFidlds"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ³ç¬¬åç« -å…³æ³¨ä¸ç²‰ä¸æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ³ç¬¬åç« -å…³æ³¨ä¸ç²‰ä¸æ¨¡å—"}},[t._v("#")]),t._v(" ğŸŒ³ç¬¬åç« ï¼šå…³æ³¨ä¸ç²‰ä¸æ¨¡å—")]),t._v(" "),a("h3",{attrs:{id:"_1-å…³æ³¨ä¸ç²‰ä¸çš„-schema-è®¾è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…³æ³¨ä¸ç²‰ä¸çš„-schema-è®¾è®¡"}},[t._v("#")]),t._v(" 1.å…³æ³¨ä¸ç²‰ä¸çš„ schema è®¾è®¡")]),t._v(" "),a("p",[a("strong",[t._v("åŠŸèƒ½ç‚¹")])]),t._v(" "),a("ul",[a("li",[t._v("å…³æ³¨ï¼Œå–æ¶ˆå…³æ³¨")]),t._v(" "),a("li",[t._v("è·å–å…³æ³¨äººï¼Œç²‰ä¸åˆ—è¡¨ï¼ˆç”¨æˆ·-ç”¨æˆ· å¤šå¯¹å¤šå…³ç³»ï¼‰")])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\n  following"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…³æ³¨")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éå¸¸å¥½çš„ä¸€ä¸ªæŠ€å·§ï¼Œä½†æ˜¯æˆ‘ä¸å¤ªæ‡‚")]),t._v("\n      select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-restful-api-é£æ ¼çš„å…³æ³¨ä¸ç²‰ä¸æ¥å£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-restful-api-é£æ ¼çš„å…³æ³¨ä¸ç²‰ä¸æ¥å£"}},[t._v("#")]),t._v(" 2.RESTful API é£æ ¼çš„å…³æ³¨ä¸ç²‰ä¸æ¥å£")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controller/users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–ç”¨æˆ·çš„å…³æ³¨è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listFollowing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+following'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("populate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+following'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–çš„å…³æ³¨è€…æ˜¯ç”¨æˆ·çš„IDï¼Œæˆ‘ä»¬æ­£å¸¸æ¥è¯´éœ€è¦éå†è¿™ä¸ªIDï¼Œæ‰èƒ½æ‹¿åˆ°æ¯ä¸ªå…³æ³¨è€…çš„å¤´åƒå’Œå…¶ä»–ä¿¡æ¯")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½†æ˜¯ model/users.js é‡Œé¢çš„ç»“æ„é‚£ä¹ˆå†™ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ populate() è¿™ä¸ªå¿«æ·æ–¹æ³•äº†")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·ä¸å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("following\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å…³æ³¨ç”¨æˆ·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("follow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+following'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("following"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("following"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠæ•°ç»„æ”¾åˆ°çš„IDæ”¾åˆ°é‡Œé¢")]),t._v("\n    me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å–æ¶ˆå…³æ³¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unfollow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+following'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("following"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("following"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-è·å–ç²‰ä¸")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listFollowers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("following"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" users\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routes/users.js")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/:id/following'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" listFollowing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æŸä¸ªç”¨æˆ· å…³æ³¨äº†è°")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/:id/followers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" listFollowers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æŸä¸ªç”¨æˆ· å…³æ³¨äº†è°")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/following/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" follow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å…³æ³¨ç”¨æˆ·")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/following/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unfollow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å–æ¶ˆå…³æ³¨")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-ç¼–å†™æ ¡éªŒç”¨æˆ·å­˜åœ¨ä¸å¦çš„ä¸­é—´ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼–å†™æ ¡éªŒç”¨æˆ·å­˜åœ¨ä¸å¦çš„ä¸­é—´ä»¶"}},[t._v("#")]),t._v(" 3.ç¼–å†™æ ¡éªŒç”¨æˆ·å­˜åœ¨ä¸å¦çš„ä¸­é—´ä»¶")]),t._v(" "),a("p",[a("strong",[t._v("åœ¨å…³æ³¨ï¼Œå’Œå–æ¶ˆå…³æ³¨ä¹‹å‰ï¼Œæ ¡éªŒä¸€ä¸‹ç”¨æˆ·å­˜åœ¨ä¸å¦")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controller/users.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æµ‹ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼ˆä¸­é—´ä»¶ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkUserExist")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç”¨æˆ·ä¸å­˜åœ¨'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routes/users.jsï¼ˆæ·»åŠ ï¼‰")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/following/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" checkUserExist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" follow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å…³æ³¨ç”¨æˆ·")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user/following/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" checkUserExist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unfollow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·-å–æ¶ˆå…³æ³¨")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ´ç¬¬åä¸€ç« -è¯é¢˜æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ´ç¬¬åä¸€ç« -è¯é¢˜æ¨¡å—"}},[t._v("#")]),t._v(" ğŸŒ´ç¬¬åä¸€ç« ï¼šè¯é¢˜æ¨¡å—")]),t._v(" "),a("h3",{attrs:{id:"_1-è¯é¢˜å¢æ”¹æŸ¥æ¥å£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¯é¢˜å¢æ”¹æŸ¥æ¥å£"}},[t._v("#")]),t._v(" 1.è¯é¢˜å¢æ”¹æŸ¥æ¥å£")]),t._v(" "),a("p",[a("strong",[t._v("åŠŸèƒ½æ¨¡å—åŠŸèƒ½ç‚¹")])]),t._v(" "),a("ul",[a("li",[t._v("è¯é¢˜çš„å¢æ”¹æŸ¥ï¼ˆæ²¡æœ‰åˆ ï¼Œå› ä¸ºè¯é¢˜å…³è”å¤ªå¤šï¼‰")]),t._v(" "),a("li",[t._v("åˆ†é¡µï¼Œæ¨¡ç³ŠæŸ¥è¯¢")]),t._v(" "),a("li",[t._v("ç”¨æˆ·å±æ€§ä¸­çš„è¯é¢˜å¼•ç”¨")]),t._v(" "),a("li",[t._v("å…³æ³¨/å–æ¶ˆå…³æ³¨è¯é¢˜ï¼Œç”¨æˆ·å…³æ³¨çš„è¯é¢˜åˆ—è¡¨")])]),t._v(" "),a("p",[a("strong",[t._v("è®¾è®¡Schema")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹æ–°æ–‡ä»¶ modle/topics.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" topicSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯é¢˜åç§°")]),t._v("\n    avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯é¢˜å›¾ç‰‡")]),t._v("\n    introduction"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯é¢˜ç®€ä»‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topicSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å†™Controller")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹æ–°æ–‡ä»¶ controller/topics.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Topic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../model/topics'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TopicsCtl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–è¯é¢˜åˆ—è¡¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢ç‰¹å®šè¯é¢˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const { fields } = ctx.query")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const selectFields = fields.split(';').filter(f => f).map(f => ' +' + f).join('')")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const topic = await Topic.findById(ctx.params.id).select(selectFields)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" topic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" topic\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºè¯é¢˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("verifyParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            introduction"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" topic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Topic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" topic\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿®æ”¹è¯é¢˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("verifyParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            introduction"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" topic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByIdAndUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" topic\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TopicsCtl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å†™Routes")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹æ–‡ä»¶ routes/topics.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// new Router({prefix:'user'}) è¿™æ ·å¯ä»¥è®¾ç½®è·¯ç”±å‰ç¼€ï¼Œä¹Ÿæ˜¯å®ç”¨çš„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" findById"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../controller/topics'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jwt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-jwt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhukunpeng'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼ å…¥ç§˜é’¥")]),t._v("\n\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/topics'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢æ‰€æœ‰è¯é¢˜")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/topics'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºè¯é¢˜")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/topics/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" findById"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–ç‰¹å®šè¯é¢˜")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/topics/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿®æ”¹ç‰¹å®šè¯é¢˜")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" router\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥2-åˆ†é¡µå®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥2-åˆ†é¡µå®ç°"}},[t._v("#")]),t._v(" ğŸ”¥2.åˆ†é¡µå®ç°")]),t._v(" "),a("p",[a("strong",[t._v("æ ¹æ®æŸ¥è¯¢å­—ç¬¦ä¸²æ¥é™åˆ¶åˆ—è¡¨çš„è¿”å›å€¼")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–è¯é¢˜åˆ—è¡¨ çš„åˆ†é¡µé€»è¾‘ï¼ˆä¸»è¦æ˜¯ç®—æ³•ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" per_page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰æ˜¯ç¬¬å‡ é¡µ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" perPage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("per_page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯é¡µæ˜¾ç¤ºå‡ æ¡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mongoose limit() å¯ä»¥è·å–å‡ ä¸ªï¼Œskip() å¯ä»¥ä»ç¬¬å‡ ä¸ªå¼€å§‹ï¼Œè™½ç„¶æ²¡æœ‰ limit(x, y) è¿™ç§å¥½ï¼Œä½†æ˜¯ä¹Ÿè¡Œ")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("perPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("skip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" perPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šhttp://localhost:3000/topics?page=1&per_page=2")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"ğŸ”¥3-æ¨¡ç³Šæœç´¢-å…³é”®è¯æœç´¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥3-æ¨¡ç³Šæœç´¢-å…³é”®è¯æœç´¢"}},[t._v("#")]),t._v(" ğŸ”¥3.æ¨¡ç³Šæœç´¢ï¼ˆå…³é”®è¯æœç´¢ï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("å€ŸåŠ©mongooseè¯­æ³•ç³–ï¼Œä¸€è¡Œä»£ç å°±èƒ½å®ç°ï¼šåœ¨find() é‡Œé¢å†™æ­£åˆ™")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Topic\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RegExp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("perPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("skip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" perPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mongooseä½¿ç”¨å¤šä¸ªå­—æ®µçš„æ¨¡ç³Š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .find({ $or: [{name: ...}, {...}] })")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"â£ï¸4-ç”¨æˆ·å±æ€§ä¸­çš„è¯é¢˜å¼•ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#â£ï¸4-ç”¨æˆ·å±æ€§ä¸­çš„è¯é¢˜å¼•ç”¨"}},[t._v("#")]),t._v(" â£ï¸4.ç”¨æˆ·å±æ€§ä¸­çš„è¯é¢˜å¼•ç”¨")]),t._v(" "),a("p",[a("strong",[t._v("æ²¡å¤ªæ‡‚ï¼Œä½†æ˜¯è¿™é‡Œ type: Schema.Types.ObjectId, ref: 'Topic' æ–¹æ³•æ˜¯ä¸€ç§å¼•ç”¨ï¼Œç±»ä¼¼äºMySQLçš„å¤–é“¾ï¼Œå¤šè¡¨æŸ¥è¯¢ç”¨çš„é‚£ç§")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_5-å…³æ³¨è¯é¢˜æ¥å£-ç•¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-å…³æ³¨è¯é¢˜æ¥å£-ç•¥"}},[t._v("#")]),t._v(" 5.å…³æ³¨è¯é¢˜æ¥å£ï¼ˆç•¥...ï¼‰")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ±ç¬¬åäºŒç« -é—®é¢˜æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ±ç¬¬åäºŒç« -é—®é¢˜æ¨¡å—"}},[t._v("#")]),t._v(" ğŸŒ±ç¬¬åäºŒç« ï¼šé—®é¢˜æ¨¡å—")]),t._v(" "),a("h3",{attrs:{id:"_1-é—®é¢˜çš„å¢åˆ æ”¹æŸ¥-ç”¨æˆ·çš„é—®é¢˜åˆ—è¡¨-ç”¨æˆ·-é—®é¢˜-ä¸€å¯¹å¤šå…³ç³»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-é—®é¢˜çš„å¢åˆ æ”¹æŸ¥-ç”¨æˆ·çš„é—®é¢˜åˆ—è¡¨-ç”¨æˆ·-é—®é¢˜-ä¸€å¯¹å¤šå…³ç³»"}},[t._v("#")]),t._v(" 1.é—®é¢˜çš„å¢åˆ æ”¹æŸ¥ï¼Œç”¨æˆ·çš„é—®é¢˜åˆ—è¡¨ï¼ˆç”¨æˆ·-é—®é¢˜ ä¸€å¯¹å¤šå…³ç³»ï¼‰")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªç”¨æˆ·å¯ä»¥æå¤šä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä¸€ä¸ªé—®é¢˜åªå±äºä¸€ä¸ªç”¨æˆ·")]),t._v(" "),a("p",[a("strong",[t._v("å»ºç«‹ Schema")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" questionSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é—®é¢˜æ ‡é¢˜")]),t._v("\n    description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æè¿°")]),t._v("\n    questioner"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æé—®è€…ï¼Œè¿™ä¸ªè®¾è®¡æ˜¯å®ç° ä¸€å¯¹å¤šçš„æ ¸å¿ƒ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Question'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" questionSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å®ç° Controller")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n")])])]),a("p",[a("strong",[t._v("â£ï¸è¿™é‡Œæˆ‘çªç„¶æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œå°±æ˜¯ å¯ä»¥æŠ½è±¡å‡ºä¸€ä¸ªåŸºæœ¬ç±»ï¼Œä¸Šé¢æŒ‚è½½åˆ†é¡µæ–¹æ³•ï¼Œæ¨¡ç³ŠæŸ¥è¯¢æ–¹æ³•ç­‰ï¼Œç”šè‡³å¢åˆ æ”¹æŸ¥æ¥å£ä¹Ÿèƒ½æŠ½ç¦»æˆå…¬å…±çš„ï¼Œä¸‹é¢çš„ç±»è°æƒ³ç”¨äº†ï¼Œå°±ç›´æ¥ç”¨ç»§æ‰¿ï¼Œç„¶åä½¿ç”¨äº†")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-è¯é¢˜-é—®é¢˜-å¤šå¯¹å¤šå…³ç³»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¯é¢˜-é—®é¢˜-å¤šå¯¹å¤šå…³ç³»"}},[t._v("#")]),t._v(" 2.è¯é¢˜-é—®é¢˜ å¤šå¯¹å¤šå…³ç³»")]),t._v(" "),a("ul",[a("li",[t._v("æ€è·¯ï¼šä¸¤ä¸ªåˆ—è¡¨ï¼Œå°±æ˜¯è¿™ä¸¤ä¸ªåˆ—è¡¨éƒ½èƒ½æˆä¸ºå¯¹æ–¹çš„åˆ—è¡¨")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ¿ç¬¬åä¸‰ç« -ç­”æ¡ˆæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ¿ç¬¬åä¸‰ç« -ç­”æ¡ˆæ¨¡å—"}},[t._v("#")]),t._v(" ğŸŒ¿ç¬¬åä¸‰ç« ï¼šç­”æ¡ˆæ¨¡å—")]),t._v(" "),a("h3",{attrs:{id:"_1-ç­”æ¡ˆæ¨¡å—äºŒçº§åµŒå¥—çš„å¢åˆ æ”¹æŸ¥æ¥å£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç­”æ¡ˆæ¨¡å—äºŒçº§åµŒå¥—çš„å¢åˆ æ”¹æŸ¥æ¥å£"}},[t._v("#")]),t._v(" 1.ç­”æ¡ˆæ¨¡å—äºŒçº§åµŒå¥—çš„å¢åˆ æ”¹æŸ¥æ¥å£")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ¾ç¬¬åå››ç« -è¯„è®ºæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ¾ç¬¬åå››ç« -è¯„è®ºæ¨¡å—"}},[t._v("#")]),t._v(" ğŸŒ¾ç¬¬åå››ç« ï¼šè¯„è®ºæ¨¡å—")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ¿ç¬¬åäº”ç« -é¡¹ç›®ä¸Šçº¿-éƒ¨ç½²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ¿ç¬¬åäº”ç« -é¡¹ç›®ä¸Šçº¿-éƒ¨ç½²"}},[t._v("#")]),t._v(" ğŸŒ¿ç¬¬åäº”ç« ï¼šé¡¹ç›®ä¸Šçº¿ï¼Œéƒ¨ç½²")]),t._v(" "),a("h3",{attrs:{id:"_1-ç”¨nginxå®ç°ç«¯å£è½¬å‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç”¨nginxå®ç°ç«¯å£è½¬å‘"}},[t._v("#")]),t._v(" 1.ç”¨NGINXå®ç°ç«¯å£è½¬å‘")]),t._v(" "),a("p",[a("strong",[t._v("ä¸€èˆ¬æœåŠ¡å™¨å¾ˆå¤šç«¯å£éƒ½æ²¡å¼€ï¼Œä¸€èˆ¬80ç«¯å£å¼€äº†ï¼ŒNGINX å°±å¯ä»¥ä»£ç†80ç«¯å£ï¼Œç„¶åè®¿é—®åˆ°å†…ç½‘çš„å…·ä½“ç«¯å£ä¸Š")])]),t._v(" "),a("ul",[a("li",[t._v("è¯­æ³•æ£€æŸ¥ï¼šnginx -tï¼ˆä¸»è¦ä¿®æ”¹nginx.confï¼‰")]),t._v(" "),a("li",[t._v("é‡å¯ï¼šservice nginx restart")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/8.png"}}),t._v(" "),a("p",[a("strong",[t._v("Postmanç”Ÿæˆæ–‡æ¡£")])]),t._v(" "),a("ul",[a("li",[t._v("è¿˜æ˜¯å¾ˆæ¼‚äº®çš„")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.note/5.%E5%85%B6%E4%BB%96%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/%E6%85%95%E8%AF%BE%E7%BD%91%E8%AF%BE%E7%A8%8BRESTful%20API/9.png"}}),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ“šå‚è€ƒåˆ—è¡¨-æœ€åæ›´æ–°2019-6-23-23-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“šå‚è€ƒåˆ—è¡¨-æœ€åæ›´æ–°2019-6-23-23-23"}},[t._v("#")]),t._v(" ğŸ“šå‚è€ƒåˆ—è¡¨ï¼ˆæœ€åæ›´æ–°2019.6.23 23:23ï¼‰")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://coding.imooc.com/learn/list/354.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ…•è¯¾ç½‘è¯¾ç¨‹-Node.jså¼€å‘ä»¿çŸ¥ä¹æœåŠ¡ç«¯ æ·±å…¥ç†è§£RESTful API"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);