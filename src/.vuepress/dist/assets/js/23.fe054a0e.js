(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{378:function(t,s,a){"use strict";a.r(s);var n=a(47),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_5-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-其他"}},[t._v("#")]),t._v(" 5.其他")]),t._v(" "),a("blockquote",[a("p",[t._v("声明：这个栏目，存放一些过小的问题（不适合单独成一章的），如果后期拓展的很多，就可以考虑单独抽离出去一部分知识")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_1-https证书配置-申请配置ssl证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-https证书配置-申请配置ssl证书"}},[t._v("#")]),t._v(" 1.HTTPS证书配置（申请配置ssl证书）")]),t._v(" "),a("ul",[a("li",[t._v("申请了ssl证书，就能让网站变为 https开头的，更安全，额，似乎比我想的简单")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/1.quickcheck/3.%E8%BF%90%E7%BB%B4/1.png"}}),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/1.quickcheck/3.%E8%BF%90%E7%BB%B4/2.png"}}),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/1.quickcheck/3.%E8%BF%90%E7%BB%B4/3.png"}}),t._v(" "),a("ul",[a("li",[t._v("之后还需要进行配置：https://cloud.tencent.com/document/product/400/35244")])]),t._v(" "),a("img",{attrs:{src:"https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/1.quickcheck/3.%E8%BF%90%E7%BB%B4/3.png"}}),t._v(" "),a("ul",[a("li",[t._v("🔥注意：主域名申请的单域名证书，二级域名不在https加密保护内，所以 notes.itzkp.com 还是 http协议，而通配符证书可以保护主域名下所有的二级子域名")])]),t._v(" "),a("p",[t._v("于是乎我又申请了：notes.itzkp.com 和 jl.itzkp.com 的ssl证书，难点就是 二级域名的解析我是放到了，conf.d 文件夹下，我这怎么设置 ssl呢？")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 示例：在conf.d 下面的 notes.conf下")]),t._v("\n\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name notes.itzkp.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#填写绑定证书的域名")]),t._v("\n    ssl on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate 1_notes.itzkp.com_bundle.crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#证书文件名称")]),t._v("\n    ssl_certificate_key 2_notes.itzkp.com.key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#私钥文件名称")]),t._v("\n    ssl_session_timeout 5m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请按照这个协议配置")]),t._v("\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("aNULL:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("MD5:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC4:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("DHE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请按照这个套件配置")]),t._v("\n    ssl_prefer_server_ciphers on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n      proxy_pass http://140.143.3.244:9998"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \tproxy_set_header X-Real-IP "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \t \tproxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \t  proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \t\tproxy_set_header X-Nginx-Proxy "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \t\tproxy_redirect off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  listen "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  server_name notes.itzkp.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#填写绑定证书的域名")]),t._v("\n  rewrite ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#把http的域名请求转成https")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_2-ssh免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ssh免密登录"}},[t._v("#")]),t._v(" 2.ssh免密登录")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("①：生成秘钥：ssh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("keygen "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("t rsa（这会在 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh下生成两个文件）")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("后面还可以加参数例如："),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhu_key'")]),t._v(" 这是生成秘钥名称，就会生成 zhu_key 和 zhu_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  id_rea：私钥（不规定名称，名称默认就是id_rea，这个留在主服务器上，这样主服务器就能访问具有公钥的服务器就不用密码了）\n  id_rea"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub：公钥（不规定名称，名称默认就是id_rea"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub，这个传到目标服务器上，这样会使具有私钥的服务器不用密码就能连接）\n\n②：把公钥传到目标服务器上：scp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id_rsa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub root@目标服务器ip地址"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/root/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh\n\n③：登录目标服务器：cat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id_rsa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("authorized_keys （注意："),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 是覆盖，"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" 是追加）\n\n④：在主服务器验证是否可以登录目标服务器：ssh root@目标服务器\n")])])]),a("p",[a("strong",[t._v("❗️有些情况下这种方法不管用，一个就是名称改为自定义的就不行，还有就是如果一台计算机是另一个的免密登录，这台想成为别的计算机的免密登录就不行，具体是什么问题，还需要继续研究")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-jenkins配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-jenkins配置"}},[t._v("#")]),t._v(" 3.Jenkins配置")]),t._v(" "),a("h3",{attrs:{id:"_1-jenkins-github-hook-触发实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jenkins-github-hook-触发实现"}},[t._v("#")]),t._v(" 1.Jenkins Github hook 触发实现")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/weschen/p/6867885.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("材料"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("Jenkins钩子函数hook只有一个，然后可以绑定很多个项目，只要一个项目触发了push，或者其他操作就会被这个钩子监听到，然后执行一些命令")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_4-cdn缓存配置-腾讯云"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-cdn缓存配置-腾讯云"}},[t._v("#")]),t._v(" 4.CDN缓存配置（腾讯云）")]),t._v(" "),a("ul",[a("li",[t._v("主要是进入 腾讯云安装指引进行配置")])]),t._v(" "),a("h2",{attrs:{id:"📚参考列表-致敬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#📚参考列表-致敬"}},[t._v("#")]),t._v(" 📚参考列表（致敬）")])])}),[],!1,null,null,null);s.default=e.exports}}]);