# 7.Axiosæºç è§£æä»¥åŠå®ç°

::: warning
æ³¨æ„æ­¤å¤„ï¼šç­‰å¾…é‡æ„
:::


**ğŸ”¥å¤‡æ³¨ï¼š[XMLHttpRequest...MDNæ•™ç¨‹](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest)**

## ç¬¬ä¸€éƒ¨åˆ†ï¼šé¡¹ç›®æ„å»º

### 1.éœ€è¦åšçš„

- åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨XMLHttpRequestå¯¹è±¡é€šè®¯
- æ”¯æŒ Promise API
- æ”¯æŒ è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨
- æ”¯æŒ è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®çš„è½¬æ¢
- æ”¯æŒ è¯·æ±‚çš„å–æ¶ˆ
- JSONæ•°æ®è‡ªåŠ¨è½¬æ¢
- å®¢æˆ·ç«¯é˜²æ­¢ XSRF

---

### 2.åˆå§‹åŒ–é¡¹ç›®

- è„šæ‰‹æ¶ï¼šgit clone https://github.com/alexjoverm/typescript-library-starter.git
- è¿™ä¸ªè„šæ‰‹æ¶é›†æˆçš„ä¼˜ç§€å·¥å…·
    - ä½¿ç”¨ RollupJS å¸®åŠ©æˆ‘ä»¬æ‰“åŒ…
    - ä½¿ç”¨ Prettier å’Œ TSLint å¸®åŠ©æˆ‘ä»¬æ ¼å¼åŒ–ä»£ç ä»¥åŠä¿è¯ä»£ç é£æ ¼ä¸€è‡´æ€§
    - ä½¿ç”¨ TypeDoc å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å¹¶éƒ¨ç½²åˆ°GitHub pages
    - ä½¿ç”¨ Jest å¸®åŠ©æˆ‘ä»¬åšå•å…ƒæµ‹è¯•
    - ä½¿ç”¨ Commitizen å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè§„èŒƒåŒ–çš„æäº¤æ³¨é‡Š
    - ä½¿ç”¨ Semantic release å¸®åŠ©æˆ‘ä»¬ç®¡ç†ç‰ˆæœ¬å’Œå‘å¸ƒ
    - ä½¿ç”¨ husky å¸®åŠ©æˆ‘ä»¬æ›´ç®€å•çš„ä½¿ç”¨ Git Hooks
    - ä½¿ç”¨ Conventional changelog å¸®åŠ©æˆ‘ä»¬é€šè¿‡ä»£ç æäº¤ä¿¡æ¯ è‡ªåŠ¨ç”Ÿæˆ change log

---

### 3.åˆ›å»ºå…¥å£æ–‡ä»¶

**æˆ‘ä»¬åœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼Œå»ºç«‹ index.ts æ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶**

```js
import { AxiosRequestConfig } from './types/index'

function axios(config: AxiosRequestConfig) {
    // TODE
}

export default axios
```

**å†å®šä¹‰ä¸€ä¸ª typesæ–‡ä»¶å¤¹ ç®¡ç†æˆ‘ä»¬çš„ç±»å‹**

```js
// è¿™ä¸ªæ–‡ä»¶æ”¾ç€å…¬å…±æ¥å£ç±»å‹ï¼ˆsrc/types/index.tsï¼‰

export type Method = 'get' | 'GET' | 'post' | 'POST' | 'delete' | 'DELETE' | 'head' | 'HEAD' | 'OPTIONS' | 'options' | 'put' | 'PUT' | 'PATCH' | 'patch'

export interface AxiosRequestConfig {
    url: string
    method?: Method
    data?: any
    param?: any
}
```

---

> æœ¬ç€æ¨¡å—åŒ–çš„æ€æƒ³ï¼Œæˆ‘ä»¬æŠ½ç¦»å‡ºæ¥ xhr.ts æ–‡ä»¶

```js
import { AxiosRequestConfig } from './types/index'

export default function xhr(config: AxiosRequestConfig): void {
    const { data = null, url, method = 'get'} = config
    
    const request = new XMLHttpRequest()
    request.open(method.toUpperCase(), url, async: true)
    request.send(data)
}
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šaxiosåŸºç¡€åŠŸèƒ½å®ç°


---

## ğŸ“šå‚è€ƒåˆ—è¡¨

- [æ…•è¯¾ç½‘è¯¾ç¨‹...åŸºäºTypeScriptä»é›¶é‡æ„axios](https://coding.imooc.com/class/330.html)