# 2.2019å¹´6æœˆé¢è¯•èµ„æ–™æ•´ç†

## å‰è¨€

- æˆ‘å§‹ç»ˆç›¸ä¿¡ï¼Œåˆ¶å®šä¸€ä¸ªåŒºé—´ï¼ˆä¹Ÿå°±æ˜¯å‰ç«¯é¢è¯•ï¼‰ï¼Œåœ¨ä¸€ä¸ªæ—¶åˆ»ï¼ˆ2019ï¼‰ï¼Œä»–é‡Œé¢99%çš„å†…å®¹æ˜¯å¯ç©·å°½çš„ï¼Œè€Œä¸”æ•°é‡æ˜¯ä½ å¯ä»¥æ‰¿æ‹…çš„ï¼Œæ‰€ä»¥æˆ‘å‡†å¤‡æ•´ç†ä¸€ä»½é¢è¯•çš„èµ„æ–™ï¼Œæ¥åº”å¯¹é¢è¯•ä¸­çš„å„ç§é—®é¢˜ï¼Œæˆ‘ç›¸ä¿¡å¯ä»¥ç©·å°½ï¼ˆå»ºç«‹ä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åå¾€è¿™é‡Œé¢å¡«å†…å®¹ï¼Œæœ€åæ‰€æœ‰çš„é¢è¯•é¢˜ï¼Œéƒ½ä¼šå˜æˆæ¨¡å‹ç»„åˆçš„é—®é¢˜ï¼‰ï¼ˆç­‰æ¨¡å‹è¿è¡Œç¼“æ…¢çš„æ—¶å€™ï¼Œé‡æ„æ¨¡å‹ï¼‰

---


## JSåŸºç¡€

### 1.å†…ç½®ç±»å‹

- JS ä¸­åˆ†ä¸ºä¸ƒç§å†…ç½®ç±»å‹ï¼Œä¸ƒç§å†…ç½®ç±»å‹åˆåˆ†ä¸ºä¸¤å¤§ç±»å‹ï¼šåŸºæœ¬ç±»å‹å’Œå¯¹è±¡ï¼ˆObjectï¼‰ã€‚
  - åŸºæœ¬ç±»å‹æœ‰å…­ç§ï¼š numberï¼Œstringï¼Œbooleanï¼Œnullï¼Œundefinedï¼Œsymbolï¼ˆES6ä¸­è¡¨ç¤ºæƒŸä¸€çš„å€¼ï¼‰
  - å¯¹è±¡ï¼š

---

### 2.Typeof

- typeof å¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤äº† null éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹
- typeof å¯¹äºå¯¹è±¡ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º object

```javascript

// åŸºæœ¬ç±»å‹
typeof b // b æ²¡æœ‰å£°æ˜ï¼Œä½†æ˜¯è¿˜ä¼šæ˜¾ç¤º "undefined"
typeof null // "object" ğŸ”

// å¯¹è±¡
typeof [] // 'object'
typeof {} // 'object'
typeof console.log // 'function'

```

- PSï¼šä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿå› ä¸ºåœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨äº†å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ000 å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º object ã€‚è™½ç„¶ç°åœ¨çš„å†…éƒ¨ç±»å‹åˆ¤æ–­ä»£ç å·²ç»æ”¹å˜äº†ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ª Bug å´æ˜¯ä¸€ç›´æµä¼ ä¸‹æ¥
- ğŸ”¥ å¦‚æœæˆ‘ä»¬æƒ³è·å¾—ä¸€ä¸ªå˜é‡çš„æ­£ç¡®ç±»å‹ï¼Œå¯ä»¥é€šè¿‡ Object.prototype.toString.call(xx)ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è·å¾—ç±»ä¼¼ [object Type] çš„å­—ç¬¦ä¸²ã€‚

```javascript
Object.prototype.toString.call(null) // "[object Null]"
Object.prototype.toString.call(undefined) // "[object Undefined]"
Object.prototype.toString.call(true) // "[object Boolean]"
```


### 3.ç±»å‹è½¬æ¢

- è½¬Booleanï¼šåœ¨æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œé™¤äº† undefinedï¼Œ nullï¼Œ falseï¼Œ NaNï¼Œ ''ï¼Œ 0ï¼Œ -0ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬ä¸º trueï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡
- å¯¹è±¡è½¬åŸºæœ¬ç±»å‹
- å››åˆ™è¿ç®—ç¬¦

```javascript
// åªæœ‰å½“åŠ æ³•è¿ç®—æ—¶ï¼Œå…¶ä¸­ä¸€æ–¹æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå°±ä¼šæŠŠå¦ä¸€ä¸ªä¹Ÿè½¬ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚å…¶ä»–è¿ç®—åªè¦å…¶ä¸­ä¸€æ–¹æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå¦ä¸€æ–¹å°±è½¬ä¸ºæ•°å­—ã€‚å¹¶ä¸”åŠ æ³•è¿ç®—ä¼šè§¦å‘ä¸‰ç§ç±»å‹è½¬æ¢ï¼šå°†å€¼è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œè½¬æ¢ä¸ºæ•°å­—ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²

1 + '1' // '11'
2 * '2' // 4
[1, 2] + [2, 1] // '1,22,1'
// [1, 2].toString() -> '1,2'
// [2, 1].toString() -> '2,1'
// '1,2' + '2,1' = '1,22,1'

'a' + + 'b' // -> "aNaN"
// å› ä¸º + 'b' -> NaN
// ä½ ä¹Ÿè®¸åœ¨ä¸€äº›ä»£ç ä¸­çœ‹åˆ°è¿‡ + '1' -> 1

```

---

### 4.åŸå‹ï¼ˆè¿™é‡Œè¿˜éœ€è¦æ•´ç†ä¸€ä¸‹ï¼‰

- æ¯ä¸ªå‡½æ•°éƒ½æœ‰ prototype å±æ€§ï¼Œé™¤äº† Function.prototype.bind()ï¼Œè¯¥å±æ€§æŒ‡å‘åŸå‹ã€‚
- æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ __proto__ å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ã€‚å…¶å®è¿™ä¸ªå±æ€§æŒ‡å‘äº† [[prototype]]ï¼Œä½†æ˜¯ [[prototype]] æ˜¯å†…éƒ¨å±æ€§ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è®¿é—®åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨ _proto_ æ¥è®¿é—®ã€‚
- å¯¹è±¡å¯ä»¥é€šè¿‡ __proto__ æ¥å¯»æ‰¾ä¸å±äºè¯¥å¯¹è±¡çš„å±æ€§ï¼Œ__proto__ å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ã€‚

### 5.new

- åœ¨è°ƒç”¨ new çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸Šå››ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯•ç€æ¥è‡ªå·±å®ç°ä¸€ä¸ª new
  - æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡
  - é“¾æ¥åˆ°åŸå‹
  - ç»‘å®š this
  - è¿”å›æ–°å¯¹è±¡

```javascript
function create() {
    // åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡
    let obj = new Object()
    // è·å¾—æ„é€ å‡½æ•°
    let Con = [].shift.call(arguments)
    // é“¾æ¥åˆ°åŸå‹
    obj.__proto__ = Con.prototype
    // ç»‘å®š thisï¼Œæ‰§è¡Œæ„é€ å‡½æ•°
    let result = Con.apply(obj, arguments)
    // ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡
    return typeof result === 'object' ? result : obj
}
```

---

### 6.instanceof

- instanceof å¯ä»¥æ­£ç¡®çš„åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ‰¾åˆ°ç±»å‹çš„ prototypeã€‚

```javascript
// è¯•ç€å®ç°ä¸€ä¸‹ instanceof
function instanceof(left, right) {
    // è·å¾—ç±»å‹çš„åŸå‹
    let prototype = right.prototype
    // è·å¾—å¯¹è±¡çš„åŸå‹
    left = left.__proto__
    // åˆ¤æ–­å¯¹è±¡çš„ç±»å‹æ˜¯å¦ç­‰äºç±»å‹çš„åŸå‹
    while (true) {
    	if (left === null)
    		return false
    	if (prototype === left)
    		return true
    	left = left.__proto__
    }
}
```

---

### 7.thisï¼ˆæœ‰ä¸ªVO,AOçš„çŸ¥è¯†ç‚¹åœ¨è¿™ï¼Œé‚£ä¸ªå¯ä»¥è§£å†³æ‰€æœ‰çš„æŒ‡å‘é—®é¢˜ï¼‰

- this æ˜¯å¾ˆå¤šäººä¼šæ··æ·†çš„æ¦‚å¿µï¼Œä½†æ˜¯å…¶å®ä»–ä¸€ç‚¹éƒ½ä¸éš¾ï¼Œä½ åªéœ€è¦è®°ä½å‡ ä¸ªè§„åˆ™å°±å¯ä»¥äº†

---

### 8.Proxyï¼ˆProxy æ˜¯ ES6 ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œï¼‰

```javascript

let onWatch = (obj, setBind, getLogger) => {
  let handler = {
    get(target, property, receiver) {
      getLogger(target, property)
      return Reflect.get(target, property, receiver);
    },
    set(target, property, value, receiver) {
      setBind(value);
      return Reflect.set(target, property, value);
    }
  };
  return new Proxy(obj, handler);
};

let obj = { a: 1 }
let value
let p = onWatch(obj, (v) => {
  value = v
}, (target, property) => {
  console.log(`Get '${property}' = ${target[property]}`);
})
p.a = 2 // bind `value` to `2`
p.a // -> Get 'a' = 2

```





---

## å‚è€ƒèµ„æ–™

- [InterviewMap](https://yuchengkai.cn/docs/)
