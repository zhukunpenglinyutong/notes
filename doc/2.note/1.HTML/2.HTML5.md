# 2.HTML5

::: tip
HTML5.0 å¯ä¸åªæ˜¯ å°† HTML4 çš„æ ‡ç­¾ä¹‹ç±»è¿›è¡Œäº†æ”¹å˜ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæ€ï¼Œè®©ä¸€äº›äº‹æƒ…æˆä¸ºå¯èƒ½ï¼Œè®©å‰ç«¯çœŸæ­£çš„ç«™äº†èµ·æ¥

æ³¨æ„ï¼šè¿™é‡Œæœ‰éƒ¨åˆ†å†…å®¹ï¼Œéœ€è¦æœ‰å‰ç«¯åŸºç¡€
:::


---

## ğŸ¥—ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ‡ç­¾

### 1.è¯­ä¹‰åŒ–æ ‡ç­¾

> æœ¬è´¨å°±æ˜¯åå­—ä¸åŒçš„ div

```html
<header></header>
<footer></footer>

<!-- è¯­ä¹‰ï¼šå¯¼èˆªæ¡ -->
<nav></nav>

<!-- è¯­ä¹‰ï¼šæ–‡ç« ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ -->
<article></article>
<!-- è¯­ä¹‰ï¼šä¸€èˆ¬æ”¾åˆ° articleé‡Œé¢ä½¿ç”¨ï¼Œè¡¨ç¤ºé‡Œé¢çš„ä¸€æ®µ-->
<section></section>

<!-- è¯­ä¹‰ï¼šä¾§è¾¹æ  -->
<aside></aside>
```

---

### 2.è§†é¢‘ï¼ŒéŸ³é¢‘

> è¿™ä¿©çš„å±æ€§éƒ½ä¸€æ ·ï¼Œå°±æ˜¯è§†é¢‘å¤šäº†ä¸€ä¸ªè§†é¢‘çš„å±•ç¤ºï¼Œæˆ‘è§‰å¾—è¿™å—æ€ä¹ˆèƒ½è¯´åšçš„å¥½å‘¢ï¼Ÿå°±æ˜¯ä»¿ç…§è…¾è®¯è¯¾å ‚çš„æ ·å¼ï¼Œåšä¸€ä¸ªæ’­æ”¾å™¨

```html
<!-- è§†é¢‘å’ŒéŸ³é¢‘æ’­æ”¾å™¨ï¼Œåœ¨æ¯ä¸ªæµè§ˆå™¨ä¸­å±•ç¤ºçš„æ•ˆæœéƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœè¦å±•ç¤ºæ•ˆæœä¸€è‡´çš„è¯ï¼Œè¦è‡ªå·±å°è£… -->
<audio src="éŸ³é¢‘åœ°å€"></audio>
<video src="è§†é¢‘åœ°å€"></video>


```

---

## ğŸ¥ç¬¬äºŒéƒ¨åˆ†ï¼šå±æ€§

---

## ğŸ±ç¬¬ä¸‰éƒ¨åˆ†ï¼šAPI

---

## ğŸ›ç¬¬å››éƒ¨åˆ†ï¼šcanvasï¼ˆç”»å¸ƒï¼‰

### 1.åŸºç¡€çŸ¥è¯†

```html
<canvas id="canvas"></canvas>

<script>

    let canvas = document.getElementById('canvas')
    let ctx = canvas.getContext('2d') // è¿™ä¸ªå¯ä»¥ç†è§£ä¸ºç”»ç¬”

    // çº¿ï¼ˆç›´çº¿ï¼Œä¸‰è§’å½¢...ï¼‰
    ctx.moveTo(x, y)
    ctx.lineTo(x, y)
    ctx.arcTo(Bç‚¹xï¼Œ By, Cç‚¹x, Cç‚¹y, å¼§çš„æ•°å€¼) // ç›´çº¿ + åœ†å¼§ï¼ˆå¯ä»¥åšåœ†è§’çŸ©å½¢ï¼‰

    // çŸ©å½¢
    ctx.rect(x, y, å®½åº¦, é«˜åº¦) // ç”»çŸ©å½¢
    ctx.strokeRect(x, y, å®½åº¦, é«˜åº¦) // ç›´æ¥ç”»å‡ºæ¥äº†ï¼Œéƒ½ä¸ç”¨å†™æ„å»ºè·¯å¾„
    ctx.fillRect(x, y, å®½åº¦, é«˜åº¦) // ç›´æ¥ç”»å‡ºæ¥äº†ï¼Œéƒ½ä¸ç”¨å†™å¡«å……è·¯å¾„

    // åœ†å½¢ï¼ˆåŠåœ†ï¼Œæ‰‡å½¢ï¼Œå¼§çº¿ï¼Œåœ†å½¢ï¼‰
    ctx.arc(åœ†å¿ƒx, åœ†å¿ƒy, åŠå¾„, å¼§åº¦, æ–¹å‘)

    // è´å¡å°”æ›²çº¿
    ctx.quadraticCurveTo(x1, y1, x2, y2); // äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼ˆé™¤äº†èµ·ç‚¹ï¼Œè¿˜éœ€è¦å¦å¤–ä¸¤ä¸ªç‚¹ï¼‰
    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3); // ä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼ˆé™¤äº†èµ·ç‚¹ï¼Œè¿˜éœ€è¦ä¸‰ä¸ªç‚¹ï¼‰

    // è®¾ç½®æ ·å¼
    ctx.fillStyle = 'red' // è®¾ç½®å¡«å……é¢œè‰²
    ctx.strokeStyle = 'blue' // è®¾ç½®å¡«å……é¢œè‰²
    ctx.lineWidth = 3 // è®¾ç½®çº¿æ¡å®½åº¦
    ctx.font = '24px é»‘ä½“'

    ctx.fillText('å®ä½“æ–‡å­—', æ–‡å­—æ˜¾ç¤ºçš„x, æ–‡å­—æ˜¾ç¤ºçš„y); // è®¾ç½®æ–‡å­—
    ctx.strokeText('ç©ºå¿ƒæ–‡å­—', æ–‡å­—æ˜¾ç¤ºçš„x, æ–‡å­—æ˜¾ç¤ºçš„y); // è®¾ç½®æ–‡å­—

    // åæ ‡å¹³ç§» && æ—‹è½¬ && ç¼©æ”¾
    ctx.translate(100, 100) // ä¿®æ”¹åæ ‡åŸç‚¹ï¼ˆåæ ‡å¹³ç§»ï¼‰
    ctx.rotate(Math.PI) // æ—‹è½¬ï¼ˆå•ä½æ˜¯å¼§åº¦ï¼Œå¹¶ä¸”æ˜¯æ ¹æ®åæ ‡åŸç‚¹è¿›è¡Œçš„æ—‹è½¬ï¼‰
    ctx.scale(xç‚¹å€æ•°, yç‚¹å€æ•°) // ç¼©æ”¾

    // ä¿å­˜å’Œä½¿ç”¨ä¹‹å‰åæ ‡ç³»
    ctx.save() // ä¿å­˜ä¹‹å‰åæ ‡ç³»ï¼ˆå¯ä»¥ä¿å­˜åæ ‡ç³»çš„å¹³ç§»æ•°æ®ï¼Œç¼©æ”¾æ•°æ®ï¼Œæ—‹è½¬æ•°æ®ï¼‰
    ctx.restore() // æ¢å¤ä¹‹å‰çš„åæ ‡ç³»

    // æ¸…é™¤ç”»å¸ƒ
    ctx.clearRect(x, y, å®½åº¦, é«˜åº¦) 

    // é‡æ–°å¼€å¯ä¸€ä¸ªè·¯å¾„
    ctx.beginPath()

    ctx.closePath() // é—­åˆè·¯å¾„ï¼Œé’ˆå¯¹ä¸€ä¸ªè·¯å¾„æ‰èƒ½é—­åˆ
    ctx.stroke() // æ„å»ºè·¯å¾„
    ctx.fill() // æ„å»ºå¡«å……è·¯å¾„
 
</script>
```

**canvas åæ ‡ç³»ç»Ÿ**

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/1.HTML/HTML5/1.canvas%E5%9D%90%E6%A0%87%E7%B3%BB.png" />

---

### 2.ç”»çº¿

> ç”»çº¿ è¦æœ‰ä¸€ä¸ªèµ·ç‚¹å’Œç»ˆç‚¹

```js
let canvas = document.getElementById('canvas')
let ctx = canvas.getContext('2d')

ctx.moveTo(100, 100) // èµ·ç‚¹
ctx.lineTo(100, 200) // ç»ˆç‚¹
ctx.stroke()

// çº¿ç«¯æ ·å¼ï¼ˆçº¿çš„ä¸¤ç«¯ï¼‰
ctx.lineCap = 'butt' // square ç»™çº¿çš„ä¸¤ç«¯ æ·»åŠ ä¸¤ä¸ªå°æ–¹å— | round ç»™çº¿çš„ä¸¤ç«¯ æ·»åŠ åœ†è§’
ctx.lineJoin = 'mitter' // round bevel miter(miterLimit)
```

---

### 3.ç”»çŸ©å½¢

> ç”¨çº¿ä¹Ÿèƒ½ç”»çŸ©å½¢ï¼Œä½†æ˜¯éº»çƒ¦ï¼Œç”¨ ctx.rect() æ›´å¿«

```js
ctx.rect(x, y, å®½åº¦, é«˜åº¦) // ç”»çŸ©å½¢
ctx.strokeRect(x, y, å®½åº¦, é«˜åº¦) // ç›´æ¥ç”»å‡ºæ¥äº†ï¼Œéƒ½ä¸ç”¨å†™æ„å»ºè·¯å¾„
ctx.fillRect(x, y, å®½åº¦, é«˜åº¦) // ç›´æ¥ç”»å‡ºæ¥äº†ï¼Œéƒ½ä¸ç”¨å†™å¡«å……è·¯å¾„


// ä¾‹å¦‚ï¼šä¸€ä¸ªä¸€ç›´å¾€ä¸‹è½çš„çŸ©å½¢
let canvas = document.getElementById('canvas')
let ctx = canvas.getContext('2d') 
let height = 0

let timer = setInterval(() => {
    ctx.clearRect(0, 0, 500, 500)
    ctx.strokeRect(100, height, 50, 50)
    if (height === 450) clearInterval(timer);
    height += 10;
}, 50);
```

---

### 4.ç”»åœ†

> éœ€è¦çŸ¥é“ åœ†å¿ƒï¼ˆx, yï¼‰ï¼ŒåŠå¾„ï¼ˆrï¼‰ï¼Œå¼§åº¦ï¼ˆéœ€è¦ç”¨Math.PIè¡¨ç¤ºï¼šèµ·å§‹å¼§åº¦ï¼Œç»“æŸå¼§åº¦ï¼‰ï¼Œæ–¹å‘ï¼ˆé¡ºæ—¶é’ˆ0ï¼Œé€†æ—¶é’ˆ-1ï¼‰

```js
let canvas = document.getElementById('canvas')
let ctx = canvas.getContext('2d') 

// åŸºç¡€åœ†å½¢ï¼ˆæ‰‡å½¢ï¼ŒåŠåœ†ï¼Œåœ†å½¢ï¼‰
ctx.arc(100, 100, 50, 0, Math.PI, 0)
ctx.fill()

// åœ†è§’çŸ©å½¢
ctx.moveTo(100, 110) // yè½´å¤šäº†10ï¼Œæ˜¯ä¸€ä¸ªå°æŠ€å·§
ctx.arcTo(100, 200, 200, 200, 10)
ctx.arcTo(200, 200, 200, 100, 10)
ctx.arcTo(200, 100, 100, 100, 10)
ctx.arcTo(100, 100, 100, 200, 10)
ctx.stroke()
```

---

### 5.è´å¡å°”æ›²çº¿

[è´å¡å°”æ›²çº¿ï¼Œç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF/1091769)

```js
// äºŒæ¬¡è´å¡å°”æ›²çº¿
ctx.moveTo(100, 100) // èµ·ç‚¹
ctx.quadraticCurveTo(200, 200, 300, 100); // é™¤äº†èµ·ç‚¹ï¼Œè¿˜éœ€è¦å¦å¤–ä¸¤ä¸ªç‚¹

// ä¸‰æ¬¡è´å¡å°”æ›²çº¿
ctx.moveTo(100, 100) // èµ·ç‚¹
ctx.bezierCurveTo(200, 200, 300, 100, 400, 200); // é™¤äº†èµ·ç‚¹ï¼Œè¿˜éœ€è¦ä¸‰ä¸ªç‚¹
ctx.stroke()

// æ¡ˆä¾‹ï¼šæ¨¡æ‹Ÿä¸€ä¸ªæ³¢æµª
```

---

### 6.åæ ‡å¹³ç§» && æ—‹è½¬ && ç¼©æ”¾

```js
ctx.translate(100, 100) // ä¿®æ”¹åæ ‡åŸç‚¹ï¼ˆåæ ‡å¹³ç§»ï¼‰
ctx.rotate(Math.PI / 6) // æ˜¯æ ¹æ®åæ ‡åŸç‚¹è¿›è¡Œçš„æ—‹è½¬
ctx.moveTo(0, 0) // åŸæ¥æ˜¯ 100, 100
ctx.lineTo(100, 0)
ctx.stroke()

// ç¼©æ”¾ï¼ˆæ‰€æœ‰ç‚¹ï¼Œéƒ½æ”¾å¤§scaleé‡Œé¢çš„å€æ•°ï¼‰
ctx.scale(2, 2)
ctx.strokeRect(100, 100, 100, 100)
```

---

### 7.save && restore

> canvasçš„å¹³ç§»å’Œæ—‹è½¬æ˜¯å¯¹äºå…¨å±€æ¥è¯´çš„ï¼Œå¦‚æœæƒ³æ—‹è½¬ä¹‹åçš„ï¼Œè¿˜æŒ‰ç…§ä¹‹å‰çš„ç”¨ï¼Œéœ€è¦å…ˆä¿å­˜ä¹‹å‰çš„ï¼Œå†å›å¤

```js
ctx.save() // ä¿å­˜ä¹‹å‰åæ ‡ç³»ï¼ˆå¯ä»¥ä¿å­˜åæ ‡ç³»çš„å¹³ç§»æ•°æ®ï¼Œç¼©æ”¾æ•°æ®ï¼Œæ—‹è½¬æ•°æ®ï¼‰

ctx.translate(100, 100) // ä¿®æ”¹åæ ‡åŸç‚¹ï¼ˆåæ ‡å¹³ç§»ï¼‰
ctx.rotate(Math.PI / 6) // æ˜¯æ ¹æ®åæ ‡åŸç‚¹è¿›è¡Œçš„æ—‹è½¬
ctx.moveTo(0, 0) // åŸæ¥æ˜¯ 100, 100
ctx.lineTo(100, 0)
ctx.stroke()

ctx.restore() // æ¢å¤ä¹‹å‰çš„åæ ‡ç³»
```

---

### 8.èƒŒæ™¯å¡«å……

```js
// å¡«å……é¢œè‰²
ctx.fillStyle = 'red'
ctx.fillRect(100, 100, 100, 100)

// å¡«å……å›¾ç‰‡ï¼ˆçº¹ç†çš„å¡«å……æ˜¯ä»¥åæ ‡ç³»åŸç‚¹è¿›è¡Œå¡«å……çš„ï¼‰
let img = new Image()
img.src = 'https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/github%E5%9B%BE%E7%89%87/notes/3.png'
img.onload = function () {
    ctx.translate(100, 100)
    ctx.fillStyle = ctx.createPattern(img, 'no-repeat')
    ctx.fillRect(0, 0, 100, 100)
}

// çº¿æ€§æ¸å˜å¡«å……
let bg = ctx.createLinearGradient(100, 100, 200, 200);
bg.addColorStop(0, 'white'); // æ¸å˜èµ·ç‚¹
bg.addColorStop(1, 'black'); // æ¸å˜ç»ˆç‚¹ï¼ˆå½“ç„¶ä¸­é—´ä¹Ÿèƒ½å†™å¤šä¸ªé˜¶æ®µçš„å€¼ï¼‰
ctx.fillStyle = bg
ctx.fillRect(100, 100, 100, 100)

// è¾å°„æ¸å˜
let bg = ctx.createRadialGradient(150, 150, 0, 180, 180, 180)
bg.addColorStop(0, 'white'); // æ¸å˜èµ·ç‚¹
bg.addColorStop(1, 'black'); // æ¸å˜ç»ˆç‚¹ï¼ˆå½“ç„¶ä¸­é—´ä¹Ÿèƒ½å†™å¤šä¸ªé˜¶æ®µçš„å€¼ï¼‰
ctx.fillStyle = bg
ctx.fillRect(100, 100, 100, 100)
```

---

### 9.é˜´å½±

```js
ctx.shadowColor = 'red'
ctx.shadowBlur = 10;
ctx.fillRect(100, 100, 100, 100)
```

---

### 10.æ–‡å­—

```js
ctx.fillText('å®ä½“æ–‡å­—', 100, 100);
ctx.font = '24px é»‘ä½“'
ctx.strokeStyle = 'red'
ctx.strokeText('ç©ºå¿ƒæ–‡å­—', 100, 200);
```

---

### 11.requestAnimationFrameåŠ¨ç”»

**åŠ¨ç”»åŸç†ç®€ä»‹**

> åŠ¨ç”»çš„åŸºæœ¬åŸç†æ˜¯ä¾é äººç±»å…·æœ‰è§†è§‰æš‚ç•™çš„ç‰¹æ€§äººçš„çœ¼ç›çœ‹åˆ°ä¸€å¹…ç”»æˆ–ä¸€ä¸ªç‰©ä½“åï¼Œåœ¨ 1/24 ç§’å†…ä¸ä¼šæ¶ˆå¤±ï¼ˆå³æ¯ç§’é’Ÿè‡³å°‘æ›´æ¢24å¼ ç”»é¢ï¼‰ã€‚åˆ©ç”¨è¿™ä¸€åŸç†ï¼Œåœ¨ä¸€å¹…ç”»ï¼ˆä¸€å¸§ï¼‰è¿˜æ²¡æ¶ˆå¤±å‰æ’­æ”¾ä¸‹ä¸€å¹…ç”»ï¼ˆä¸‹ä¸€å¸§ï¼‰ï¼Œå°±ä¼šç»™äººé€ æˆæµç•…çš„è§†è§‰å˜åŒ–æ•ˆæœã€‚

æˆ‘ä»¬åœ¨å®ç°åŠ¨ç”»çš„æ—¶å€™ï¼Œç»å¸¸ç”¨å®šæ—¶å™¨ï¼Œä½†æ˜¯å®šæ—¶å™¨æœ‰æ—¶å€™å¹¶ä¸ç²¾ç¡®

**requestAnimationFrame**

> ç”±äº setTimeout å’Œ setInterval çš„ä¸ç²¾å‡†é—®é¢˜ï¼Œä¿ƒä½¿äº† requestAnimationFrame çš„è¯ç”Ÿã€‚ requestAnimationFrame æ˜¯ä¸“é—¨ä¸ºå®ç°é«˜æ€§èƒ½çš„å¸§åŠ¨ç”»è€Œè®¾è®¡çš„ä¸€ä¸ªAPIï¼Œç›®å‰å·²åœ¨å¤šä¸ªæµè§ˆå™¨å¾—åˆ°äº†æ”¯æŒï¼Œä½ å¯ä»¥æŠŠå®ƒç”¨åœ¨ DOM ä¸Šçš„æ•ˆæœåˆ‡æ¢æˆ–è€… Canvas ç”»å¸ƒåŠ¨ç”»ä¸­ã€‚ requestAnimationFrame å¹¶ä¸æ˜¯å®šæ—¶å™¨ï¼Œä½†å’Œ setTimeout å¾ˆç›¸ä¼¼ï¼Œåœ¨æ²¡æœ‰ requestAnimationFrame çš„æµè§ˆå™¨ä¸€èˆ¬éƒ½æ˜¯ç”¨setTimeoutæ¨¡æ‹Ÿã€‚ requestAnimationFrame è·Ÿå±å¹•åˆ·æ–°åŒæ­¥ï¼ˆå¤§å¤šæ•°æ˜¯ 60Hz ï¼‰ã€‚å¦‚æœæµè§ˆå™¨æ”¯æŒ requestAnimationFrame , åˆ™ä¸å»ºè®®ä½¿ç”¨ setTimeout æ¥åšåŠ¨ç”»ã€‚

**requestAnimationFrame çš„å…¼å®¹ä½¿ç”¨**

```js
// ä¸‹é¢æ˜¯æˆ‘ä»¬å¸¸è§„ä½¿ç”¨ requestAnimationFrame çš„å…¼å®¹å†™æ³•ï¼Œå½“æµè§ˆå™¨ä¸å…¼å®¹çš„ requestAnimationFrame æ—¶åˆ™é€šè¿‡ä½¿ç”¨ setTimeout æ¥æ¨¡æ‹Ÿå®ç°,ä¸”è®¾å®šæ¸²æŸ“é—´éš”ä¸º 1000ms/60ã€‚

// åˆ¤æ–­æ˜¯å¦æœ‰ requestAnimationFrame æ–¹æ³•ï¼Œå¦‚æœæœ‰åˆ™æ¨¡æ‹Ÿå®ç°
window.requestAnimFrame =
window.requestAnimationFrame ||
window.webkitRequestAnimationFrame ||
window.mozRequestAnimationFrame ||
window.oRequestAnimationFrame ||
window.msRequestAnimationFrame ||
function(callback) {
    window.setTimeout(callback, 1000 / 30);
};
```

**ä½¿ç”¨ requestAnimationFrame å®ç°åŠ¨ç”»**

<img src="https://coding.imweb.io/img/p5/requestAnimationFrame.gif" />

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è®¤è¯†Canvas</title>
</head>
<body>
    <canvas id="canvas" width="500" height="500" style="border: 1px solid #33"></canvas>
    <script>
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        // å…¼å®¹å®šä¹‰ requestAnimFrame
        window.requestAnimFrame =
        window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
            window.setTimeout(callback, 1000 / 30);
        };

        // ç»˜åˆ¶çš„åœ†çš„å¯¹è±¡
        var circle = {
            x: 250,
            y: 250,
            radius: 50,
            direction: 'right',
            // ç§»åŠ¨åœ†å½¢
            move: function() {
                if (this.direction === 'right') {
                    if (this.x <= 430) {
                         this.x += 5;
                    } else {
                        this.direction = 'left';
                    }
                } else {
                    if (this.x >= 60) {
                         this.x -= 5;
                    } else {
                        this.direction = 'right';
                    }
                }
            },
            draw: function() {
                // ç»˜åˆ¶åœ†å½¢
                context.beginPath();
                // è®¾ç½®å¼€å§‹è§’åº¦ä¸º0ï¼Œç»“æŸè§’åº¦ä¸º 2Ï€ å¼§åº¦
                context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);
                context.fillStyle = '#00c09b';
                context.fill();
            }
        }
        // åŠ¨ç”»æ‰§è¡Œå‡½æ•°
        function animate() {
            // éšæœºæ›´æ–°åœ†å½¢ä½ç½®
            circle.move();
            // æ¸…é™¤ç”»å¸ƒ
            context.clearRect(0, 0, canvas.width, canvas.height);
            // ç»˜ç”»åœ†
            circle.draw();
            // ä½¿ç”¨requestAnimationFrameå®ç°åŠ¨ç”»å¾ªç¯
            requestAnimationFrame(animate);
        }

        // å…ˆç”»ç¬¬ä¸€å¸§çš„åœ†ï¼Œå³åˆå§‹åŒ–çš„åœ†
        circle.draw();
        // æ‰§è¡Œanimate
        animate();        
    </script>
</body>
</html>
```

---

### 12.é”®ç›˜äº‹ä»¶å¤„ç†

> åœ¨åˆ¶ä½œ PC ç«¯çš„æ¸¸æˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç›‘å¬é”®ç›˜çš„äº‹ä»¶ï¼Œä»¥ä¾¿å“åº”ç”¨æˆ·çš„é”®ç›˜æ“ä½œã€‚ç›®å‰ï¼Œå¯¹é”®ç›˜äº‹ä»¶çš„æ”¯æŒä¸»è¦éµå¾ªçš„æ˜¯ DOM0çº§ã€‚

**æŒ‰é”®ç›¸å…³äº‹ä»¶**

- keydownï¼šå½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½æŒ‰ä½ä¸æ”¾çš„è¯ï¼Œä¼šé‡å¤è§¦å‘æ­¤äº‹ä»¶ã€‚
- keypressï¼šå½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„å­—ç¬¦é”®æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½ä¸æ”¾çš„ï¼Œä¼šé‡å¤è§¦å‘æ­¤äº‹ä»¶ï¼ˆæŒ‰ä¸‹Escé”®ä¹Ÿä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼‰ã€‚
- keyupï¼šå½“ç”¨æˆ·é‡Šæ”¾é”®ç›˜ä¸Šçš„é”®æ—¶è§¦å‘ã€‚

**æŒ‰é”®è¿‡ç¨‹**

- é¦–å…ˆä¼šè§¦å‘ keydown äº‹ä»¶
- ç„¶åç´§æ¥ç€è§¦å‘ keypress äº‹ä»¶
- æœ€åè§¦å‘ keyupäº‹ä»¶
- å¦‚æœç”¨æˆ·æŒ‰ä¸‹äº†ä¸€ä¸ªå­—ç¬¦é”®ä¸æ”¾ï¼Œå°±ä¼šé‡å¤è§¦å‘ keydown å’Œ keypress äº‹ä»¶ï¼Œç›´åˆ°ç”¨æˆ·æ¾å¼€è¯¥é”®ä¸ºæ­¢ã€‚

**é”®ç ï¼ˆkeyCodeï¼‰å¯¹ç…§è¡¨**

<img src="https://coding.imweb.io/img/p5/keycode.png" />

**ç®€å•å®ç°é”®ç›˜æ§åˆ¶ç‰©ä½“ç§»åŠ¨**

<img src="https://coding.imweb.io/img/p5/keyboard.gif" />

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ç‰©ä½“ç§»åŠ¨</title>
</head>
<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <script>
      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');
      var rect = {
        x: 100, // çŸ©å½¢çš„ x åæ ‡
        y: 400, // çŸ©å½¢çš„ y åæ ‡
        width: 100, // çŸ©å½¢çš„å®½åº¦
        height: 100, // çŸ©å½¢çš„é«˜åº¦
        step: 30 // çŸ©å½¢ç§»åŠ¨çš„æ­¥ä¼
      }
      // å…¨å±€ç›‘å¬é”®ç›˜æ“ä½œçš„ keydown äº‹ä»¶ 
      document.onkeydown = function(e) {  
        // è·å–è¢«æŒ‰ä¸‹çš„é”®å€¼ (å…¼å®¹å†™æ³•)
        var key = e.keyCode || e.which || e.charCode;
        switch(key) {
          // ç‚¹å‡»å·¦æ–¹å‘é”®
          case 37: 
            rect.x -= 20;
            drawRect();
            break;
          // ç‚¹å‡»ä¸Šæ–¹å‘é”®
          case 38: 
            rect.y -= 20;
            drawRect();
            break;
          // ç‚¹å‡»å³æ–¹å‘é”®
          case 39: 
            rect.x += 20;
            drawRect();
            break;
          // ç‚¹å‡»ä¸‹æ–¹å‘é”®
          case 40: 
            rect.y += 20;
            drawRect();
            break;
        } 
      };
      function drawRect() {
        // æ¸…é™¤ç”»å¸ƒ
        context.clearRect(0, 0, canvas.width, canvas.height);
        // ç»˜åˆ¶çŸ©å½¢
        context.fillRect(rect.x, rect.y, rect.width, rect.height);
      }
      // ç¬¬ä¸€æ¬¡ç»˜åˆ¶
      drawRect();
    </script>
</body>
</html>
```

---

### 13.ç¢°æ’æ£€æµ‹

**çŸ©å½¢ç‰©ä½“ç¢°æ’æ£€æµ‹**

<img src="https://coding.imweb.io/img/p5/crash-rect.png" />

```js
// åˆ¤æ–­å››è¾¹æ˜¯å¦éƒ½æ²¡æœ‰ç©ºéš™
if (!(rect2.x + rect2.width < rect1.x) &&
    !(rect1.x + rect1.width < rect2.x) &&
    !(rect2.y + rect2.height < rect1.y) &&
    !(rect1.y + rect1.height < rect2.y)) {
    // ç‰©ä½“ç¢°æ’äº†
}
```

**åœ†å½¢ç‰©ä½“ç¢°æ’æ£€æµ‹**

<img src="https://coding.imweb.io/img/p5/crash-distance.png" />

```js
var dx = circle2.x - circle1.x;
var dy = circle2.y - circle1.y;
var distance = Math.sqrt((dx * dx) + (dy * dy));
if (distance < circle1.radius + circle2.radius) {
  // ä¸¤ä¸ªåœ†å½¢ç¢°æ’äº†
}
```

---

## ğŸšç¬¬äº”éƒ¨åˆ†ï¼šå­˜å‚¨

---

## ğŸ¢ç¬¬å…­éƒ¨åˆ†ï¼šäº¤æµ

---

## ğŸ§ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå·¥ä½œçº¿ç¨‹

---

## ğŸ©ç¬¬å…«éƒ¨åˆ†ï¼šä½ç½®æ„ŸçŸ¥

---

## ğŸ“šå‚è€ƒåˆ—è¡¨ï¼ˆè‡´æ•¬ï¼‰

- ã€ŠHead First HTML5 Programmingã€‹
- [è…¾è®¯è¯¾å ‚](https://ke.qq.com)