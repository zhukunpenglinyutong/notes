---
title: 5.é¡¹ç›®è´¨é‡ç›‘æµ‹
date: 2020-01-30 00:00:00
permalink: 
tag: 
 - blog
 - 12.å‰ç«¯ä»£ç è´¨é‡
---

> æ³¨æ„ï¼šæ­¤ç¯‡æ–‡ç« æœªæ¥å¯èƒ½è¦å’Œå…¶ä»–æ–‡ç« è¿›è¡Œåˆå¹¶ï¼Œæˆ–è€…é‡æž„... ç›®å‰ç»“æž„æ··ä¹±ï¼Œæ— æ³•é˜…è¯»

### ç®€ä»‹

**ðŸ”¥é€šå¸¸æ¥è¯´ï¼Œé¡¹ç›®çš„è´¨é‡å†³å®šäº† è½¯ä»¶é¡¹ç›®çš„å‘½è¿ï¼Œè½¯ä»¶é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ï¼Œè½¯ä»¶é¡¹ç›®çš„è¿ç»´æˆæœ¬ï¼Œè½¯ä»¶é¡¹ç›®çš„æ‹“å±•æ€§**

**ä¸ºä»€ä¹ˆè¦è¿›è¡Œä»£ç æ£€æŸ¥**

- é¿å…ä½Žçº§BUG
- ç»Ÿä¸€ä»£ç ä¹ æƒ¯
- ä¿è¯çº¿ä¸Šä»£ç è´¨é‡

**å¦‚ä½•è®©ä¸€ä¸ªå›¢é˜Ÿçš„äººäº§å‡ºçš„ä»£ç éƒ½åœ¨ä¸€ä¸ªåŸºæœ¬æ°´å¹³åº•çº¿ä¹‹ä¸Šå‘¢?**

æœ€åˆæ˜¯é åˆ¶è®¢è§„èŒƒã€‚è¦ç¡®ä¿è§„èŒƒå¾—ä»¥æ‰§è¡Œåªèƒ½é äººï¼Œæ‰€ä»¥æ–‡å­—è§„èŒƒæˆäº†code reviewçš„å…¬å…±å‚ç…§æ ‡å‡†ã€‚å•çº¯é äººçš„äº‹æœ€ç»ˆéƒ½å®¹æ˜“æµäºŽå½¢å¼ï¼Œ

ðŸ”¥æ‰€ä»¥éœ€è¦å·¥å…·åŠ ä»¥ä¿è¯ã€‚è™½è¯´å·¥å…·å¹¶ä¸èƒ½å®Œå…¨å®žçŽ°è§„èŒƒä¸­çš„è§„åˆ™ï¼Œä½†è‡³å°‘èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ ä¸Šç¼“è§£ä»£ç ä¸ç»Ÿä¸€ä¸€çš„å±€é¢


**ä»Žå“ªå‡ ä¸ªæ–¹é¢å¯ä»¥è®©é¡¹ç›®è´¨é‡æœ‰æ‰€æé«˜å‘¢ï¼Ÿ**

- ä»£ç Lintï¼šå‘Šåˆ«ä½Žçº§é”™è¯¯ï¼Œç®€å•çš„é…ç½®è®©ç¨‹åºæ¥è‡ªåŠ¨æ£€æŸ¥
- e2e testï¼še2eæµ‹è¯•ï¼Œé»‘ç›’æµ‹è¯•ï¼Œå¦‚ä½•ç”¨e2eè¿›è¡Œç«¯åˆ°ç«¯çš„æµ‹è¯•
- å¼€æºæµ‹è¯•å¹³å°ï¼šcodecovä»‹ç»ï¼ˆé…åˆCIå·¥å…·ï¼Œè®©æµ‹è¯•è¿‡ç¨‹è‡ªåŠ¨åŒ–ï¼‰

---

### 2.æ—¥å¸¸å†™ä»£ç ä¸­é‡åˆ°çš„é—®é¢˜

**ä»£ç é£Žæ ¼**

**ä»£ç è§„èŒƒ**

è¿™é‡Œä½¿ç”¨ Typescript èƒ½æé«˜ä»£ç è´¨é‡

**è®¾è®¡æ€è·¯**

æœ‰çš„äººå†™çš„ç¨‹åºå°±æ˜¯é«˜åº¦è€¦åˆçš„ï¼Œå‡ åä¸ªå‡½æ•°ï¼Œå¾ˆéš¾è°ƒç”¨ï¼Œæ²¡åŠžæ³•ç»´æŠ¤ï¼Œè¿™å°±å’Œæ€è·¯æœ‰å…³ç³»äº†ï¼Œè¦è®¾è®¡ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡ä¸€äº›æ¨¡å—åŒ–çš„ä¸œè¥¿ï¼Œæ¥è§„é¿è¿™ç‚¹

---

### 3.ä»£ç è´¨é‡æ£€æµ‹ Lint

**Lintï¼šæ˜¯ä¸€æ¬¾åˆ†æžæºç ä»¥åŠæ ‡è®°ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼ˆä»£ç ï¼Œæ ·å¼ï¼Œæž„å»ºï¼‰ä¹¦å†™çš„é”™è¯¯çš„å·¥å…·**

å¸¸è§çš„3ä¸ªJSæ£€æµ‹å·¥å…·å¯¹æ¯”

- JSLintï¼ˆ2012å¹´å‡ºçŽ°ï¼‰ï¼š
    - ä¼˜ç‚¹ï¼šå‚æ•°é…ç½®å®Œæˆï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨
    - ç¼ºç‚¹ï¼šæœ‰é™çš„é…ç½®é€‰é¡¹ï¼Œä¸èƒ½å¢žåŠ ä¸ªæ€§åŒ–çš„è§„åˆ™ç­‰ç­‰
- JSHint
    - ä¼˜ç‚¹ï¼šå¯é…ç½®ï¼Œå¯ä»¥å†™é…ç½®æ–‡ä»¶
    - ç¼ºç‚¹ï¼šéš¾äºŽçŸ¥é“é‚£ä¸ªè§„åˆ™äº§ç”Ÿçš„é”™è¯¯ï¼Œä¸èƒ½è‡ªå®šä¹‰è§„åˆ™ç­‰ç­‰
- ðŸ”¥ESLintï¼ˆæ¯”è¾ƒæ–°çš„å·¥å…·ï¼ŒJSCSå·²ç»åˆå¹¶åˆ°ESLintï¼‰
    - ä¼˜ç‚¹ï¼šé«˜åº¦å¯é…ç½®
    - ç¼ºç‚¹ï¼šéœ€è¦ä¸€äº›é…ç½®ï¼Œé€Ÿåº¦æ…¢

---

### 4.Lintå·¥å…·ä»‹ç»ï¼ˆ4ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼‰

**æ ¸å¿ƒæ˜¯é…ç½®æ–‡ä»¶ï¼Œè§„åˆ™æ˜¯å†™åˆ°é‡Œé¢çš„ï¼š.eslintrc.js**

**å¸¸è§è§„åˆ™**

- off && 0ï¼šå…³é—­è§„åˆ™
- warn && 1ï¼šå¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«é”™è¯¯ï¼ˆä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡ºï¼‰
- error && 2ï¼šå¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«é”™è¯¯ï¼ˆç¨‹åºä¼šé€€å‡ºï¼‰

```js
// ä¾‹å¦‚
{
    "rules": {
        "semi": ["error", "never"]
    }
}
```

**Extendsï¼šä½¿ç”¨åˆ«äººçš„åŒ…ï¼ˆä½¿ç”¨åˆ«äººçš„è§„åˆ™ï¼‰**

```js
{
    "extends": "google"
}
```

**ðŸ”¥Pluginsï¼šæ’ä»¶ç³»ç»Ÿ**

æˆ‘ä»¬æœ‰æ—¶å€™å¯èƒ½æœ‰ä¸€äº›ç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚Vueçš„è¯­æ³•ï¼Œä¾‹å¦‚lessï¼Œsassç­‰è¿™äº›çš„è¯­æ³•ï¼Œå¯èƒ½ ä½¿ç”¨åˆ«äººçš„åŒ…é‡Œé¢ä¹Ÿæ²¡æœ‰è¿™äº›é…ç½®ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±é…ç½®äº†ï¼ˆé’ˆå¯¹ç‰¹å®šçš„è¯­æ³•ç»“æž„è¿›è¡ŒLintï¼‰

---

### 5.ESLintåˆå§‹åŒ–

- å®‰æŽ’ï¼šnpm install eslint --save-dev
- ä½¿ç”¨

```js
// 
"scripts": {
  "lint": "eslint app.js",
  "lint:create": "eslint --init",
},
```

**ä½¿ç”¨ eslint --initåˆ›å»ºä¸€ä¸ªESLinté…ç½®æ–‡ä»¶**

- ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæ£€æŸ¥ä»£ç è§„èŒƒ | ðŸ”¥æ£€æŸ¥ä»£ç è§„èŒƒå¹¶æŸ¥æ‰¾ä¸€äº›é—®é¢˜ | å¼ºåˆ¶ä½¿ç”¨æŸäº›è§„èŒƒ
- ç¬¬äºŒä¸ªé—®é¢˜ï¼ˆä½ ä½¿ç”¨å“ªç§æ¨¡å—æ–¹å¼ï¼‰ï¼šðŸ”¥ESM | COM | ä¸ä½¿ç”¨
- ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼ˆé€‰æ‹©å¸¸è§çš„æ¡†æž¶ï¼‰
- ç¬¬å››ä¸ªé—®é¢˜ï¼ˆä½ çš„ä»£ç ä¼šåœ¨å“ªé‡Œè¿è¡Œï¼‰ï¼šðŸ”¥æµè§ˆå™¨ | ðŸ”¥Node
- ç¬¬äº”ä¸ªé—®é¢˜ï¼ˆä½ æƒ³æŠŠè¿™äº›é…ç½®æ”¾åˆ°ä»€ä¹ˆæ–‡ä»¶ä¸­ï¼‰

```js
module.exports = {
    "env": { // è¿è¡ŒçŽ¯å¢ƒ
        "browser": true,
        "es6": true,
        "node": true
    },
    "extends": "eslint:recommended", // æ‹“å±•è§„åˆ™
    "globals": { // æ‰§è¡Œä»£ç æ—¶è„šæœ¬éœ€è¦è®¿é—®é¢å¤–å…¨å±€å˜é‡
        "Atomics": "readonly",
        "SharedArrayBuffer": "readonly"
    },
    "parserOptions": { // ç”¨äºŽæŒ‡å®šæƒ³è¦æ”¯æŒçš„JSè¯­è¨€
        "ecmaVersion": 2018,
        "sourceType": "module"
    },
    "rules": { // å¼€å¯æŸäº›è§„åˆ™ï¼Œè®¾ç½®è§„åˆ™ç™»è®°
    }
};
```

**â£ï¸æ³¨æ„ï¼Œæœ‰æ—¶å€™ä¹Ÿè¦å†™å¦ä¸€ä¸ªæ–‡ä»¶.eslintignoreï¼Œç”¨äºŽå‘Šè¯‰ESLintå¿½ç•¥æŸäº›æ–‡ä»¶æˆ–è€…ç›®å½•**


---


> 